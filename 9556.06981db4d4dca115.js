"use strict";(self.webpackChunkintranet=self.webpackChunkintranet||[]).push([[9556],{9556:(Y,p,o)=>{o.r(p),o.d(p,{DiequalificationoverdueComponent:()=>W});var l=o(6814),u=o(6223),_=o(6521),m=o(7248),v=o(9246),f=o(3620),g=o(3997),r=o(951),b=o(2681),h=o(1312),D=o(4807),e=o(9212),x=o(377),T=o(2425),C=o(8778),A=o(5633),Z=o(7473),E=o(1148),M=o(5219);const O=()=>[l.O5,o.e(9176).then(o.bind(o,9176)).then(s=>s.TenderchatComponent),h.V];function U(s,n){if(1&s){const t=e.EpF();e.TgZ(0,"h2",4),e._uU(1,"Die Qualification Overdue List"),e.qZA(),e.TgZ(2,"div",5)(3,"div",6)(4,"input",7),e.NdJ("ngModelChange",function(a){e.CHM(t);const c=e.oxw();return e.KtG(c.searchvalue=a)}),e.qZA(),e.TgZ(5,"span",8),e.O4$(),e.TgZ(6,"svg",9),e._UZ(7,"path",10)(8,"path",11)(9,"path",12),e.qZA()()()()}if(2&s){const t=e.oxw();e.xp6(4),e.Q6J("ngModel",t.searchvalue)}}function P(s,n){1&s&&(e.TgZ(0,"th",18),e._uU(1,"Delete"),e.qZA())}function q(s,n){if(1&s){const t=e.EpF();e.TgZ(0,"td")(1,"button",24),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,c=e.oxw(2);return e.KtG(c.CancelP2P(a.id))}),e._UZ(2,"i",25),e.qZA()()}}function S(s,n){if(1&s){const t=e.EpF();e.TgZ(0,"tr",20)(1,"td",21),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td")(6,"div"),e._uU(7),e.qZA(),e.TgZ(8,"div"),e._uU(9),e.qZA(),e.TgZ(10,"div"),e._uU(11),e.qZA()(),e.TgZ(12,"td")(13,"div"),e._uU(14),e.qZA()(),e.TgZ(15,"td")(16,"div"),e._uU(17),e.qZA(),e.TgZ(18,"div"),e._uU(19),e.ALo(20,"date"),e.qZA()(),e.TgZ(21,"td")(22,"button",22),e.NdJ("click",function(){const c=e.CHM(t).$implicit,d=e.oxw(2);return e.KtG(d.expendaccordion(c))}),e._uU(23,"Action"),e.qZA()(),e.YNc(24,q,3,0,"td",23),e.qZA()}if(2&s){const t=n.$implicit,i=n.$index,a=e.oxw(2);e.xp6(2),e.Oqu(i+1),e.xp6(2),e.Oqu(t.diesticket),e.xp6(3),e.Oqu(t.itemcode?t.itemname:t.item),e.xp6(2),e.Oqu(t.other),e.xp6(2),e.Oqu(t.remarks),e.xp6(3),e.AsE("",t.size," (",t.repeat,")"),e.xp6(3),e.Oqu(t.updatedby),e.xp6(2),e.Oqu(e.xi3(20,10,t.updateddate,"dd-MMM-yyyy hh:mm a")),e.xp6(5),e.Q6J("ngIf",a.isadmin)}}function L(s,n){if(1&s&&(e.TgZ(0,"div",13)(1,"div",14)(2,"div",15)(3,"div",16)(4,"table",17)(5,"thead")(6,"tr")(7,"th",18),e._uU(8,"S.No."),e.qZA(),e.TgZ(9,"th",18),e._uU(10,"TID"),e.qZA(),e.TgZ(11,"th",18),e._uU(12,"Item Name"),e.qZA(),e.TgZ(13,"th",18),e._uU(14,"Size(Repeat)"),e.qZA(),e.TgZ(15,"th",18),e._uU(16,"Last Update"),e.qZA(),e.TgZ(17,"th",18),e._uU(18,"Action"),e.qZA(),e.YNc(19,P,2,0,"th",19),e.qZA()(),e.TgZ(20,"tbody"),e.SjG(21,S,25,13,"tr",26,e.x6l),e.ALo(23,"filter"),e.qZA()()()()()()),2&s){const t=e.oxw();e.xp6(19),e.Q6J("ngIf",t.isadmin),e.xp6(2),e.wJu(e.xi3(23,1,t.service.p2plist,t.searchvalue))}}function I(s,n){if(1&s&&(e.TgZ(0,"div",27)(1,"p",28),e._uU(2,"Showing "),e.TgZ(3,"span"),e._uU(4,"1"),e.qZA(),e._uU(5," to "),e.TgZ(6,"span"),e._uU(7),e.qZA(),e._uU(8," of "),e.TgZ(9,"span"),e._uU(10),e.qZA(),e._uU(11," entries"),e.qZA()()),2&s){const t=e.oxw(2);e.xp6(7),e.Oqu(t.service.p2plist.length),e.xp6(3),e.Oqu(t.service.p2plist.length)}}function N(s,n){1&s&&e.YNc(0,I,12,2,"ng-template",3)}function w(s,n){if(1&s&&(e.TgZ(0,"label",41),e._uU(1),e.qZA()),2&s){const t=e.oxw(3);e.xp6(1),e.hij("Die Description : ",t.service.p2pdata.remarks,"")}}function y(s,n){if(1&s&&(e.TgZ(0,"div",38)(1,"div",39)(2,"div",40)(3,"label",41),e._uU(4),e.qZA(),e.TgZ(5,"label",41),e._uU(6),e.qZA()(),e.TgZ(7,"div",40)(8,"label",41),e._uU(9),e.qZA()(),e.TgZ(10,"div",32),e.YNc(11,w,2,1,"label",42),e.qZA()()()),2&s){const t=e.oxw(2);e.xp6(4),e.hij("Item Name : ",t.service.p2pdata.itemname,""),e.xp6(2),e.hij("Customer Name : ",t.service.p2pdata.other,""),e.xp6(3),e.AsE("Size : ",t.service.p2pdata.size,"(",t.service.p2pdata.repeat,")"),e.xp6(2),e.Q6J("ngIf",t.service.p2pdata.remarks)}}function G(s,n){if(1&s){const t=e.EpF();e.TgZ(0,"div",43)(1,"button",44),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.BacktoDemand())}),e._uU(2,"Back to Demand"),e.qZA()()}}function R(s,n){if(1&s){const t=e.EpF();e.TgZ(0,"div",43)(1,"button",45),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.MovetoQuotation())}),e._uU(2,"Move to Drawing Overdue"),e.qZA()()}}const F=()=>({width:"100vw"});function K(s,n){if(1&s){const t=e.EpF();e.TgZ(0,"p-dialog",29),e.NdJ("visibleChange",function(a){e.CHM(t);const c=e.oxw();return e.KtG(c.visible=a)}),e.TgZ(1,"div",30)(2,"div",31)(3,"div",32),e.YNc(4,y,12,5,"div",33),e.qZA(),e.TgZ(5,"div",34),e._UZ(6,"div",35),e.YNc(7,G,3,0,"div",36)(8,R,3,0,"div",36),e.qZA()(),e.TgZ(9,"div",37),e._UZ(10,"app-tenderchat"),e.qZA()()()}if(2&s){const t=e.oxw();e.Akn(e.DdM(7,F)),e.Q6J("visible",t.visible)("maximizable",!0),e.xp6(4),e.um2(4,null!=t.service.p2pdata.id?4:-1),e.xp6(3),e.um2(7,t.isadmin?7:-1),e.xp6(1),e.um2(8,t.isadmin?8:-1)}}let W=(()=>{class s{constructor(t,i,a,c,d,B){this.service=t,this.toast=i,this.waservice=a,this.userservice=c,this.imageservice=d,this.tenderservice=B,this.isadmin=!1,this.searchvalue="",this.panelOpenState=!1,this.visible=!1,this.count=0,this.gerbutton=!0}ngOnInit(){"Admin"==this.userservice.GetRole()&&(this.isadmin=!0)}ngOnChanges(t){throw console.log(t),new Error("Method not implemented.")}opendetails(t){this.service.detail=!0,this.service.p2pdata=t,null!=this.service.p2pdata.accountdate?this.service.p2pdata.status=10:null!=this.service.p2pdata.movementdate?this.service.p2pdata.status=9:null!=this.service.p2pdata.mrndate?this.service.p2pdata.status=8:null!=this.service.p2pdata.mandate?this.service.p2pdata.status=7:null!=this.service.p2pdata.gerdate?this.service.p2pdata.status=6:null!=this.service.p2pdata.podate?this.service.p2pdata.status=5:null!=this.service.p2pdata.approvaldate||null!=this.service.p2pdata.quotationdate?this.service.p2pdata.status=4:null!=this.service.p2pdata.updateddate?this.service.p2pdata.status=2:null!=this.service.p2pdata.createddate&&(this.service.p2pdata.status=1),this.service.GetP2PItemListbyid(t.id).subscribe(i=>{console.log(i),"success"==i.status&&(this.service.p2pitemlist=i.data)}),this.service.GetP2PApprovedItemListbyid(t.id).subscribe(i=>{console.log(i),"success"==i.status&&(this.service.p2papproveditemlist=i.data)}),this.imageservice.GetDocumentsbyid(t.id).subscribe(i=>{"success"==i.status&&(this.imageservice.rcuploadedlist=i.data),console.log(i)})}LoadOverdueList(){this.service.GetP2PList(1,1e4,"","","QualificationOverdue").subscribe(t=>{this.service.p2plist=t.data},t=>{this.toast.error(t)})}LoadDashboard(){this.service.GetDashboardReport().subscribe(t=>{this.service.dashboarddata=t})}SearchItem(t){this.service.SearchItem(t.target.value).pipe((0,f.b)(500),(0,g.x)()).subscribe(a=>{"success"==a.status?(console.log(a),this.filtereddata=a.data):this.toast.error(a.message,"Error")})}update(t){this.service.p2pdata.currentstatus="Pending",this.service.p2pdata.status=2,this.service.p2pdata.updatedby=this.userservice.GetFullName(),this.service.p2pdata.updateddate=this.gettime(),this.service.CreateUpdate().subscribe(i=>{"success"==i.status?(this.toast.success(i.key,"Success"),this.waservice.sendotp("9205881316","").subscribe(c=>{}),this.LoadOverdueList(),this.LoadDashboard(),this.filtereddata=null,this.visible=!1):this.toast.error(i.key,"Error")},i=>{this.toast.error(i,"Error")})}ApproveItem(t){this.service.p2pitemdata=t,this.service.ApproveQuotation().subscribe(i=>{"approved"==i.status?this.toast.success(i.message,"Approved"):"rejected"==i.status?this.toast.warning(i.message,"Rejected"):"cancelled"==i.status&&this.toast.error(i.message,"Error"),this.enablepobutton()},i=>{this.toast.error(i,"Error")})}MovetoQuotation(){1==confirm("Are You Sure want to Move Die to Drawing Overdue?")&&(this.service.p2pdata.qualificationby=this.userservice.GetFullName(),this.service.p2pdata.qualificationdate=this.gettime(),this.service.CreateUpdate().subscribe(t=>{"success"==t.status?(this.toast.success("Die Moved to Quotation Overdue Successfully","Success"),this.visible=!1,this.LoadDashboard(),this.LoadOverdueList()):this.toast.warning(t.message,"Warning")}))}BacktoDemand(){1==confirm("Are You Sure want to Back Die to Demand Overdue?")&&(this.service.p2pdata.updatedby=null,this.service.p2pdata.updateddate=null,this.service.CreateUpdate().subscribe(t=>{"success"==t.status?(this.toast.warning("Die Moved to Demand Overdue Successfully","Success"),this.visible=!1,this.LoadDashboard(),this.LoadOverdueList()):this.toast.warning(t.message,"Warning")}))}gettime(){let t=new Date,a=t.getTime()+Math.abs(6e4*t.getTimezoneOffset());return new Date(a).toISOString()}confirmquotation(t,i){this.service.p2pdata=t,"Quotation"==i?(this.service.p2pdata.quotationby=this.userservice.GetFullName(),this.service.p2pdata.quotationdate=this.gettime()):"Approval"==i?(this.service.p2pdata.approvedby=this.userservice.GetFullName(),this.service.p2pdata.approvaldate=this.gettime()):"PO"==i?(this.service.p2pdata.poby=this.userservice.GetFullName(),this.service.p2pdata.podate=this.gettime()):"GER"==i?(this.service.p2pdata.gerby=this.userservice.GetFullName(),this.service.p2pdata.gerdate=this.gettime()):"MAN"==i?(this.service.p2pdata.manby=this.userservice.GetFullName(),this.service.p2pdata.mandate=this.gettime()):"MRN"==i?(this.service.p2pdata.mrnby=this.userservice.GetFullName(),this.service.p2pdata.mrndate=this.gettime()):"Movement"==i?(this.service.p2pdata.movementby=this.userservice.GetFullName(),this.service.p2pdata.movementdate=this.gettime()):"Account"==i&&(this.service.p2pdata.accountby=this.userservice.GetFullName(),this.service.p2pdata.accountdate=this.gettime()),this.service.CreateUpdate().subscribe(a=>{"success"==a.status&&("Quotation"==i?this.toast.success("Quotation Submitted Successfully","Success"):"Approval"==i?this.toast.success("Quotation Approved Successfully","Success"):"PO"==i?this.toast.success("PO Submitted Successfully","Success"):"GER"==i?this.toast.success("GER Submitted Successfully","Success"):"MAN"==i?this.toast.success("MAN Submitted Successfully","Success"):"MRN"==i?this.toast.success("MRN Submitted Successfully","Success"):"Movement"==i?this.toast.success("Movement Submitted Successfully","Success"):"Account"==i&&this.toast.success("Account Submitted Successfully","Success"),this.LoadOverdueList(),this.LoadDashboard())})}expendaccordion(t){this.service.p2pdata=t,this.service.p2pitemlist=[],this.enablepo=!1,this.visible=!0,this.service.p2pitemdata=new r.bY,this.GetItemListbyid(t.id),this.tenderservice.tenderchatid=t.id,this.tenderservice.Chatbyid(t.id),this.tenderservice.ReadChat(t.id,this.userservice.GetUserName(),this.userservice.GetFullName()),this.tenderservice.tenderchatdata=new r.Y_,this.tenderservice.tenderchatdata.header="Die Demand Overdue",this.tenderservice.tenderchatdata.type="Dies"}expendtab(t,i){1==t?(this.service.p2pdata=i,this.service.p2pitemlist=[],this.enablepo=!1,this.service.p2pitemdata=new r.bY,this.GetItemListbyid(i.id)):(this.service.p2pdata=i,this.service.p2pitemlist=[],this.enablepo=!1,this.service.p2pitemdata=new r.bY)}GetItemListbyid(t){this.service.GetP2PItemListbyid(t).subscribe(i=>{"success"==i.status&&(this.service.p2pitemlist=i.data,this.enablepobutton())})}Displaystock(t){var i=this.service.p2pdata.itemcode;console.log(i,t),this.service.GetStockbyid(i).subscribe(a=>{"success"==a.status?(this.service.stockitems=a.data,console.log(a)):this.toast.warning(a.message,"Warning")})}enablepobutton(){this.count=0,this.service.p2pitemlist.forEach(i=>{i.ger&&1==i.status&&this.count++}),this.gerbutton=!(this.count>0)}populatepo(t){this.service.p2pitemdata=t,this.enablepo=!this.enablepo}updateger(t){t.valid?this.service.CreateUpdateQuotation().subscribe(i=>{"success"==i.status?(this.enablepo=!1,this.toast.success(i.message,"Success"),this.GetItemListbyid(this.service.p2puid),this.service.p2pitemdata=new r.bY,this.visible=!1,this.LoadDashboard(),t.reset(),this.enablepobutton()):this.toast.warning(i.message,"Warning")},i=>{this.toast.error(i,"Error")}):this.toast.warning("Please Update GER Number","Warning")}CancelP2P(t){1==confirm("Are You Sure want to Cancel "+t)&&this.service.CancelP2P(t).subscribe(i=>{"success"==i.status?(this.toast.success(i.message,"Success"),this.LoadOverdueList(),this.LoadDashboard()):this.toast.warning(i.message,"Warning")})}static#e=this.\u0275fac=function(i){return new(i||s)(e.Y36(x.h),e.Y36(T._W),e.Y36(C.C),e.Y36(A.K),e.Y36(Z.D),e.Y36(E.$))};static#t=this.\u0275cmp=e.Xpm({type:s,selectors:[["app-diequalificationoverdue"]],standalone:!0,features:[e.TTD,e.jDz],decls:7,vars:4,consts:[[3,"visible","fullScreen","visibleChange"],["pTemplate","header"],["pTemplate","content"],["pTemplate","footer"],[1,"page-title"],[1,"ms-auto","text-muted"],[1,"input-icon"],["type","text","placeholder","Search.....",1,"form-control",3,"ngModel","ngModelChange"],[1,"input-icon-addon"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","stroke-width","2","stroke","currentColor","fill","none","stroke-linecap","round","stroke-linejoin","round",1,"icon"],["stroke","none","d","M0 0h24v24H0z","fill","none"],["d","M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0"],["d","M21 21l-6 -6"],[1,"row","row-cards"],[1,"col-12"],[1,"card"],[1,"table-responsive"],["id","contentToConvert",1,"table","card-table","table-vcenter","datatable","table-sm","table-fixed"],[1,"text-center"],["class","text-center",4,"ngIf"],[1,"strong","text-center"],[1,"text-nowrap"],["type","button",1,"btn","btn-outline-info","btn-pill","strong",3,"click"],[4,"ngIf"],["type","button",1,"btn","btn-outline-danger","btn-icon",3,"click"],[1,"fa","fa-trash"],["class","strong text-center"],[1,"card-footer","d-flex","align-items-center"],[1,"m-0","strong"],["header","Qualification Overdue Form",3,"visible","maximizable","visibleChange"],[1,"row","g-0"],[1,"col-12","col-lg-9","col-xl-9","border-end"],[1,"col-md-12"],["class","col-sm-12 col-md-12"],[1,"row"],[1,"col-md-4"],["class","col-md-4 text-center"],[1,"col-12","col-lg-3","col-xl-3","d-flex","flex-column"],[1,"col-sm-12","col-md-12"],[1,"row","text-center"],[1,"col-md-6"],[1,"form-label"],["class","form-label",4,"ngIf"],[1,"col-md-4","text-center"],["type","button",1,"btn","btn-outline-warning",3,"click"],["type","button",1,"btn","btn-outline-success",3,"click"]],template:function(i,a){1&i&&(e.TgZ(0,"p-sidebar",0),e.NdJ("visibleChange",function(d){return a.service.qualificationoverduevisible=d}),e.YNc(1,U,10,1,"ng-template",1)(2,L,24,4,"ng-template",2)(3,N,1,0,null,3),e.qZA(),e.YNc(4,K,11,8),e.EqZ(5,4,O)),2&i&&(e.Q6J("visible",a.service.qualificationoverduevisible)("fullScreen",!0),e.xp6(3),e.um2(3,a.service.p2plist?3:-1),e.xp6(2),e.cPc(1==a.visible))},dependencies:[l.ez,l.O5,l.uU,u.u5,u.Fj,u.JJ,u.On,v.l,v.Y,M.jx,m.$,_.O,b.FilterPipe,D.A0,h.S]})}return s})()}}]);