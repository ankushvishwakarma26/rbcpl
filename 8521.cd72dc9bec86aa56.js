"use strict";(self.webpackChunkintranet=self.webpackChunkintranet||[]).push([[8521],{8521:(Ce,p,r)=>{r.r(p),r.d(p,{QuotationoverdueComponent:()=>be});var d=r(6814),l=r(6223),_=r(4807),m=r(1312),v=r(9246),x=r(3620),b=r(3997),u=r(951),h=r(7248),g=r(6521),e=r(9212),C=r(377),Z=r(2425),T=r(5633),A=r(7473),q=r(1148),f=r(5219);const D=()=>[d.mk,d.uU,l.Fj,l.JJ,l.On,v.Y,f.jx,Promise.resolve().then(r.bind(r,2681)).then(o=>o.FilterPipe)],M=()=>[d.mk,d.sg,d.O5,d.H9,d.uU,l._Y,l.Fj,l.wV,l.JJ,l.JL,l.Q7,l.On,l.F,f.jx,m.V,_.w9,_.jq,r.e(6661).then(r.bind(r,6661)).then(o=>o.Previousp2pComponent),r.e(9176).then(r.bind(r,9176)).then(o=>o.TenderchatComponent),h.E,g.p];function Q(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"h2",4),e._uU(1,"Quotation Overdue List"),e.qZA(),e.TgZ(2,"div",5)(3,"div",6)(4,"input",7),e.NdJ("ngModelChange",function(n){e.CHM(t);const a=e.oxw(2);return e.KtG(a.searchvalue=n)}),e.qZA(),e.TgZ(5,"span",8),e.O4$(),e.TgZ(6,"svg",9),e._UZ(7,"path",10)(8,"path",11)(9,"path",12),e.qZA()()()()}if(2&o){const t=e.oxw(2);e.xp6(4),e.Q6J("ngModel",t.searchvalue)}}function U(o,s){1&o&&(e.TgZ(0,"th",18),e._uU(1,"Delete"),e.qZA())}function w(o,s){if(1&o&&(e._uU(0),e.TgZ(1,"span",22),e._uU(2),e.qZA()),2&o){const t=e.oxw().$implicit;e.hij(" ",t.diesticket," "),e.xp6(1),e.Q6J("ngClass","P2P"==t.type?"text-muted":"text-danger"),e.xp6(1),e.hij("(",t.type,")")}}function y(o,s){if(1&o&&(e._uU(0),e.TgZ(1,"span",22),e._uU(2),e.qZA(),e.TgZ(3,"span",22),e._uU(4),e.qZA()),2&o){const t=e.oxw().$implicit;e.hij(" ",t.id," "),e.xp6(1),e.Q6J("ngClass","P2P"==t.type?"text-muted":"text-danger"),e.xp6(1),e.hij("(",t.type,")"),e.xp6(1),e.Q6J("ngClass","F2"==t.buyeraddress?"text-purple":"F3"==t.buyeraddress?"text-yellow":"F4"==t.buyeraddress?"text-orange":""),e.xp6(1),e.hij("(",t.buyeraddress,")")}}function E(o,s){if(1&o&&(e.TgZ(0,"div"),e._uU(1),e.qZA(),e.TgZ(2,"div"),e._uU(3),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.AsE("",t.size," (",t.repeat,")"),e.xp6(2),e.Oqu(t.remarks)}}function N(o,s){if(1&o&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.AsE("",t.quantity," (",t.itemunit,")")}}function F(o,s){if(1&o&&(e.TgZ(0,"div"),e._uU(1),e.qZA(),e.TgZ(2,"div"),e._uU(3),e.ALo(4,"date"),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.pricingapprovalby),e.xp6(2),e.Oqu(e.xi3(4,2,t.pricingapprovaldate,"dd-MMM-yyyy hh:mm a"))}}function O(o,s){if(1&o&&(e.TgZ(0,"div"),e._uU(1),e.qZA(),e.TgZ(2,"div"),e._uU(3),e.ALo(4,"date"),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.updatedby),e.xp6(2),e.Oqu(e.xi3(4,2,t.updateddate,"dd-MMM-yyyy hh:mm a"))}}function k(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"td")(1,"button",25),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit,a=e.oxw(3);return e.KtG(a.CancelP2P(n.id))}),e._UZ(2,"i",26),e.qZA()()}}function S(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"tr",20)(1,"td",21),e._uU(2),e.qZA(),e.TgZ(3,"td"),e.YNc(4,w,3,3,"span",22)(5,y,5,5),e.qZA(),e.TgZ(6,"td")(7,"div")(8,"button",23),e.NdJ("click",function(){const a=e.CHM(t).$implicit,c=e.oxw(3);return e.KtG(c.opendetails(a))}),e._uU(9),e.qZA(),e.TgZ(10,"span",22),e._uU(11),e.qZA()()(),e.TgZ(12,"td"),e.YNc(13,E,4,3)(14,N,2,2),e.qZA(),e.TgZ(15,"td"),e.YNc(16,F,5,5)(17,O,5,5),e.qZA(),e.TgZ(18,"td")(19,"button",24),e.NdJ("click",function(){const a=e.CHM(t).$implicit,c=e.oxw(3);return e.KtG(c.expendaccordion(a))}),e._uU(20,"Action"),e.qZA()(),e.YNc(21,k,3,0,"td"),e.qZA()}if(2&o){const t=s.$implicit,i=s.$index,n=e.oxw(3);e.xp6(2),e.Oqu(i+1),e.xp6(2),e.um2(4,"Dies"==t.type?4:5),e.xp6(5),e.Oqu(t.itemname),e.xp6(1),e.Q6J("ngClass",0==t.count?"text-danger":"text-success"),e.xp6(1),e.hij("(",t.count,")"),e.xp6(2),e.um2(13,"Dies"==t.type?13:14),e.xp6(3),e.um2(16,"Dies"==t.type?16:17),e.xp6(5),e.um2(21,n.isadmin?21:-1)}}function P(o,s){if(1&o&&(e.TgZ(0,"div",13)(1,"div",14)(2,"div",15)(3,"div",16)(4,"table",17)(5,"thead")(6,"tr")(7,"th",18),e._uU(8,"S.No."),e.qZA(),e.TgZ(9,"th",18),e._uU(10,"ID"),e.qZA(),e.TgZ(11,"th",18),e._uU(12,"Item Name"),e.qZA(),e.TgZ(13,"th",18),e._uU(14,"Qty"),e.qZA(),e.TgZ(15,"th",18),e._uU(16,"Last Update"),e.qZA(),e.TgZ(17,"th",18),e._uU(18,"Action"),e.qZA(),e.YNc(19,U,2,0,"th",19),e.qZA()(),e.TgZ(20,"tbody"),e.SjG(21,S,22,8,"tr",27,e.x6l),e.ALo(23,"filter"),e.qZA()()()()()()),2&o){const t=e.oxw(2);e.xp6(19),e.um2(19,t.isadmin?19:-1),e.xp6(2),e.wJu(e.xi3(23,1,t.service.p2plist,t.searchvalue))}}function J(o,s){if(1&o&&(e.TgZ(0,"div",28)(1,"p",29),e._uU(2,"Showing "),e.TgZ(3,"span"),e._uU(4,"1"),e.qZA(),e._uU(5," to "),e.TgZ(6,"span"),e._uU(7),e.qZA(),e._uU(8," of "),e.TgZ(9,"span"),e._uU(10),e.qZA(),e._uU(11," entries"),e.qZA()()),2&o){const t=e.oxw(3);e.xp6(7),e.Oqu(t.service.p2plist.length),e.xp6(3),e.Oqu(t.service.p2plist.length)}}function G(o,s){1&o&&e.YNc(0,J,12,2,"ng-template",3)}function I(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"p-sidebar",0),e.NdJ("visibleChange",function(n){e.CHM(t);const a=e.oxw();return e.KtG(a.service.quotationoverduevisible=n)}),e.YNc(1,Q,10,1,"ng-template",1)(2,P,24,4,"ng-template",2)(3,G,1,0,null,3),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("visible",t.service.quotationoverduevisible)("fullScreen",!0),e.xp6(3),e.um2(3,t.service.p2plist?3:-1)}}function L(o,s){if(1&o&&(e.TgZ(0,"label",36),e._uU(1),e.qZA(),e.TgZ(2,"label",36),e._uU(3),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.hij("Customer Name : ",t.service.p2pdata.other,""),e.xp6(2),e.AsE("Size : ",t.service.p2pdata.size,"(",t.service.p2pdata.repeat,")")}}function Y(o,s){if(1&o&&(e.TgZ(0,"label",36),e._uU(1),e.qZA()),2&o){const t=e.oxw(3);e.xp6(1),e.hij("Die Description : ",t.service.p2pdata.remarks,"")}}function K(o,s){if(1&o&&(e.TgZ(0,"div",43),e.YNc(1,Y,2,1,"label",49),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.service.p2pdata.remarks)}}function R(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",43)(1,"textarea",50,51),e.NdJ("ngModelChange",function(n){e.CHM(t);const a=e.oxw(2);return e.KtG(a.service.p2pdata.quotationremarks=n)}),e.qZA(),e.TgZ(3,"div",52)(4,"div",53)(5,"a",54),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.updateremarks=!1)}),e._uU(6,"Cancel"),e.qZA(),e.TgZ(7,"button",55),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.SubmitRemarks())}),e._uU(8,"Submit"),e.qZA()()()()}if(2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngModel",t.service.p2pdata.quotationremarks)}}function $(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"button",55),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.OpenQuotation())}),e.O4$(),e.TgZ(1,"svg",56),e._UZ(2,"path",10)(3,"path",57)(4,"path",58),e.qZA(),e._uU(5," Add Quotation"),e.qZA()}}function H(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"button",59),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.OpenQuotation())}),e.O4$(),e.TgZ(1,"svg",60),e._UZ(2,"path",10)(3,"path",58),e.qZA(),e._uU(4," Close Quotation"),e.qZA()}}function j(o,s){if(1&o&&(e.TgZ(0,"ng-option",81),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.Q6J("value",t.code),e.xp6(1),e.Oqu(t.name)}}function W(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"ng-select",78,79),e.NdJ("ngModelChange",function(n){e.CHM(t);const a=e.oxw(3);return e.KtG(a.service.p2pitemdata.accode=n)})("keyup",function(n){e.CHM(t);const a=e.oxw(3);return e.KtG(a.SearchDealer(n))}),e.YNc(2,j,2,2,"ng-option",80),e.qZA()}if(2&o){const t=e.MAs(1),i=e.oxw(3);e.Q6J("ngClass",t.invalid?"is-invalid":"is-valid mb-2")("ngModel",i.service.p2pitemdata.accode),e.xp6(2),e.Q6J("ngForOf",i.filtereddata)}}function B(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"input",82,83),e.NdJ("ngModelChange",function(n){e.CHM(t);const a=e.oxw(3);return e.KtG(a.service.p2pitemdata.name=n)}),e.qZA()}if(2&o){const t=e.MAs(1),i=e.oxw(3);e.Q6J("ngClass",t.invalid?"is-invalid":"is-valid mb-2")("ngModel",i.service.p2pitemdata.name)}}function V(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"form",61,62),e.NdJ("ngSubmit",function(){e.CHM(t);const n=e.MAs(1),a=e.oxw(2);return e.KtG(n.form.valid&&a.submitquotation(n))}),e.TgZ(2,"div",13)(3,"div",63)(4,"label",64),e._uU(5,"Vender Name "),e.TgZ(6,"span",65),e._uU(7,"(Not have Vender in ERP?)"),e.TgZ(8,"button",23),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.VenderType())}),e._uU(9,"Click here"),e.qZA()()(),e._UZ(10,"input",66),e.YNc(11,W,3,3,"ng-select",67)(12,B,2,2,"input",68),e.qZA(),e.TgZ(13,"div",69)(14,"label",36),e._uU(15,"Quantity"),e.qZA(),e.TgZ(16,"input",70,71),e.NdJ("ngModelChange",function(n){e.CHM(t);const a=e.oxw(2);return e.KtG(a.service.p2pitemdata.quantity=n)}),e.qZA()(),e.TgZ(18,"div",69)(19,"label",36),e._uU(20,"Rate"),e.qZA(),e.TgZ(21,"input",72,73),e.NdJ("ngModelChange",function(n){e.CHM(t);const a=e.oxw(2);return e.KtG(a.service.p2pitemdata.rate=n)}),e.qZA()(),e.TgZ(23,"div",43)(24,"div",74)(25,"label",64),e._uU(26,"Remarks"),e.qZA(),e.TgZ(27,"textarea",75,76),e.NdJ("ngModelChange",function(n){e.CHM(t);const a=e.oxw(2);return e.KtG(a.service.p2pitemdata.remarks=n)}),e._uU(29,"                "),e.qZA()()()(),e.TgZ(30,"div",52)(31,"div",53)(32,"a",54),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.resetquotation())}),e._uU(33,"Reset"),e.qZA(),e.TgZ(34,"button",77),e._uU(35,"Submit"),e.qZA()()()()}if(2&o){const t=e.MAs(1),i=e.MAs(17),n=e.MAs(22),a=e.MAs(28),c=e.oxw(2);e.xp6(10),e.Q6J("value",c.service.p2pitemdata.Id),e.xp6(1),e.Q6J("ngIf",!c.vendername),e.xp6(1),e.Q6J("ngIf",c.vendername),e.xp6(4),e.Q6J("ngModel",c.service.p2pitemdata.quantity)("ngClass",i.invalid?"is-invalid":"is-valid mb-2"),e.xp6(5),e.Q6J("ngModel",c.service.p2pitemdata.rate)("ngClass",n.invalid?"is-invalid":"is-valid mb-2"),e.xp6(6),e.Q6J("ngClass",a.invalid?"is-invalid":"is-valid mb-2")("ngModel",c.service.p2pitemdata.remarks),e.xp6(7),e.Q6J("disabled",t.invalid)}}function z(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"button",87),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(3);return e.KtG(n.backtodemand())}),e._uU(1,"Back to Demand Overdue"),e.qZA()}}function X(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",52)(1,"div",53),e._UZ(2,"a",84),e.YNc(3,z,2,0,"button",85),e.TgZ(4,"button",86),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.confirmquotation(n.service.p2pdata,"Quotation"))}),e._uU(5,"Move to Approval"),e.qZA()()()}if(2&o){const t=e.oxw(2);e.xp6(3),e.um2(3,t.isadmin?3:-1),e.xp6(1),e.Q6J("disabled",0==t.service.p2pitemlist.length)}}function ee(o,s){if(1&o&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.name)}}function te(o,s){if(1&o&&(e.TgZ(0,"div",65),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.vendername)}}function ie(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"td",21)(1,"button",96),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit,a=e.oxw(3);return e.KtG(a.UpdateQuotation(n))}),e._UZ(2,"i",97),e.qZA(),e.TgZ(3,"button",98),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit,a=e.oxw(3);return e.KtG(a.DeleteItemData(n))}),e._UZ(4,"i",26),e.qZA()()}}function oe(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"tr",90)(1,"td",89),e._uU(2),e.qZA(),e.TgZ(3,"td",18),e.YNc(4,ee,2,1,"div",91)(5,te,2,1,"div",92),e.TgZ(6,"div"),e._uU(7),e.qZA()(),e.TgZ(8,"td",93)(9,"div")(10,"input",94),e.NdJ("ngModelChange",function(n){const c=e.CHM(t).$implicit;return e.KtG(c.quantity=n)}),e.qZA()()(),e.TgZ(11,"td",93)(12,"div"),e._uU(13),e.ALo(14,"currency"),e.qZA()(),e.TgZ(15,"td",93)(16,"div"),e._uU(17),e.qZA(),e.TgZ(18,"div"),e._uU(19),e.ALo(20,"date"),e.qZA()(),e.YNc(21,ie,5,0,"td",95),e.qZA()}if(2&o){const t=s.$implicit,i=s.$index,n=e.oxw(3);e.xp6(2),e.hij(" ",i+1," "),e.xp6(2),e.Q6J("ngIf",t.accode),e.xp6(1),e.Q6J("ngIf",!t.accode),e.xp6(2),e.Oqu(t.remarks),e.xp6(3),e.Q6J("ngModel",t.quantity),e.xp6(3),e.Oqu(e.xi3(14,9,t.rate,"INR")),e.xp6(4),e.Oqu(t.quotationcreatedby),e.xp6(2),e.Oqu(e.xi3(20,12,t.quotationcreateddate,"dd/MM/YYYY hh:mm a")),e.xp6(2),e.um2(21,t.quotationcreatedby==n.currentuser||n.isadmin?21:-1)}}function ne(o,s){if(1&o&&(e.TgZ(0,"table",88)(1,"thead")(2,"tr")(3,"th",89),e._uU(4,"S.No."),e.qZA(),e.TgZ(5,"th",18),e._uU(6,"Vender"),e.qZA(),e.TgZ(7,"th",18),e._uU(8,"Quantity"),e.qZA(),e.TgZ(9,"th",18),e._uU(10,"Rate"),e.qZA(),e.TgZ(11,"th",18),e._uU(12,"Createdby"),e.qZA(),e.TgZ(13,"th",18),e._uU(14,"Action"),e.qZA()()(),e.TgZ(15,"tbody"),e.SjG(16,oe,22,15,"tr",99,e.x6l),e.qZA()()),2&o){const t=e.oxw(2);e.xp6(16),e.wJu(t.service.p2pitemlist)}}function se(o,s){1&o&&(e.TgZ(0,"h1",100),e._uU(1,"No List Available"),e.qZA())}function ae(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"button",55),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.OpenQuotationFile())}),e.O4$(),e.TgZ(1,"svg",56),e._UZ(2,"path",10)(3,"path",57)(4,"path",58),e.qZA(),e._uU(5," Add Quotation File"),e.qZA()}}function re(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"button",59),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.OpenQuotationFile())}),e.O4$(),e.TgZ(1,"svg",60),e._UZ(2,"path",10)(3,"path",58),e.qZA(),e._uU(4," Close Quotation File"),e.qZA()}}function ce(o,s){1&o&&(e.TgZ(0,"div",103),e._uU(1,"Drag and drop files"),e.qZA())}function le(o,s){if(1&o&&(e.TgZ(0,"li"),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.xp6(1),e.AsE("",t.name," - ",t.size," bytes ")}}function de(o,s){if(1&o&&(e.TgZ(0,"ul"),e.YNc(1,le,2,2,"li",104),e.qZA()),2&o){const t=e.oxw(4);e.xp6(1),e.Q6J("ngForOf",t.uploadedFiles)}}function ue(o,s){if(1&o&&e.YNc(0,de,2,1,"ul",91),2&o){const t=e.oxw(3);e.Q6J("ngIf",t.uploadedFiles.length)}}function _e(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",33)(1,"div",74)(2,"p-fileUpload",101),e.NdJ("onUpload",function(n){e.CHM(t);const a=e.oxw(2);return e.KtG(a.onUpload(n))}),e.YNc(3,ce,2,0,"ng-template",102)(4,ue,1,1,"ng-template",2),e.qZA()()()}if(2&o){const t=e.oxw(2);e.xp6(2),e.Q6J("url",t.imageservice.uploadurl+"/"+t.imageservice.id+"/Quotation")("multiple",!0)}}function pe(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"button",113),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit,a=e.oxw(2);return e.KtG(a.DeleteImage(n.id))}),e.O4$(),e.TgZ(1,"svg",9),e._UZ(2,"path",10)(3,"path",114)(4,"path",115),e.qZA()()}}function me(o,s){if(1&o&&e._UZ(0,"p-image",111),2&o){const t=e.oxw().$implicit,i=e.oxw(2);e.Q6J("src",i.imageservice.imageurl+t.path)("preview",!0)}}function ve(o,s){if(1&o&&(e.TgZ(0,"a",116),e._UZ(1,"img",117),e.qZA()),2&o){const t=e.oxw().$implicit,i=e.oxw(2);e.Q6J("href",i.imageservice.imageurl+t.path,e.LSH)}}function he(o,s){if(1&o&&(e.TgZ(0,"div",105)(1,"div",15)(2,"div",106)(3,"h3",107),e._uU(4),e.qZA(),e.TgZ(5,"div",108),e.YNc(6,pe,5,0,"button",109),e.qZA()(),e.TgZ(7,"div",110),e.YNc(8,me,1,2,"p-image",111)(9,ve,2,1,"a",112),e.qZA()()()),2&o){const t=s.$implicit,i=e.oxw(2);e.xp6(4),e.Oqu(t.type),e.xp6(2),e.um2(6,i.isadmin?6:-1),e.xp6(2),e.um2(8,"pdf"!=t.path.split(".").pop()?8:-1),e.xp6(1),e.um2(9,"pdf"==t.path.split(".").pop()?9:-1)}}function ge(o,s){1&o&&(e.TgZ(0,"div")(1,"h1",100),e._uU(2,"No File Uploaded"),e.qZA()())}const fe=()=>({width:"100vw"});function xe(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"p-dialog",30),e.NdJ("visibleChange",function(n){e.CHM(t);const a=e.oxw();return e.KtG(a.visible=n)}),e.TgZ(1,"div",31)(2,"div",32),e._UZ(3,"app-previousp2p"),e.TgZ(4,"div",33)(5,"div",34)(6,"div",35)(7,"label",36),e._uU(8),e.qZA(),e.TgZ(9,"label",36),e._uU(10),e.qZA(),e.YNc(11,L,4,3),e.qZA(),e.TgZ(12,"div",35)(13,"label",36),e._uU(14),e.qZA(),e.TgZ(15,"label",36),e._uU(16),e.qZA(),e.TgZ(17,"label",36),e._uU(18),e.qZA()(),e.YNc(19,K,2,1,"div",37),e.qZA()(),e.YNc(20,R,9,1,"div",37),e.TgZ(21,"div",13),e._UZ(22,"div",38),e.TgZ(23,"div",39),e.YNc(24,$,6,0,"button",40)(25,H,5,0),e.qZA()(),e.YNc(26,V,36,10,"form",41),e._UZ(27,"hr"),e.YNc(28,X,6,2,"div",42),e.TgZ(29,"div",13)(30,"div",33)(31,"div",13)(32,"div",43)(33,"div",16),e.YNc(34,ne,18,0,"table",44)(35,se,2,0),e.qZA()(),e.TgZ(36,"div",45),e._UZ(37,"div",46),e.TgZ(38,"div",39),e.YNc(39,ae,6,0,"button",40)(40,re,5,0),e.qZA()(),e.YNc(41,_e,5,2,"div",47),e.qZA()()(),e.TgZ(42,"div",45),e.SjG(43,he,10,4,"div",118,e.x6l,!1,ge,3,0),e.qZA()(),e.TgZ(46,"div",48),e._UZ(47,"app-tenderchat"),e.qZA()()()}if(2&o){const t=e.oxw();e.Akn(e.DdM(19,fe)),e.Q6J("visible",t.visible)("maximizable",!0),e.xp6(8),e.hij("Item Name : ",t.service.p2pdata.itemname,""),e.xp6(2),e.hij("Qty : ",t.service.p2pdata.quantity,""),e.xp6(1),e.um2(11,"Dies"==t.service.p2pdata.type?11:-1),e.xp6(3),e.hij("Category : ",t.service.p2pdata.itemcategory,""),e.xp6(2),e.hij("Class : ",t.service.p2pdata.itemclass,""),e.xp6(2),e.hij("Unit : ",t.service.p2pdata.itemunit,""),e.xp6(1),e.um2(19,"Dies"==t.service.p2pdata.type?19:-1),e.xp6(1),e.um2(20,t.updateremarks?20:-1),e.xp6(4),e.um2(24,t.quotationvisible?25:24),e.xp6(2),e.um2(26,t.quotationvisible?26:-1),e.xp6(2),e.um2(28,t.isapproval||t.isadmin?28:-1),e.xp6(6),e.um2(34,t.service.p2pitemlist.length>0?34:35),e.xp6(5),e.um2(39,t.quotationfilevisible?40:39),e.xp6(2),e.um2(41,t.quotationfilevisible?41:-1),e.xp6(2),e.wJu(t.imageservice.rcuploadedlist)}}let be=(()=>{class o{constructor(t,i,n,a,c){this.service=t,this.toast=i,this.userservice=n,this.imageservice=a,this.tenderservice=c,this.isadmin=!1,this.isapproval=!1,this.searchvalue="",this.currentuser=this.userservice.GetFullName(),this.panelOpenState=!1,this.quotationvisible=!1,this.vendername=!1,this.visible=!1,this.count=0,this.gerbutton=!0,this.quotationfilevisible=!1,this.uploadedFiles=[]}ngOnInit(){("Admin"==this.userservice.GetRole()||"PC"==this.userservice.GetRole())&&(this.isadmin=!0),"surender@desmat.com"==this.userservice.GetUserName()&&(this.isapproval=!0)}UpdateRemarks(){this.updateremarks=!this.updateremarks}SubmitRemarks(){this.service.CreateUpdate().subscribe(t=>{"success"==t.status?(this.updateremarks=!1,this.toast.warning("Remarks Updated Successfully","Success")):this.toast.warning(t.message,"Warning")})}LoadOverdueList(){this.service.GetP2PList(1,1e4,"","","DemandOverdue").subscribe(t=>{this.service.p2plist=t.data},t=>{this.toast.error(t)})}LoadDashboard(){this.service.GetDashboardReport().subscribe(t=>{this.service.dashboarddata=t})}SearchDealer(t){this.service.SearchDealer(t.target.value).pipe((0,x.b)(500),(0,b.x)()).subscribe(n=>{console.log(n),"success"==n.status?this.filtereddata=n.data:this.toast.error(n.message,"Error")})}ApproveItem(t){this.service.p2pitemdata=t,this.service.ApproveQuotation().subscribe(i=>{"approved"==i.status?this.toast.success(i.message,"Approved"):"rejected"==i.status?this.toast.warning(i.message,"Rejected"):"cancelled"==i.status&&this.toast.error(i.message,"Error"),this.enablepobutton()},i=>{this.toast.error(i,"Error")})}movetoquotation(){1==confirm("Are You Sure want to Move Item to Quotation?")&&(this.service.p2pdata.quotationby=null,this.service.p2pdata.quotationdate=null,this.service.p2pdata.approvedby=null,this.service.p2pdata.approvaldate=null,this.service.p2pdata.poby=null,this.service.p2pdata.podate=null,this.service.p2pdata.gerby=null,this.service.p2pdata.gerdate=null,this.service.p2pdata.manby=null,this.service.p2pdata.mandate=null,this.service.p2pdata.mrnby=null,this.service.p2pdata.mrndate=null,this.service.p2pdata.movementby=null,this.service.p2pdata.movementdate=null,this.service.p2pdata.accountby=null,this.service.p2pdata.accountdate=null,this.service.CreateUpdate().subscribe(t=>{"success"==t.status?(this.toast.warning("Item Moved Successfully","Success"),this.service.demandoverduevisible=!1,this.service.quotationoverduevisible=!1,this.service.approvaloverduevisible=!1,this.service.pooverduevisible=!1,this.service.geroverduevisible=!1,this.service.manoverduevisible=!1,this.service.mrnoverduevisible=!1,this.service.accountoverduevisible=!1,this.service.movementoverduevisible=!1,this.LoadDashboard(),this.LoadOverdueList()):this.toast.warning(t.message,"Warning")}))}gettime(){let t=new Date,n=t.getTime()+Math.abs(6e4*t.getTimezoneOffset());return new Date(n).toISOString()}confirmquotation(t,i){this.service.p2pdata=t,"Quotation"==i?(this.service.p2pdata.quotationby=this.userservice.GetFullName(),this.service.p2pdata.quotationdate=this.gettime()):"Approval"==i?(this.service.p2pdata.approvedby=this.userservice.GetFullName(),this.service.p2pdata.approvaldate=this.gettime()):"PO"==i?(this.service.p2pdata.poby=this.userservice.GetFullName(),this.service.p2pdata.podate=this.gettime()):"GER"==i?(this.service.p2pdata.gerby=this.userservice.GetFullName(),this.service.p2pdata.gerdate=this.gettime()):"MAN"==i?(this.service.p2pdata.manby=this.userservice.GetFullName(),this.service.p2pdata.mandate=this.gettime()):"MRN"==i?(this.service.p2pdata.mrnby=this.userservice.GetFullName(),this.service.p2pdata.mrndate=this.gettime()):"Movement"==i?(this.service.p2pdata.movementby=this.userservice.GetFullName(),this.service.p2pdata.movementdate=this.gettime()):"Account"==i&&(this.service.p2pdata.accountby=this.userservice.GetFullName(),this.service.p2pdata.accountdate=this.gettime()),this.service.CreateUpdate().subscribe(n=>{"success"==n.status&&("Quotation"==i?this.toast.success("Quotation Submitted Successfully","Success"):"Approval"==i?this.toast.success("Quotation Approved Successfully","Success"):"PO"==i?this.toast.success("PO Submitted Successfully","Success"):"GER"==i?this.toast.success("GER Submitted Successfully","Success"):"MAN"==i?this.toast.success("MAN Submitted Successfully","Success"):"MRN"==i?this.toast.success("MRN Submitted Successfully","Success"):"Movement"==i?this.toast.success("Movement Submitted Successfully","Success"):"Account"==i&&this.toast.success("Account Submitted Successfully","Success"),this.LoadOverdueList(),this.LoadDashboard(),this.visible=!1)})}backtodemand(){this.service.p2pdata.updatedby=null,this.service.p2pdata.updateddate=null,this.service.CreateUpdate().subscribe(t=>{"success"==t.status&&(this.toast.success("Quotation Shited to Demand Successfully","Success"),this.LoadOverdueList(),this.LoadDashboard(),this.visible=!1)})}OpenQuotation(){this.quotationvisible=!this.quotationvisible}submitquotation(t){this.service.p2pitemdata.quotationcreatedby=this.userservice.GetFullName(),this.service.p2pitemdata.quotationcreateddate=this.gettime(),this.service.p2pitemdata.itemstatus="Pending",null!=this.service.p2pdata&&(this.service.p2puid=this.service.p2pdata.id,this.service.p2pitemdata.uid=this.service.p2pdata.id),this.service.CreateUpdateQuotation().subscribe(i=>{"success"==i.status?(this.toast.success(i.message,"Success"),this.GetItemListbyid(this.service.p2puid),this.service.p2pitemdata=new u.bY,this.LoadDashboard(),this.quotationvisible=!1):this.toast.warning(i.message,"Warning")},i=>{this.toast.error(i,"Error")})}resetquotation(){this.service.p2pitemdata=new u.bY}UpdateQuotation(t){this.service.p2pitemdata=t,this.service.CreateUpdateQuotation().subscribe(i=>{"success"==i.status?(this.toast.success("Quotation Updated Successfully","Success"),this.service.p2pitemdata=new u.bY):this.toast.warning(i.message,"Warning")})}VenderType(){this.vendername=!this.vendername}DeleteItemData(t){1==confirm("Are You Sure want to Delete Item?")&&this.service.DeleteQuotation(t.Id).subscribe(i=>{"success"==i.status?(this.service.p2pitemlist=[],this.toast.warning(i.message,"Success"),this.GetItemListbyid(t.uid)):this.toast.error(i.message,"Error")})}opendetails(t){this.service.detail=!0,this.service.p2pdata=t,null!=this.service.p2pdata.accountdate?this.service.p2pdata.status=10:null!=this.service.p2pdata.movementdate?this.service.p2pdata.status=9:null!=this.service.p2pdata.mrndate?this.service.p2pdata.status=8:null!=this.service.p2pdata.mandate?this.service.p2pdata.status=7:null!=this.service.p2pdata.gerdate?this.service.p2pdata.status=6:null!=this.service.p2pdata.podate?this.service.p2pdata.status=5:null!=this.service.p2pdata.approvaldate||null!=this.service.p2pdata.quotationdate?this.service.p2pdata.status=4:null!=this.service.p2pdata.updateddate?this.service.p2pdata.status=2:null!=this.service.p2pdata.createddate&&(this.service.p2pdata.status=1),this.service.GetP2PItemListbyid(t.id).subscribe(i=>{console.log(i),"success"==i.status&&(this.service.p2pitemlist=i.data)}),this.service.GetP2PApprovedItemListbyid(t.id).subscribe(i=>{console.log(i),"success"==i.status&&(this.service.p2papproveditemlist=i.data)}),this.imageservice.GetDocumentsbyid(t.id).subscribe(i=>{"success"==i.status&&(this.imageservice.rcuploadedlist=i.data),console.log(i)})}expendaccordion(t){this.service.p2pdata=t,this.service.p2pitemlist=[],this.enablepo=!1,this.service.p2pitemdata=new u.bY,this.GetItemListbyid(t.id),this.visible=!0,this.imageservice.id=t.id,this.imageservice.RefreshFile(),this.tenderservice.tenderchatid=t.id,this.tenderservice.Chatbyid(t.id),this.tenderservice.ReadChat(t.id,this.userservice.GetUserName(),this.userservice.GetFullName()),this.tenderservice.tenderchatdata=new u.Y_,this.tenderservice.tenderchatdata.header="Quotation Overdue",this.tenderservice.tenderchatdata.type="P2P"}expendtab(t,i){1==t?(this.service.p2pdata=i,this.service.p2pitemlist=[],this.enablepo=!1,this.service.p2pitemdata=new u.bY,this.GetItemListbyid(i.id)):(this.service.p2pdata=i,this.service.p2pitemlist=[],this.enablepo=!1,this.service.p2pitemdata=new u.bY)}GetItemListbyid(t){this.service.GetP2PItemListbyid(t).subscribe(i=>{"success"==i.status&&(this.service.p2pitemlist=i.data,console.log(i),this.enablepobutton())})}enablepobutton(){this.count=0,this.service.p2pitemlist.forEach(i=>{i.ger&&1==i.status&&this.count++}),this.gerbutton=!(this.count>0)}populatepo(t){this.service.p2pitemdata=t,this.enablepo=!this.enablepo}updateger(t){t.valid?this.service.CreateUpdateQuotation().subscribe(i=>{"success"==i.status?(this.enablepo=!1,this.toast.success(i.message,"Success"),this.GetItemListbyid(this.service.p2puid),this.service.p2pitemdata=new u.bY,this.LoadDashboard(),t.reset(),this.enablepobutton()):this.toast.warning(i.message,"Warning")},i=>{this.toast.error(i,"Error")}):this.toast.warning("Please Update GER Number","Warning")}CancelP2P(t){1==confirm("Are You Sure want to Cancel "+t)&&this.service.CancelP2P(t).subscribe(i=>{"success"==i.status?(this.toast.success(i.message,"Success"),this.LoadOverdueList(),this.LoadDashboard()):this.toast.warning(i.message,"Warning")})}OpenQuotationFile(){this.quotationfilevisible=!this.quotationfilevisible}onUpload(t){for(let i of t.files)this.uploadedFiles.push(i);this.imageservice.RefreshFile(),this.toast.success("File Successfully Uploaded","Success")}DeleteImage(t){1==confirm("Are You Sure want to Delete?")?this.imageservice.DeleteImage(t).subscribe(i=>{(i.status="success")?(this.toast.success(i.result,"Success"),this.imageservice.RefreshFile()):this.toast.error(i.result,"Error"),this.imageservice.RefreshFile()}):this.toast.warning("File Deletion Cancelled","Cancelled")}static#e=this.\u0275fac=function(i){return new(i||o)(e.Y36(C.h),e.Y36(Z._W),e.Y36(T.K),e.Y36(A.D),e.Y36(q.$))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-quotationoverdue"]],standalone:!0,features:[e.jDz],decls:6,vars:2,consts:[[3,"visible","fullScreen","visibleChange"],["pTemplate","header"],["pTemplate","content"],["pTemplate","footer"],[1,"page-title"],[1,"ms-auto","text-muted"],[1,"input-icon"],["type","text","placeholder","Search.....",1,"form-control",3,"ngModel","ngModelChange"],[1,"input-icon-addon"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","stroke-width","2","stroke","currentColor","fill","none","stroke-linecap","round","stroke-linejoin","round",1,"icon"],["stroke","none","d","M0 0h24v24H0z","fill","none"],["d","M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0"],["d","M21 21l-6 -6"],[1,"row","row-cards"],[1,"col-12"],[1,"card"],[1,"table-responsive"],["id","contentToConvert",1,"table","card-table","table-vcenter","datatable","table-sm","table-fixed"],[1,"text-center"],["class","text-center"],[1,"strong","text-center"],[1,"text-nowrap"],[3,"ngClass"],["type","button",1,"btn-link","strong",3,"click"],["type","button",1,"btn","btn-outline-info","btn-pill","strong",3,"click"],["type","button",1,"btn","btn-outline-danger","btn-icon",3,"click"],[1,"fa","fa-trash"],["class","strong text-center"],[1,"card-footer","d-flex","align-items-center"],[1,"m-0","strong"],["header","Quotation Overdue Form",3,"visible","maximizable","visibleChange"],[1,"row","g-0"],[1,"col-12","col-lg-9","col-xl-9","border-end"],[1,"col-sm-12","col-md-12"],[1,"row","text-center"],[1,"col-sm-12","col-md-6"],[1,"form-label"],["class","col-md-12"],[1,"col-md-10","strong","text-center","text-danger"],[1,"col-md-2"],["type","submit","class","btn btn-primary ms-auto"],["autocomplete","off"],["class","card-footer text-end"],[1,"col-md-12"],["class","table card-table table-vcenter datatable table-sm table-fixed cell-border"],[1,"row"],[1,"col-md-10"],["class","col-sm-12 col-md-12"],[1,"col-12","col-lg-3","col-xl-3","d-flex","flex-column"],["class","form-label",4,"ngIf"],["name","quotationremarks","placeholder","Update Remarks here.....","rows","2",1,"form-control",3,"ngModel","ngModelChange"],["quotationremarks","ngModel"],[1,"card-footer","text-end"],[1,"d-flex"],[1,"btn","btn-link",3,"click"],["type","submit",1,"btn","btn-primary","ms-auto",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","stroke-width","2","stroke","currentColor","fill","none","stroke-linecap","round","stroke-linejoin","round",1,"icon","icon-tabler","icon-tabler-plus"],["d","M12 5l0 14"],["d","M5 12l14 0"],["type","submit",1,"btn","btn-danger","ms-auto",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","stroke-width","2","stroke","currentColor","fill","none","stroke-linecap","round","stroke-linejoin","round",1,"icon","icon-tabler","icon-tabler-minus"],["autocomplete","off",3,"ngSubmit"],["quotationform","ngForm"],[1,"col-sm-12","col-md-8"],[1,"form-label","required"],[1,"text-danger"],["type","hidden","name","Id",3,"value"],["class","form-control","required","","placeholder","Search Vender Name here","name","accode",3,"ngClass","ngModel","ngModelChange","keyup",4,"ngIf"],["required","","class","form-control","placeholder","Type Vender Name here","name","name",3,"ngClass","ngModel","ngModelChange",4,"ngIf"],[1,"col-sm-12","col-md-2"],["required","","type","number","name","quantity","placeholder","Quantity",1,"form-control",3,"ngModel","ngClass","ngModelChange"],["quantity","ngModel"],["required","","type","number","name","rate","placeholder","Rate",1,"form-control",3,"ngModel","ngClass","ngModelChange"],["rate","ngModel"],[1,"mb-3"],["rows","2","placeholder","Remarks","name","remarks",1,"form-control",3,"ngClass","ngModel","ngModelChange"],["remarks","ngModel"],["type","submit",1,"btn","btn-primary","ms-auto",3,"disabled"],["required","","placeholder","Search Vender Name here","name","accode",1,"form-control",3,"ngClass","ngModel","ngModelChange","keyup"],["accode","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["required","","placeholder","Type Vender Name here","name","name",1,"form-control",3,"ngClass","ngModel","ngModelChange"],["name","ngModel"],[1,"btn","btn-link"],["type","button","class","btn btn-danger"],["type","button",1,"btn","btn-success","ms-auto",3,"disabled","click"],["type","button",1,"btn","btn-danger",3,"click"],[1,"table","card-table","table-vcenter","datatable","table-sm","table-fixed","cell-border"],[1,"w-1"],[1,"strong"],[4,"ngIf"],["class","text-danger",4,"ngIf"],[1,"text-nowrap","text-center"],["type","number",1,"form-control",3,"ngModel","ngModelChange"],["class","text-nowrap"],["type","button",1,"btn-link","text-info",3,"click"],[1,"fa","fa-edit"],["type","button",1,"btn-link","text-danger",3,"click"],["class","strong"],[1,"text-danger","text-center"],["name","demo[]",3,"url","multiple","onUpload"],["pTemplate","toolbar"],[1,"py-3"],[4,"ngFor","ngForOf"],[1,"col-3"],[1,"card-header"],[1,"card-title"],[1,"card-actions","btn-actions"],["type","button","class","btn-action text-danger"],[1,"card-body","p-0"],["width","250","height","250",3,"src","preview"],["class","text-center","target","_blank",3,"href"],["type","button",1,"btn-action","text-danger",3,"click"],["d","M18 6l-12 12"],["d","M6 6l12 12"],["target","_blank",1,"text-center",3,"href"],["src","https://upload.wikimedia.org/wikipedia/commons/8/87/PDF_file_icon.svg","width","250","height","250"],["class","col-3"]],template:function(i,n){1&i&&(e.YNc(0,I,4,3),e.EqZ(1,0,D),e.YNc(3,xe,48,20),e.EqZ(4,3,M)),2&i&&(e.xp6(1),e.cPc(1==n.service.quotationoverduevisible),e.xp6(3),e.cPc(1==n.visible))},dependencies:[d.ez,l.u5,v.l,m.S,_.A0,h.$,g.O]})}return o})()}}]);