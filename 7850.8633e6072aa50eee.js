"use strict";(self.webpackChunkintranet=self.webpackChunkintranet||[]).push([[7850],{7850:(it,c,l)=>{l.r(c),l.d(c,{DailyattendanceComponent:()=>nt});var d=l(6814),_=l(6223),u=l(8454),h=l(4227),p=l(2681),t=l(9212),g=l(6872),m=l(2425),Z=l(5633),v=l(5219);function C(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"select",8),t.NdJ("ngModelChange",function(i){t.CHM(e);const s=t.oxw();return t.KtG(s.yearlycondition=i)})("change",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.GetAttendance())}),t.TgZ(1,"option",37),t._uU(2,"Monthly"),t.qZA(),t.TgZ(3,"option",38),t._uU(4,"Quarterly"),t.qZA(),t.TgZ(5,"option",39),t._uU(6,"Yearly"),t.qZA()()}if(2&n){const e=t.oxw();t.Q6J("ngModel",e.yearlycondition)}}function y(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",40)(1,"div",41)(2,"div",42)(3,"select",8),t.NdJ("ngModelChange",function(i){t.CHM(e);const s=t.oxw();return t.KtG(s.month=i)})("change",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.GetAttendance())}),t.TgZ(4,"option",43),t._uU(5,"January"),t.qZA(),t.TgZ(6,"option",44),t._uU(7,"February"),t.qZA(),t.TgZ(8,"option",45),t._uU(9,"March"),t.qZA(),t.TgZ(10,"option",46),t._uU(11,"April"),t.qZA(),t.TgZ(12,"option",47),t._uU(13,"May"),t.qZA(),t.TgZ(14,"option",48),t._uU(15,"June"),t.qZA(),t.TgZ(16,"option",49),t._uU(17,"July"),t.qZA(),t.TgZ(18,"option",50),t._uU(19,"August"),t.qZA(),t.TgZ(20,"option",51),t._uU(21,"September"),t.qZA(),t.TgZ(22,"option",52),t._uU(23,"October"),t.qZA(),t.TgZ(24,"option",53),t._uU(25,"November"),t.qZA(),t.TgZ(26,"option",54),t._uU(27,"December"),t.qZA()()(),t.TgZ(28,"div",55)(29,"select",8),t.NdJ("ngModelChange",function(i){t.CHM(e);const s=t.oxw();return t.KtG(s.year=i)})("change",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.GetAttendance())}),t.TgZ(30,"option",56),t._uU(31,"2024"),t.qZA(),t.TgZ(32,"option",57),t._uU(33,"2023"),t.qZA(),t.TgZ(34,"option",58),t._uU(35,"2022"),t.qZA(),t.TgZ(36,"option",59),t._uU(37,"2021"),t.qZA(),t.TgZ(38,"option",60),t._uU(39,"2020"),t.qZA(),t.TgZ(40,"option",61),t._uU(41,"2019"),t.qZA(),t.TgZ(42,"option",62),t._uU(43,"2018"),t.qZA(),t.TgZ(44,"option",63),t._uU(45,"2017"),t.qZA(),t.TgZ(46,"option",64),t._uU(47,"2016"),t.qZA(),t.TgZ(48,"option",65),t._uU(49,"2015"),t.qZA(),t.TgZ(50,"option",66),t._uU(51,"2014"),t.qZA(),t.TgZ(52,"option",67),t._uU(53,"2013"),t.qZA(),t.TgZ(54,"option",68),t._uU(55,"2012"),t.qZA(),t.TgZ(56,"option",69),t._uU(57,"2011"),t.qZA()()()()()}if(2&n){const e=t.oxw();t.xp6(3),t.Q6J("ngModel",e.month),t.xp6(26),t.Q6J("ngModel",e.year)}}function T(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",3)(1,"input",70),t.NdJ("ngModelChange",function(i){t.CHM(e);const s=t.oxw();return t.KtG(s.startdate=i)})("change",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.GetAttendance())}),t.qZA()(),t.TgZ(2,"div",3)(3,"input",71),t.NdJ("ngModelChange",function(i){t.CHM(e);const s=t.oxw();return t.KtG(s.enddate=i)})("change",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.GetAttendance())}),t.ALo(4,"date"),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngModel",e.startdate),t.xp6(2),t.Q6J("ngModel",e.enddate)("max",t.xi3(4,3,e.myDate,"yyyy-MM-dd"))}}function A(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",72)(1,"select",8),t.NdJ("ngModelChange",function(i){t.CHM(e);const s=t.oxw(2);return t.KtG(s.attendancetype=i)})("change",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.FilterAttendance())}),t.TgZ(2,"option",9),t._uU(3,"All"),t.qZA(),t.TgZ(4,"option",79),t._uU(5,"Present"),t.qZA(),t.TgZ(6,"option",80),t._uU(7,"Half Day"),t.qZA(),t.TgZ(8,"option",81),t._uU(9,"Short Leave"),t.qZA(),t.TgZ(10,"option",82),t._uU(11,"Short Hours"),t.qZA(),t.TgZ(12,"option",10),t._uU(13,"Absent"),t.qZA()()()}if(2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngModel",e.attendancetype)}}function x(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",72)(1,"select",8),t.NdJ("ngModelChange",function(i){t.CHM(e);const s=t.oxw();return t.KtG(s.location=i)})("change",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.CheckAuthorized())}),t.TgZ(2,"option",73),t._uU(3,"All"),t.qZA(),t.TgZ(4,"option",74),t._uU(5,"CO"),t.qZA(),t.TgZ(6,"option",75),t._uU(7,"F1"),t.qZA(),t.TgZ(8,"option",76),t._uU(9,"F2"),t.qZA(),t.TgZ(10,"option",77),t._uU(11,"F3"),t.qZA(),t.TgZ(12,"option",78),t._uU(13,"F4"),t.qZA()()(),t.YNc(14,A,14,1,"div",21)}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngModel",e.location),t.xp6(13),t.um2(14,"All"==e.condition?14:-1)}}function f(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",72)(1,"select",8),t.NdJ("ngModelChange",function(i){t.CHM(e);const s=t.oxw();return t.KtG(s.location=i)})("change",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.GetAttendance())}),t.TgZ(2,"option",75),t._uU(3,"F1"),t.qZA(),t.TgZ(4,"option",77),t._uU(5,"F3"),t.qZA(),t.TgZ(6,"option",78),t._uU(7,"F4"),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngModel",e.location)}}function U(n,a){if(1&n&&(t.TgZ(0,"div",83)(1,"div",84),t._uU(2),t.qZA(),t.TgZ(3,"div",84),t._uU(4),t.qZA()(),t.TgZ(5,"div",83)(6,"div",84),t._uU(7),t.qZA(),t.TgZ(8,"div",84),t._uU(9),t.qZA()(),t.TgZ(10,"div",83)(11,"div",84),t._uU(12),t.qZA()()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngClass",e.latecount>0?"text-danger":"text-success"),t.xp6(1),t.hij(" Late : ",e.latecount," "),t.xp6(1),t.Q6J("ngClass",e.shortleave>0?"text-danger":"text-success"),t.xp6(1),t.hij(" Short Leave : ",e.shortleave," "),t.xp6(2),t.Q6J("ngClass",e.present>0?"text-success":"text-danger"),t.xp6(1),t.hij(" Present : ",e.present," "),t.xp6(1),t.Q6J("ngClass",e.absent>0?"text-danger":"text-success"),t.xp6(1),t.lnq(" Leave/Absent + Half Day : ",e.absent," + ",e.halfday/2," = ",e.absent+e.halfday/2," "),t.xp6(2),t.Q6J("ngClass",e.shorthours>0?"text-danger":"text-success"),t.xp6(1),t.hij(" Short Hours : ",e.shorthours," ")}}function q(n,a){1&n&&(t.TgZ(0,"div",85)(1,"ul",86)(2,"li",87)(3,"div",88),t._UZ(4,"p-skeleton",89),t.TgZ(5,"div",90),t._UZ(6,"p-skeleton",91)(7,"p-skeleton",92),t.qZA()()(),t.TgZ(8,"li",87)(9,"div",88),t._UZ(10,"p-skeleton",89),t.TgZ(11,"div",90),t._UZ(12,"p-skeleton",91)(13,"p-skeleton",92),t.qZA()()(),t.TgZ(14,"li",87)(15,"div",88),t._UZ(16,"p-skeleton",89),t.TgZ(17,"div",90),t._UZ(18,"p-skeleton",91)(19,"p-skeleton",92),t.qZA()()(),t.TgZ(20,"li",87)(21,"div",88),t._UZ(22,"p-skeleton",89),t.TgZ(23,"div",90),t._UZ(24,"p-skeleton",91)(25,"p-skeleton",92),t.qZA()()()()())}function D(n,a){1&n&&(t.TgZ(0,"th",95),t._uU(1,"Total Leave/Absent"),t.qZA())}function M(n,a){1&n&&(t.TgZ(0,"th",95),t._uU(1,"Late Count"),t.qZA())}function w(n,a){1&n&&(t.TgZ(0,"th",95),t._uU(1,"Leave Status"),t.qZA())}function b(n,a){if(1&n&&(t.TgZ(0,"th",95),t._uU(1,"Shift Time"),t.qZA(),t.TgZ(2,"th",95),t._uU(3,"Attendance Date"),t.qZA(),t.TgZ(4,"th",95),t._uU(5,"IN-Time/Out-Time"),t.qZA(),t.TgZ(6,"th",95),t._uU(7,"Working Hours"),t.qZA(),t.YNc(8,w,2,0,"th",96),t.TgZ(9,"th",95),t._uU(10,"Status"),t.qZA()),2&n){const e=t.oxw(2);t.xp6(8),t.um2(8,"Absent"==e.condition?8:-1)}}function E(n,a){if(1&n&&(t.TgZ(0,"td")(1,"div",100),t._uU(2),t.qZA()()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngClass",e.lwp>0?"text-danger":"text-success"),t.xp6(1),t.Oqu(e.lwp)}}function k(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"td")(1,"div",100)(2,"button",101),t.NdJ("click",function(i){t.CHM(e);const s=t.oxw().$implicit,r=t.oxw(2);return t.MAs(48).toggle(i),t.KtG(r.LatebyEID(s.eid))}),t._uU(3),t.qZA()()()}if(2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngClass",e.late>3?"text-danger":"text-success"),t.xp6(2),t.Oqu(e.late)}}function L(n,a){if(1&n&&(t.TgZ(0,"div",100),t._uU(1),t.qZA()),2&n){const e=t.oxw(2).$implicit;t.Q6J("ngClass",e.intime1>"09:15"?"text-danger":""),t.xp6(1),t.AsE("",e.intime1," - ",e.outtime1,"")}}function O(n,a){if(1&n&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&n){const e=t.oxw(2).$implicit;t.xp6(1),t.AsE("",e.intime1," - ",e.outtime1,"")}}function N(n,a){if(1&n&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&n){const e=t.oxw(2).$implicit;t.xp6(1),t.AsE("",e.intime2," - ",e.outtime2,"")}}function J(n,a){if(1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"date"),t.qZA()),2&n){const e=t.oxw(2).$implicit;t.xp6(1),t.Oqu(t.Dn7(2,1,1e3*e.workedminute*60,"HH:mm:ss","UTC"))}}function P(n,a){if(1&n&&(t.TgZ(0,"div",100),t._uU(1),t.qZA()),2&n){const e=t.oxw(3).$implicit;t.Q6J("ngClass","Approved"==e.leavestatus?"badge bg-success text-white":"badge bg-danger text-white"),t.xp6(1),t.Oqu(e.leavestatus)}}function G(n,a){1&n&&(t.TgZ(0,"div",103),t._uU(1,"Leave not Applied"),t.qZA())}function F(n,a){if(1&n&&(t.TgZ(0,"td"),t.YNc(1,P,2,2,"div",100)(2,G,2,0),t.qZA()),2&n){const e=t.oxw(2).$implicit;t.xp6(1),t.um2(1,e.leavestatus?1:2)}}function H(n,a){1&n&&(t.TgZ(0,"div",104),t._uU(1,"Present"),t.qZA())}function K(n,a){1&n&&(t.TgZ(0,"div",103),t._uU(1,"Leave/Absent"),t.qZA())}function Y(n,a){1&n&&(t.TgZ(0,"div",104),t._uU(1,"Full Day"),t.qZA())}function Q(n,a){1&n&&(t.TgZ(0,"div",72),t._uU(1,"Short Leave"),t.qZA())}function S(n,a){1&n&&(t.TgZ(0,"div",105),t._uU(1,"Half Day"),t.qZA())}function I(n,a){1&n&&(t.TgZ(0,"div",106),t._uU(1,"Short Hours"),t.qZA())}function $(n,a){if(1&n&&(t.TgZ(0,"td")(1,"div"),t._uU(2),t.qZA()(),t.TgZ(3,"td")(4,"div"),t._uU(5),t.ALo(6,"date"),t.qZA()(),t.TgZ(7,"td"),t.YNc(8,L,2,3,"div",100)(9,O,2,2)(10,N,2,2,"div"),t.qZA(),t.TgZ(11,"td"),t.YNc(12,J,3,5,"div"),t.qZA(),t.YNc(13,F,3,1,"td"),t.TgZ(14,"td"),t.YNc(15,H,2,0,"div",102)(16,K,2,0)(17,Y,2,0)(18,Q,2,0)(19,S,2,0)(20,I,2,0),t.qZA()),2&n){const e=t.oxw().$implicit,o=t.oxw(2);t.xp6(2),t.lnq("",e.fromtime," - ",e.totime," (",e.duty_hours,")"),t.xp6(3),t.Oqu(t.xi3(6,9,e.attendancedate,"EEE, dd-MMM-yyyy")),t.xp6(3),t.um2(8,e.workedminute>0?8:9),t.xp6(2),t.um2(10,e.intime2&&e.outtime2?10:-1),t.xp6(2),t.um2(12,e.workedminute>0?12:-1),t.xp6(1),t.um2(13,"Absent"==o.condition?13:-1),t.xp6(2),t.um2(15,"P"==e.Att1&&0==e.workedminute?15:1==e.absentcount?16:e.workedminute>=60*e.duty_hours?17:e.workedminute<60*e.duty_hours&&e.workedminute>=60*(e.duty_hours-2)?18:e.workedminute<60*(e.duty_hours-2)&&e.workedminute>=30*e.duty_hours?19:e.workedminute<30*e.duty_hours?20:-1)}}function z(n,a){if(1&n&&(t.TgZ(0,"tr",98)(1,"td",99),t._uU(2),t.qZA(),t.TgZ(3,"td")(4,"div"),t._uU(5),t.qZA(),t.TgZ(6,"div"),t._uU(7),t.qZA()(),t.YNc(8,E,3,2,"td")(9,k,4,2)(10,$,21,12),t.qZA()),2&n){const e=a.$implicit,o=a.index,i=t.oxw(2);t.xp6(2),t.Oqu(o+1),t.xp6(3),t.Oqu(e.EmployeeNumber),t.xp6(2),t.AsE("",e.employeename," (",e.locationname,")"),t.xp6(1),t.um2(8,"Leave"==i.condition?8:"Late-Monthly"==i.condition?9:10)}}function W(n,a){if(1&n&&(t.TgZ(0,"table",93)(1,"thead")(2,"tr")(3,"th",94),t._uU(4,"S.No."),t.qZA(),t.TgZ(5,"th",95),t._uU(6,"Name/EMPID"),t.qZA(),t.YNc(7,D,2,0,"th",96)(8,M,2,0)(9,b,11,1),t.qZA()(),t.TgZ(10,"tbody"),t.YNc(11,z,11,5,"tr",97),t.ALo(12,"filter"),t.qZA()()),2&n){const e=t.oxw();t.xp6(7),t.um2(7,"Leave"==e.condition?7:"Late-Monthly"==e.condition?8:9),t.xp6(4),t.Q6J("ngForOf",t.xi3(12,2,e.service.attendancelist,e.searchvalue))}}function B(n,a){if(1&n&&(t.TgZ(0,"div",107)(1,"p",108),t._uU(2,"Showing "),t.TgZ(3,"span"),t._uU(4,"1"),t.qZA(),t._uU(5," to "),t.TgZ(6,"span"),t._uU(7),t.qZA(),t._uU(8," of "),t.TgZ(9,"span"),t._uU(10),t.qZA(),t._uU(11," entries "),t.qZA()()),2&n){const e=t.oxw();t.xp6(7),t.Oqu(e.service.attendancelist.length),t.xp6(3),t.Oqu(e.service.attendancelist.length)}}function R(n,a){1&n&&t._uU(0,"Late List")}function j(n,a){if(1&n&&(t.TgZ(0,"div",100),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.Q6J("ngClass",e.intime1>"09:15"?"text-danger":""),t.xp6(1),t.AsE("",e.intime1," - ",e.outtime1,"")}}function X(n,a){if(1&n&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.AsE("",e.intime1," - ",e.outtime1,"")}}function V(n,a){if(1&n&&(t.TgZ(0,"tr",98)(1,"td",99),t._uU(2),t.qZA(),t.TgZ(3,"td")(4,"div"),t._uU(5),t.qZA()(),t.TgZ(6,"td")(7,"div"),t._uU(8),t.qZA()(),t.TgZ(9,"td")(10,"div"),t._uU(11),t.qZA()(),t.TgZ(12,"td")(13,"div"),t._uU(14),t.ALo(15,"date"),t.qZA()(),t.TgZ(16,"td"),t.YNc(17,j,2,3,"div",100)(18,X,2,2),t.qZA(),t.TgZ(19,"td")(20,"div"),t._uU(21),t.qZA()(),t.TgZ(22,"td")(23,"div",100),t._uU(24),t.qZA()(),t.TgZ(25,"td")(26,"div",100),t._uU(27),t.qZA()()()),2&n){const e=a.$implicit,o=a.$index;t.xp6(2),t.Oqu(o+1),t.xp6(3),t.Oqu(e.EmployeeNumber),t.xp6(3),t.Oqu(e.locationname),t.xp6(3),t.Oqu(e.employeename),t.xp6(3),t.Oqu(t.xi3(15,14,e.attendancedate,"EEE, dd-MMM-yyyy")),t.xp6(3),t.um2(17,e.intime1?17:18),t.xp6(4),t.AsE("",e.intime2," - ",e.outtime2,""),t.xp6(2),t.Q6J("ngClass","A"==e.Att1?"text-danger":""),t.xp6(1),t.AsE("",e.Att1," - ",e.Att2,""),t.xp6(2),t.Q6J("ngClass","A"==e.D_Att1?"text-danger":""),t.xp6(1),t.AsE("",e.D_Att1," - ",e.D_Att2,"")}}function tt(n,a){if(1&n&&(t.TgZ(0,"div",17)(1,"div",109)(2,"div",110)(3,"table",93)(4,"thead")(5,"tr")(6,"th",94),t._uU(7,"S.No."),t.qZA(),t.TgZ(8,"th",95),t._uU(9,"EMPID"),t.qZA(),t.TgZ(10,"th",95),t._uU(11,"Location"),t.qZA(),t.TgZ(12,"th",95),t._uU(13,"Name"),t.qZA(),t.TgZ(14,"th",95),t._uU(15,"Attendance Date"),t.qZA(),t.TgZ(16,"th",95),t._uU(17,"IN-Time/Out-Time"),t.qZA(),t.TgZ(18,"th",95),t._uU(19,"IN-Time/Out-Time"),t.qZA(),t.TgZ(20,"th",95),t._uU(21,"Present-1"),t.qZA(),t.TgZ(22,"th",95),t._uU(23,"Present-2"),t.qZA()()(),t.TgZ(24,"tbody"),t.SjG(25,V,28,17,"tr",111,t.x6l),t.qZA()()()()()),2&n){const e=t.oxw();t.xp6(25),t.wJu(e.service.latelist)}}const et=()=>({width:"80%"});let nt=(()=>{class n{constructor(e,o,i,s){this.service=e,this.toast=o,this.datePipe=i,this.userservice=s,this.p=1,this.total=0,this.frompage=1,this.topage=100,this.myDate=new Date,this.startdate=this.datePipe.transform((new Date).setDate((new Date).getDate()-2),"yyyy-MM-dd"),this.enddate=this.datePipe.transform((new Date).setDate((new Date).getDate()-1),"yyyy-MM-dd"),this.searchvalue="",this.status="Pending",this.loader=!1,this.location="CO",this.condition="Late-Monthly",this.month=this.myDate.getMonth()+1,this.year=this.myDate.getFullYear(),this.yearlycondition="Yearly",this.isauthorized=!1,this.isf3authorized=!1,this.attendancetype="All",this.latecount=0,this.present=0,this.absent=0,this.halfday=0,this.shortleave=0,this.shorthours=0}ngOnInit(){this.CheckAuthorized()}CheckAuthorized(){"ashok@desmat.com"==this.userservice.GetUserName()||"developer@desmat.com"==this.userservice.GetUserName()||"arsh@desmat.com"==this.userservice.GetUserName()||"archit@desmat.com"==this.userservice.GetUserName()?(this.isauthorized=!0,this.GetAttendance()):"hr@desmat.com"==this.userservice.GetUserName()?(this.service.location="CO",this.GetAttendance()):"krishanpal@desmat.com"==this.userservice.GetUserName()?(this.service.location="F2",this.GetAttendance()):"hrd.f3@desmat.com"==this.userservice.GetUserName()?(this.service.location="F3",this.isf3authorized=!0,this.GetAttendance()):this.toast.error("You are not Allowed to Access this facility","Error")}GetAttendance(){if(this.loader=!0,"Leave"==this.condition){if(this.month<10)if("Yearly"==this.yearlycondition)var e=this.year+"01",o=this.year+"12";else"Quarterly"==this.yearlycondition?(e=this.year+"0"+(this.myDate.getMonth()-2),o=this.year+"0"+(this.myDate.getMonth()+1)):(e=this.year+"0"+this.month,o=this.year+"0"+this.month);else"Yearly"==this.yearlycondition?(e=this.year+"01",o=this.year+"12"):"Quarterly"==this.yearlycondition?(e="",o="",e=this.myDate.getMonth()-2<10?this.year+"0"+(this.myDate.getMonth()-2):this.year+""+(this.myDate.getMonth()-2),o=this.myDate.getMonth()+1<10?this.year+"0"+(this.myDate.getMonth()+1):this.year+""+(this.myDate.getMonth()+1)):(e=this.year+""+this.month,o=this.year+""+this.month);this.service.Absent(e.toString(),o.toString(),this.searchvalue,this.location).subscribe(i=>{this.loader=!1,this.service.allattendancelist=i,this.service.attendancelist=i,this.frompage=1,this.topage=i.length,this.total=i.length},i=>{this.toast.error(i,"Error")})}else"Late-Monthly"==this.condition?(this.startdate=this.datePipe.transform(new Date(this.year,this.month-1,1),"yyyy-MM-dd"),this.enddate=this.datePipe.transform(new Date(this.year,this.month,0),"yyyy-MM-dd"),this.service.Late(this.startdate,this.enddate,this.searchvalue,this.location).subscribe(i=>{this.loader=!1,this.service.attendancelist=i,this.frompage=1,this.topage=i.length,this.total=i.length},i=>{this.toast.error(i,"Error")})):this.service.DailyAttendance(this.startdate,this.enddate,this.searchvalue,this.location,this.condition).subscribe(i=>{this.loader=!1,this.service.allattendancelist=i,this.service.attendancelist=i,this.frompage=1,this.topage=i.length,this.total=i.length,this.CalculateLate(),this.FilterAttendance()},i=>{this.toast.error(i,"Error")})}FilterAttendance(){this.service.attendancelist=this.service.allattendancelist,"Present"==this.attendancetype?this.service.attendancelist=this.service.attendancelist.filter(e=>"P"===e.Att1&&0==e.workedminute||e.workedminute>=60*e.duty_hours):"Short Leave"==this.attendancetype?this.service.attendancelist=this.service.attendancelist.filter(e=>e.workedminute>0&&e.workedminute<60*e.duty_hours&&e.workedminute>=60*(e.duty_hours-2)):"Half Day"==this.attendancetype?this.service.attendancelist=this.service.attendancelist.filter(e=>e.workedminute<60*(e.duty_hours-2)&&e.workedminute>=30*e.duty_hours):"Short Hours"==this.attendancetype?this.service.attendancelist=this.service.attendancelist.filter(e=>e.workedminute>0&&e.workedminute<30*e.duty_hours):"Absent"==this.attendancetype&&(this.service.attendancelist=this.service.attendancelist.filter(e=>"A"===e.Att1&&1===e.absentcount))}LatebyEID(e){this.service.LatebyEID(this.startdate,this.enddate,e).subscribe(o=>{console.log(o),this.service.latelist=o})}CalculateLate(){this.latecount=0,this.present=0,this.absent=0,this.halfday=0,this.shortleave=0,this.shorthours=0,this.service.attendancelist.forEach(o=>{o.intime1>"09:15"&&o.intime1<"10:00"&&this.latecount++,"P"==o.Att1&&0==o.workedminute||o.workedminute>=60*o.duty_hours?this.present++:"A"==o.Att1&&1==o.absentcount?this.absent++:o.workedminute<60*o.duty_hours&&o.workedminute>=60*(o.duty_hours-2)?this.shortleave++:o.workedminute<60*(o.duty_hours-2)&&o.workedminute>=30*o.duty_hours?this.halfday++:o.workedminute>0&&o.workedminute<30*o.duty_hours&&this.shorthours++})}GetMonth(e){var o=e.substring(0,4),i=e.substring(6,4),s=new Date(o,i,0);return this.datePipe.transform(s,"MMMM-yyyy")}static#t=this.\u0275fac=function(o){return new(o||n)(t.Y36(g.g),t.Y36(m._W),t.Y36(d.uU),t.Y36(Z.K))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-dailyattendance"]],standalone:!0,features:[t.jDz],decls:51,vars:13,consts:[[1,"page-header","d-print-none"],[1,"container-xl"],[1,"row","g-2","align-items-center"],[1,"col-md-2"],[1,"page-pretitle"],[1,"page-title"],["class","form-select",3,"ngModel"],["class","col-md-4"],[1,"form-select",3,"ngModel","ngModelChange","change"],["value","All"],["value","Absent"],["value","Late"],["value","Late-Monthly"],["value","Leave"],[1,"col-auto","ms-auto","d-print-none"],[1,"btn-list"],[1,"page-body"],[1,"col-12"],[1,"card"],[1,"card-body","border-bottom","py-3"],[1,"d-flex"],["class","text-muted"],[1,"ms-auto","text-muted"],[1,"input-icon"],["type","text","placeholder","Search.....",1,"form-control",3,"ngModel","ngModelChange","keydown.enter"],[1,"input-icon-addon"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","stroke-width","2","stroke","currentColor","fill","none","stroke-linecap","round","stroke-linejoin","round",1,"icon"],["stroke","none","d","M0 0h24v24H0z","fill","none"],["d","M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0"],["d","M21 21l-6 -6"],[1,"table-responsive",2,"height","27rem"],["class","border-round border-1 surface-border p-4 surface-card"],["class","card-footer d-flex align-items-center"],[3,"showCloseIcon"],["op",""],["pTemplate","header"],["pTemplate","content"],["value","Monthly"],["value","Quarterly"],["value","Yearly"],[1,"col-md-4"],[1,"row","g-2"],[1,"col-5"],["value","1"],["value","2"],["value","3"],["value","4"],["value","5"],["value","6"],["value","7"],["value","8"],["value","9"],["value","10"],["value","11"],["value","12"],[1,"col-7"],["value","2024"],["value","2023"],["value","2022"],["value","2021"],["value","2020"],["value","2019"],["value","2018"],["value","2017"],["value","2016"],["value","2015"],["value","2014"],["value","2013"],["value","2012"],["value","2011"],["type","date",1,"form-control",3,"ngModel","ngModelChange","change"],["type","date",1,"form-control",3,"ngModel","max","ngModelChange","change"],[1,"text-muted"],["value",""],["value","CO"],["value","F1"],["value","F2"],["value","F3"],["value","F4"],["value","Present"],["value","Half Day"],["value","Short Leave"],["value","Short Hours"],[1,"ms-auto"],[1,"strong",3,"ngClass"],[1,"border-round","border-1","surface-border","p-4","surface-card"],[1,"m-0","p-0","list-none"],[1,"mb-3"],[1,"flex"],["shape","circle","size","4rem","styleClass","mr-2"],[2,"flex","1"],["width","100%","styleClass","mb-2"],["width","75%"],[1,"table","card-table","table-vcenter","datatable","table-sm","table-fixed"],[1,"w-1","text-center"],[1,"text-center"],["class","text-center"],["class","strong text-center",4,"ngFor","ngForOf"],[1,"strong","text-center"],[1,"text-nowrap"],[3,"ngClass"],["type","button",1,"btn-link","strong",3,"click"],["class","text-success"],[1,"text-danger"],[1,"text-success"],[1,"text-warning"],[1,"text-orange"],[1,"card-footer","d-flex","align-items-center"],[1,"m-0","text-muted"],[1,"card",2,"height","27rem"],[1,"card-body","card-body-scrollable","card-body-scrollable-shadow"],["class","strong text-center"]],template:function(o,i){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),t._uU(5," Overview "),t.qZA(),t.TgZ(6,"h2",5),t._uU(7," Daily Attendance "),t.qZA()(),t.TgZ(8,"div",3),t.YNc(9,C,7,1,"select",6),t.qZA(),t.YNc(10,y,58,2,"div",7)(11,T,5,6),t.TgZ(12,"div",3)(13,"select",8),t.NdJ("ngModelChange",function(r){return i.condition=r})("change",function(){return i.GetAttendance()}),t.TgZ(14,"option",9),t._uU(15,"All"),t.qZA(),t.TgZ(16,"option",10),t._uU(17,"Absent"),t.qZA(),t.TgZ(18,"option",11),t._uU(19,"Late Commers"),t.qZA(),t.TgZ(20,"option",12),t._uU(21,"Late-Monthly"),t.qZA(),t.TgZ(22,"option",13),t._uU(23,"Leave/Absent"),t.qZA()()(),t.TgZ(24,"div",14),t._UZ(25,"div",15),t.qZA()()()(),t.TgZ(26,"div",16)(27,"div",1)(28,"div",17)(29,"div",18)(30,"div",19)(31,"div",20),t.YNc(32,x,15,2)(33,f,8,1,"div",21)(34,U,13,12),t.TgZ(35,"div",22)(36,"div",23)(37,"input",24),t.NdJ("ngModelChange",function(r){return i.searchvalue=r})("keydown.enter",function(){return i.CheckAuthorized()}),t.qZA(),t.TgZ(38,"span",25),t.O4$(),t.TgZ(39,"svg",26),t._UZ(40,"path",27)(41,"path",28)(42,"path",29),t.qZA()()()()()(),t.kcU(),t.TgZ(43,"div",30),t.YNc(44,q,26,0,"div",31)(45,W,13,5),t.qZA(),t.YNc(46,B,12,2,"div",32),t.qZA()()()(),t.TgZ(47,"p-overlayPanel",33,34),t.YNc(49,R,1,0,"ng-template",35)(50,tt,27,0,"ng-template",36),t.qZA()),2&o&&(t.xp6(9),t.um2(9,"Leave"==i.condition?9:-1),t.xp6(1),t.um2(10,"Late-Monthly"==i.condition||"Leave"==i.condition?10:11),t.xp6(3),t.Q6J("ngModel",i.condition),t.xp6(19),t.um2(32,i.isauthorized?32:-1),t.xp6(1),t.um2(33,i.isf3authorized?33:-1),t.xp6(1),t.um2(34,"All"==i.condition?34:-1),t.xp6(3),t.Q6J("ngModel",i.searchvalue),t.xp6(7),t.um2(44,i.loader?44:45),t.xp6(2),t.um2(46,i.service.attendancelist?46:-1),t.xp6(1),t.Akn(t.DdM(12,et)),t.Q6J("showCloseIcon",!0))},dependencies:[d.ez,d.mk,d.sg,d.uU,_.u5,_.YN,_.Kr,_.Fj,_.EJ,_.JJ,_.On,p.FilterPipe,u.y,u.T,v.jx,h.m,h.O]})}return n})()}}]);