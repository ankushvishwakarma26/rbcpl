"use strict";(self.webpackChunkintranet=self.webpackChunkintranet||[]).push([[5815],{5815:(Y,p,n)=>{n.r(p),n.d(p,{ClaimsoverdueComponent:()=>K});var l=n(6814),c=n(6223),h=n(6521),_=n(7248),u=n(9246),m=n(951),v=n(1312),e=n(9212),g=n(377),f=n(2425),x=n(5633),C=n(7473),b=n(1148),Z=n(5219);const T=()=>[l.mk,l.H9,l.uU,c.Fj,c.JJ,c.On,u.Y,Z.jx,Promise.resolve().then(n.bind(n,2681)).then(s=>s.FilterPipe)],D=()=>[l.mk,l.sg,l.O5,l.H9,c._Y,c.Fj,c.JJ,c.JL,c.On,c.F,_.E,n.e(9176).then(n.bind(n,9176)).then(s=>s.TenderchatComponent),v.V];function A(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"h2",4),e._uU(1,"Claims Overdue List"),e.qZA(),e.TgZ(2,"div",5)(3,"div",6)(4,"input",7),e.NdJ("ngModelChange",function(a){e.CHM(t);const o=e.oxw(2);return e.KtG(o.searchvalue=a)}),e.qZA(),e.TgZ(5,"span",8),e.O4$(),e.TgZ(6,"svg",9),e._UZ(7,"path",10)(8,"path",11)(9,"path",12),e.qZA()()()()}if(2&s){const t=e.oxw(2);e.xp6(4),e.Q6J("ngModel",t.searchvalue)}}function U(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"tr",19)(1,"td",20),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.TgZ(5,"span",21),e._uU(6),e.qZA()(),e.TgZ(7,"td")(8,"div")(9,"button",22),e.NdJ("click",function(){const o=e.CHM(t).$implicit,d=e.oxw(3);return e.KtG(d.opendetails(o.uid))}),e._uU(10),e.qZA()(),e.TgZ(11,"div",23),e._uU(12),e.qZA()(),e.TgZ(13,"td")(14,"div"),e._uU(15),e.ALo(16,"currency"),e.qZA()(),e.TgZ(17,"td")(18,"div"),e._uU(19),e.qZA(),e.TgZ(20,"div"),e._uU(21),e.ALo(22,"date"),e.qZA()(),e.TgZ(23,"td")(24,"button",24),e.NdJ("click",function(){const o=e.CHM(t).$implicit,d=e.oxw(3);return e.KtG(d.expendaccordion(o))}),e._uU(25,"Action"),e.qZA()()()}if(2&s){const t=r.$implicit,i=r.$index;e.xp6(2),e.Oqu(i+1),e.xp6(2),e.hij("",t.uid," "),e.xp6(1),e.Q6J("ngClass","F2"==t.buyeraddress?"text-purple":"F3"==t.buyeraddress?"text-yellow":"F4"==t.buyeraddress?"text-orange":""),e.xp6(1),e.hij("(",t.buyeraddress,")"),e.xp6(4),e.Oqu(t.name),e.xp6(2),e.Oqu(t.itemname),e.xp6(3),e.AsE("",t.quantity,"(",e.xi3(16,10,t.rate,"INR"),")"),e.xp6(4),e.Oqu(t.rejectedby),e.xp6(2),e.Oqu(e.xi3(22,13,t.rejecteddate,"dd-MMM-yyyy hh:mm a"))}}function M(s,r){if(1&s&&(e.TgZ(0,"div",13)(1,"div",14)(2,"div",15)(3,"div",16)(4,"table",17)(5,"thead")(6,"tr")(7,"th",18),e._uU(8,"S.No."),e.qZA(),e.TgZ(9,"th",18),e._uU(10,"UID"),e.qZA(),e.TgZ(11,"th",18),e._uU(12,"Vender Name/Item Name"),e.qZA(),e.TgZ(13,"th",18),e._uU(14,"Rate/Qty"),e.qZA(),e.TgZ(15,"th",18),e._uU(16,"Last Update"),e.qZA(),e.TgZ(17,"th",18),e._uU(18,"Action"),e.qZA()()(),e.TgZ(19,"tbody"),e.SjG(20,U,26,16,"tr",25,e.x6l),e.ALo(22,"filter"),e.qZA()()()()()()),2&s){const t=e.oxw(2);e.xp6(20),e.wJu(e.xi3(22,0,t.service.p2plistoverduelist,t.searchvalue))}}function E(s,r){if(1&s&&(e.TgZ(0,"div",26)(1,"p",27),e._uU(2,"Showing "),e.TgZ(3,"span"),e._uU(4,"1"),e.qZA(),e._uU(5," to "),e.TgZ(6,"span"),e._uU(7),e.qZA(),e._uU(8," of "),e.TgZ(9,"span"),e._uU(10),e.qZA(),e._uU(11," entries"),e.qZA()()),2&s){const t=e.oxw(3);e.xp6(7),e.Oqu(t.service.p2plistoverduelist.length),e.xp6(3),e.Oqu(t.service.p2plistoverduelist.length)}}function O(s,r){1&s&&e.YNc(0,E,12,2,"ng-template",3)}function F(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"p-sidebar",0),e.NdJ("visibleChange",function(a){e.CHM(t);const o=e.oxw();return e.KtG(o.service.claimsvisible=a)}),e.YNc(1,A,10,1,"ng-template",1)(2,M,23,3,"ng-template",2)(3,O,1,0,null,3),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("visible",t.service.claimsvisible)("fullScreen",!0),e.xp6(3),e.um2(3,t.service.p2plistoverduelist?3:-1)}}function P(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"button",24),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.movetoback(a.service.p2pitemdata.Id,"Rejected"))}),e._uU(1,"Back to Approval"),e.qZA()}}function y(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"button",59),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,o=e.oxw(3);return e.KtG(o.DeleteImage(a.id))}),e.O4$(),e.TgZ(1,"svg",9),e._UZ(2,"path",10)(3,"path",60)(4,"path",61),e.qZA()()}}function w(s,r){if(1&s&&e._UZ(0,"p-image",62),2&s){const t=e.oxw().$implicit,i=e.oxw(3);e.Q6J("src",i.imageservice.imageurl+t.path)("preview",!0)}}function I(s,r){if(1&s&&(e.TgZ(0,"a",63),e._UZ(1,"img",64),e.qZA()),2&s){const t=e.oxw().$implicit,i=e.oxw(3);e.Q6J("href",i.imageservice.imageurl+t.path,e.LSH)}}function q(s,r){if(1&s&&(e.TgZ(0,"div",51)(1,"div",15)(2,"div",52)(3,"h3",53),e._uU(4),e.qZA(),e.TgZ(5,"div",54),e.YNc(6,y,5,0,"button",55),e.qZA()(),e.TgZ(7,"div",56),e.YNc(8,w,1,2,"p-image",57)(9,I,2,1,"a",58),e.qZA()()()),2&s){const t=r.$implicit,i=e.oxw(3);e.xp6(4),e.Oqu(t.type),e.xp6(2),e.Q6J("ngIf",i.isadmin),e.xp6(2),e.Q6J("ngIf","pdf"!=t.path.split(".").pop()),e.xp6(1),e.Q6J("ngIf","pdf"==t.path.split(".").pop())}}function L(s,r){if(1&s&&e.YNc(0,q,10,4,"div",50),2&s){const t=e.oxw(2);e.Q6J("ngForOf",t.imageservice.rcuploadedlist)}}function N(s,r){1&s&&(e.TgZ(0,"h1",65),e._uU(1,"No File Uploaded"),e.qZA())}function J(s,r){1&s&&(e.TgZ(0,"h1",65),e._uU(1,"No File Uploaded"),e.qZA())}const R=()=>({width:"100vw"});function S(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"p-dialog",28),e.NdJ("visibleChange",function(a){e.CHM(t);const o=e.oxw();return e.KtG(o.visible=a)}),e.TgZ(1,"div",29)(2,"div",30)(3,"div",13)(4,"div",31)(5,"label",32),e._uU(6),e.qZA(),e.TgZ(7,"label",32),e._uU(8),e.qZA()(),e.TgZ(9,"div",31)(10,"label",32),e._uU(11),e.qZA(),e.TgZ(12,"label",32),e._uU(13),e.ALo(14,"currency"),e.qZA()()(),e.TgZ(15,"div",14)(16,"form",33,34),e.NdJ("ngSubmit",function(){e.CHM(t);const a=e.MAs(17),o=e.oxw();return e.KtG(a.form.valid&&o.updatemrn(a))}),e.TgZ(18,"div",13),e._UZ(19,"input",35)(20,"input",36),e.TgZ(21,"div",37)(22,"div",38)(23,"div",39)(24,"div",40)(25,"label",41),e._uU(26,"Remarks"),e.qZA(),e.TgZ(27,"textarea",42,43),e.NdJ("ngModelChange",function(a){e.CHM(t);const o=e.oxw();return e.KtG(o.service.p2pitemdata.claimsreason=a)}),e.qZA()()()()(),e.TgZ(29,"div",44)(30,"div",45),e.YNc(31,P,2,0,"button",46),e.TgZ(32,"button",47),e._uU(33,"Submit"),e.qZA()()()()()(),e._UZ(34,"br"),e.TgZ(35,"div",39),e.SjG(36,L,1,1,"div",66,e.x6l,!1,N,2,0),e.YNc(39,J,2,0,"h1",48),e.qZA()(),e.TgZ(40,"div",49),e._UZ(41,"app-tenderchat"),e.qZA()()()}if(2&s){const t=e.MAs(17),i=e.MAs(28),a=e.oxw();e.Akn(e.DdM(19,R)),e.Q6J("visible",a.visible)("maximizable",!0),e.xp6(6),e.hij("Vender : ",a.service.p2pitemdata.name,""),e.xp6(2),e.hij("Quantity : ",a.service.p2pitemdata.quantity,""),e.xp6(3),e.hij("Item Name : ",a.service.p2pitemdata.itemname,""),e.xp6(2),e.hij("Rate : ",e.xi3(14,16,a.service.p2pitemdata.rate,"INR"),""),e.xp6(6),e.Q6J("value",a.service.p2pitemdata.Id),e.xp6(1),e.Q6J("value",a.service.p2pitemdata.uid),e.xp6(7),e.Q6J("ngClass",i.invalid?"is-invalid":"is-valid mb-2")("ngModel",a.service.p2pitemdata.claimsreason),e.xp6(4),e.um2(31,a.isadmin?31:-1),e.xp6(1),e.Q6J("disabled",t.invalid),e.xp6(4),e.wJu(a.imageservice.rcuploadedlist),e.xp6(3),e.um2(39,null==a.imageservice.rcuploadedlist?39:-1)}}let K=(()=>{class s{constructor(t,i,a,o,d){this.service=t,this.toast=i,this.userservice=a,this.imageservice=o,this.tenderservice=d,this.isadmin=!1,this.searchvalue="",this.panelOpenState=!1,this.visible=!1,this.uploadedFiles=[],this.uploadedFiles1=[]}ngOnInit(){"Admin"==this.userservice.GetRole()&&(this.isadmin=!0)}opendetails(t){this.service.GetP2Pbyid(t).subscribe(i=>{this.service.p2pdata=i.data}),this.service.detail=!0,null!=this.service.p2pdata.accountdate?this.service.p2pdata.status=10:null!=this.service.p2pdata.movementdate?this.service.p2pdata.status=9:null!=this.service.p2pdata.mrndate?this.service.p2pdata.status=8:null!=this.service.p2pdata.mandate?this.service.p2pdata.status=7:null!=this.service.p2pdata.gerdate?this.service.p2pdata.status=6:null!=this.service.p2pdata.podate?this.service.p2pdata.status=5:null!=this.service.p2pdata.approvaldate||null!=this.service.p2pdata.quotationdate?this.service.p2pdata.status=4:null!=this.service.p2pdata.updateddate?this.service.p2pdata.status=2:null!=this.service.p2pdata.createddate&&(this.service.p2pdata.status=1),this.service.GetP2PItemListbyid(t).subscribe(i=>{console.log(i),"success"==i.status&&(this.service.p2pitemlist=i.data)}),this.service.GetP2PApprovedItemListbyid(t).subscribe(i=>{console.log(i),"success"==i.status&&(this.service.p2papproveditemlist=i.data)}),this.imageservice.GetDocumentsbyid(t).subscribe(i=>{"success"==i.status&&(this.imageservice.rcuploadedlist=i.data),console.log(i)})}LoadOverdueList(){this.service.P2PItemList("Claims").subscribe(t=>{console.log(t),"success"==t.status&&(this.service.p2plistoverduelist=t.data)},t=>{this.toast.error(t)})}LoadDashboard(){this.service.GetDashboardReport().subscribe(t=>{this.service.dashboarddata=t})}gettime(){let t=new Date,a=t.getTime()+Math.abs(6e4*t.getTimezoneOffset());return new Date(a).toISOString()}expendaccordion(t){this.visible=!0,this.service.p2pitemdata=new m.bY,this.service.p2pitemdata=t,this.imageservice.id=t.uid,this.imageservice.RefreshFile(),this.tenderservice.tenderchatid=t.uid,this.tenderservice.Chatbyid(t.uid),this.tenderservice.ReadChat(t.uid,this.userservice.GetUserName(),this.userservice.GetFullName()),this.tenderservice.tenderchatdata=new m.Y_,this.tenderservice.tenderchatdata.header="Claims Overdue",this.tenderservice.tenderchatdata.type="P2P"}onUpload(t){for(let i of t.files)this.uploadedFiles.push(i);this.service.p2pitemdata.proofofdelivery="Yes",this.imageservice.id=this.service.p2pitemdata.uid,this.service.CreateUpdateQuotation().subscribe(i=>{"success"==i.status?(this.toast.success("Debit Note Copy Uploaded Successfully","Success"),this.imageservice.RefreshFile()):this.toast.warning(i.message,"Warning")},i=>{this.toast.error(i,"Error")})}onUpload1(t){for(let i of t.files)this.uploadedFiles1.push(i);this.service.p2pitemdata.purchasereturn="Yes",this.imageservice.id=this.service.p2pitemdata.uid,this.service.CreateUpdateQuotation().subscribe(i=>{"success"==i.status?(this.toast.success("Return Proof Uploaded Successfully","Success"),this.imageservice.RefreshFile()):this.toast.warning(i.message,"Warning")},i=>{this.toast.error(i,"Error")})}DeleteImage(t){1==confirm("Are You Sure want to Delete?")?this.imageservice.DeleteImage(t).subscribe(i=>{console.log(i),(i.status="success")?this.toast.success(i.result,"Success"):this.toast.error(i.result,"Error"),this.imageservice.RefreshFile()}):this.toast.warning("File Deletion Cancelled","Cancelled")}updatemrn(t){t.valid?(this.service.p2pitemdata.itemstatus="Closure",this.service.p2pitemdata.claimsdate=this.gettime(),this.service.p2pitemdata.claimsby=this.userservice.GetFullName(),this.service.CreateUpdateQuotation().subscribe(i=>{"success"==i.status?(this.toast.success(i.message,"Success"),this.service.p2plistoverduelist=null,this.LoadDashboard(),this.LoadOverdueList()):this.toast.warning(i.message,"Warning")},i=>{this.toast.error(i,"Error")})):this.toast.warning("Please Update GER Number","Warning")}movetoback(t,i){1==confirm("Are You Sure want to Move Item to "+i+"?")&&this.service.BacktoItemOverdue(t,i).subscribe(a=>{"success"==a.status?(this.toast.success(a.message,"Success"),this.LoadDashboard(),this.LoadOverdueList()):this.toast.error(a.message,"Error")})}static#e=this.\u0275fac=function(i){return new(i||s)(e.Y36(g.h),e.Y36(f._W),e.Y36(x.K),e.Y36(C.D),e.Y36(b.$))};static#t=this.\u0275cmp=e.Xpm({type:s,selectors:[["app-claimsoverdue"]],standalone:!0,features:[e.jDz],decls:6,vars:2,consts:[[3,"visible","fullScreen","visibleChange"],["pTemplate","header"],["pTemplate","content"],["pTemplate","footer"],[1,"page-title"],[1,"ms-auto","text-muted"],[1,"input-icon"],["type","text","placeholder","Search.....",1,"form-control",3,"ngModel","ngModelChange"],[1,"input-icon-addon"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","stroke-width","2","stroke","currentColor","fill","none","stroke-linecap","round","stroke-linejoin","round",1,"icon"],["stroke","none","d","M0 0h24v24H0z","fill","none"],["d","M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0"],["d","M21 21l-6 -6"],[1,"row","row-cards"],[1,"col-12"],[1,"card"],[1,"table-responsive"],["id","contentToConvert",1,"table","card-table","table-vcenter","datatable","table-sm","table-fixed"],[1,"text-center"],[1,"strong","text-center"],[1,"text-nowrap"],[3,"ngClass"],["type","button",1,"btn-link","strong",3,"click"],[1,"text-danger"],["type","button",1,"btn","btn-outline-info","btn-pill","strong",3,"click"],["class","strong text-center"],[1,"card-footer","d-flex","align-items-center"],[1,"m-0","strong"],["header","Claims Form",3,"visible","maximizable","visibleChange"],[1,"row","g-0"],[1,"col-12","col-lg-9","col-xl-9","border-end"],[1,"col-md-6","strong","text-center"],[1,"form-label"],["autocomplete","off",3,"ngSubmit"],["mygerForm","ngForm"],["type","hidden","name","Id",3,"value"],["type","hidden","name","uid",3,"value"],[1,"col-sm-12","col-md-12"],[1,"mb-3"],[1,"row"],[1,"col-md-12"],[1,"form-label","required"],["rows","5","name","claimsreason",1,"form-control",3,"ngClass","ngModel","ngModelChange"],["claimsreason","ngModel"],[1,"card-footer","text-end"],[1,"d-flex"],["type","button","class","btn btn-outline-info btn-pill strong"],["type","submit",1,"btn","btn-primary","ms-auto",3,"disabled"],["class","text-danger text-center"],[1,"col-12","col-lg-3","col-xl-3","d-flex","flex-column"],["class","col-2",4,"ngFor","ngForOf"],[1,"col-2"],[1,"card-header"],[1,"card-title"],[1,"card-actions","btn-actions"],["type","button","class","btn-action text-danger",3,"click",4,"ngIf"],[1,"card-body","p-0"],["width","250","height","250",3,"src","preview",4,"ngIf"],["class","text-center","target","_blank",3,"href",4,"ngIf"],["type","button",1,"btn-action","text-danger",3,"click"],["d","M18 6l-12 12"],["d","M6 6l12 12"],["width","250","height","250",3,"src","preview"],["target","_blank",1,"text-center",3,"href"],["src","https://upload.wikimedia.org/wikipedia/commons/8/87/PDF_file_icon.svg","width","250","height","250"],[1,"text-danger","text-center"],["class","col-2"]],template:function(i,a){1&i&&(e.YNc(0,F,4,3),e.EqZ(1,0,T),e.YNc(3,S,42,20),e.EqZ(4,3,D)),2&i&&(e.xp6(1),e.cPc(1==a.service.claimsvisible),e.xp6(3),e.cPc(1==a.visible))},dependencies:[l.ez,c.u5,u.l,_.$,h.O,v.S]})}return s})()}}]);