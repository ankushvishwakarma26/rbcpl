"use strict";(self.webpackChunkintranet=self.webpackChunkintranet||[]).push([[4002],{4002:(_e,u,r)=>{r.r(u),r.d(u,{PooverdueComponent:()=>le});var c=r(6814),d=r(6223),m=r(9246),v=r(3620),h=r(3997),l=r(951),g=r(1312),f=r(7248),p=r(4807),e=r(9212),x=r(377),b=r(2425),C=r(5633),Z=r(7473),T=r(1148),A=r(5219);const P=()=>[c.mk,c.sg,c.O5,c.H9,c.uU,d.Fj,d.JJ,d.On,m.Y,A.jx,Promise.resolve().then(r.bind(r,2681)).then(o=>o.FilterPipe)],M=()=>[c.mk,c.sg,c.O5,c.H9,c.uU,d._Y,d.Fj,d.JJ,d.JL,d.Q7,d.On,d.F,p.w9,p.jq,f.E,r.e(9176).then(r.bind(r,9176)).then(o=>o.TenderchatComponent),g.V];function D(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"h2",4),e._uU(1,"PO Overdue List"),e.qZA(),e.TgZ(2,"div",5)(3,"div",6)(4,"input",7),e.NdJ("ngModelChange",function(s){e.CHM(t);const n=e.oxw(2);return e.KtG(n.searchvalue=s)}),e.qZA(),e.TgZ(5,"span",8),e.O4$(),e.TgZ(6,"svg",9),e._UZ(7,"path",10)(8,"path",11)(9,"path",12),e.qZA()()()()}if(2&o){const t=e.oxw(2);e.xp6(4),e.Q6J("ngModel",t.searchvalue)}}function U(o,a){if(1&o&&(e._uU(0),e.TgZ(1,"span",25),e._uU(2),e.qZA(),e.TgZ(3,"span",25),e._uU(4),e.qZA()),2&o){const t=e.oxw().$implicit;e.hij(" ",t.uid," "),e.xp6(1),e.Q6J("ngClass","P2P"==t.type?"text-muted":"text-danger"),e.xp6(1),e.hij("(",t.type,")"),e.xp6(1),e.Q6J("ngClass","F2"==t.buyeraddress?"text-purple":"F3"==t.buyeraddress?"text-yellow":"F4"==t.buyeraddress?"text-orange":""),e.xp6(1),e.hij("(",t.buyeraddress,")")}}function q(o,a){if(1&o&&(e._uU(0),e.TgZ(1,"span",25),e._uU(2),e.qZA()),2&o){const t=e.oxw().$implicit;e.hij(" ",t.diesticket," "),e.xp6(1),e.Q6J("ngClass","P2P"==t.type?"text-muted":"text-danger"),e.xp6(1),e.hij("(",t.type,")")}}function O(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"button",26),e.NdJ("click",function(){e.CHM(t);const s=e.oxw().$implicit,n=e.oxw(3);return e.KtG(n.opendetails(s.uid))}),e._uU(2),e.qZA()()}if(2&o){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.name)}}function y(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"button",26),e.NdJ("click",function(){e.CHM(t);const s=e.oxw().$implicit,n=e.oxw(3);return e.KtG(n.opendetails(s.uid))}),e._uU(2),e.qZA()()}if(2&o){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.vendername)}}function w(o,a){if(1&o&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"currency"),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.AsE("",t.quantity,"(",e.xi3(2,2,t.rate,"INR"),")")}}function E(o,a){if(1&o&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"currency"),e.qZA(),e.TgZ(3,"div"),e._uU(4),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.AsE("",t.quantity,"(",e.xi3(2,4,t.rate,"INR"),")"),e.xp6(3),e.AsE("",t.size," (",t.repeat,")")}}function N(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"tr",20)(1,"td",21),e._uU(2),e.qZA(),e.TgZ(3,"td"),e.YNc(4,U,5,5)(5,q,3,3),e.qZA(),e.TgZ(6,"td"),e.YNc(7,O,3,1,"div",22)(8,y,3,1,"div",22),e.TgZ(9,"div",23),e._uU(10),e.qZA()(),e.TgZ(11,"td"),e.YNc(12,w,3,5,"div")(13,E,5,7),e.qZA(),e.TgZ(14,"td")(15,"div"),e._uU(16),e.qZA(),e.TgZ(17,"div"),e._uU(18),e.ALo(19,"date"),e.qZA()(),e.TgZ(20,"td")(21,"button",24),e.NdJ("click",function(){const n=e.CHM(t).$implicit,_=e.oxw(3);return e.KtG(_.expendaccordion(n))}),e._uU(22,"Action"),e.qZA()()()}if(2&o){const t=a.$implicit,i=a.index;e.xp6(2),e.Oqu(i+1),e.xp6(2),e.um2(4,"P2P"==t.type?4:5),e.xp6(3),e.Q6J("ngIf",t.accode),e.xp6(1),e.Q6J("ngIf",!t.accode),e.xp6(2),e.Oqu(t.itemname),e.xp6(2),e.um2(12,"P2P"==t.type?12:13),e.xp6(4),e.Oqu(t.approvedby),e.xp6(2),e.Oqu(e.xi3(19,8,t.approvaldate,"dd-MMM-yyyy hh:mm a"))}}function S(o,a){if(1&o&&(e.TgZ(0,"div",13)(1,"div",14)(2,"div",15)(3,"div",16)(4,"table",17)(5,"thead")(6,"tr")(7,"th",18),e._uU(8,"S.No."),e.qZA(),e.TgZ(9,"th",18),e._uU(10,"UID"),e.qZA(),e.TgZ(11,"th",18),e._uU(12,"Vender Name/Item Name"),e.qZA(),e.TgZ(13,"th",18),e._uU(14,"Rate/Qty"),e.qZA(),e.TgZ(15,"th",18),e._uU(16,"Last Update"),e.qZA(),e.TgZ(17,"th",18),e._uU(18,"Action"),e.qZA()()(),e.TgZ(19,"tbody"),e.YNc(20,N,23,11,"tr",19),e.ALo(21,"filter"),e.qZA()()()()()()),2&o){const t=e.oxw(2);e.xp6(20),e.Q6J("ngForOf",e.xi3(21,1,t.service.p2plistoverduelist,t.searchvalue))}}function J(o,a){if(1&o&&(e.TgZ(0,"div",27)(1,"p",28),e._uU(2,"Showing "),e.TgZ(3,"span"),e._uU(4,"1"),e.qZA(),e._uU(5," to "),e.TgZ(6,"span"),e._uU(7),e.qZA(),e._uU(8," of "),e.TgZ(9,"span"),e._uU(10),e.qZA(),e._uU(11," entries"),e.qZA()()),2&o){const t=e.oxw(2);e.xp6(7),e.Oqu(t.service.p2plistoverduelist.length),e.xp6(3),e.Oqu(t.service.p2plistoverduelist.length)}}function I(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"p-sidebar",0),e.NdJ("visibleChange",function(s){e.CHM(t);const n=e.oxw();return e.KtG(n.service.pooverduevisible=s)}),e.YNc(1,D,10,1,"ng-template",1)(2,S,22,4,"ng-template",2)(3,J,12,2,"ng-template",3),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("visible",t.service.pooverduevisible)("fullScreen",!0)}}function F(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"button",62),e.NdJ("click",function(){e.CHM(t);const s=e.oxw(2);return e.KtG(s.OpenQuotation(s.service.p2pitemdata))}),e._uU(1,"Change Vendor"),e.qZA()}}function k(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"button",62),e.NdJ("click",function(){e.CHM(t);const s=e.oxw(2);return e.KtG(s.changeitem(s.service.p2pitemdata.uid))}),e._uU(1,"Change Item"),e.qZA()}}function G(o,a){if(1&o&&(e.TgZ(0,"ng-option",66),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.Q6J("value",t.item_code),e.xp6(1),e.Oqu(t.itemname)}}function Q(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",14)(1,"div",13)(2,"div",63)(3,"label",33),e._uU(4,"Change Item"),e.qZA(),e._UZ(5,"input",64),e.TgZ(6,"ng-select",65),e.NdJ("ngModelChange",function(s){e.CHM(t);const n=e.oxw(2);return e.KtG(n.itemcode=s)})("keyup",function(s){e.CHM(t);const n=e.oxw(2);return e.KtG(n.SearchItem(s))}),e.TgZ(7,"ng-option",66),e._uU(8,"NO Item"),e.qZA(),e.YNc(9,G,2,2,"ng-option",67),e.qZA()(),e.TgZ(10,"div",58)(11,"div",59)(12,"button",68),e.NdJ("click",function(){e.CHM(t);const s=e.oxw(2);return e.KtG(s.ChangeItem())}),e._uU(13,"Submit"),e.qZA()()()()()}if(2&o){const t=e.oxw(2);e.xp6(5),e.Q6J("value",t.id),e.xp6(1),e.Q6J("ngModel",t.itemcode),e.xp6(1),e.Q6J("value",0),e.xp6(2),e.Q6J("ngForOf",t.filtereditemdata),e.xp6(3),e.Q6J("disabled",!t.itemcode)}}function L(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"button",71),e.NdJ("click",function(){e.CHM(t);const s=e.oxw(3);return e.KtG(s.OpenQuotation(s.service.p2pitemdata))}),e._uU(1,"Click here"),e.qZA()}}function R(o,a){if(1&o&&(e.TgZ(0,"h2",69),e._uU(1),e.YNc(2,L,2,0,"button",70),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.hij("Vender(",t.service.p2pitemdata.vendername,") is not Linked to ERP so Please Contact to Administrator to Connect For PO"),e.xp6(1),e.Q6J("ngIf",t.isadmin)}}function K(o,a){if(1&o&&(e.TgZ(0,"ng-option",66),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.Q6J("value",t.code),e.xp6(1),e.Oqu(t.name)}}function j(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",14)(1,"form",46,72),e.NdJ("ngSubmit",function(){e.CHM(t);const s=e.MAs(2),n=e.oxw(2);return e.KtG(s.form.valid&&n.submitquotation(s))}),e.TgZ(3,"div",13)(4,"div",63)(5,"label",52),e._uU(6,"Vender Name "),e.TgZ(7,"span",23),e._uU(8,"(Not have Vender in ERP?) "),e.TgZ(9,"button",26),e.NdJ("click",function(){e.CHM(t);const s=e.oxw(2);return e.KtG(s.VenderType())}),e._uU(10,"Click here"),e.qZA()()(),e._UZ(11,"input",48),e.TgZ(12,"ng-select",73,74),e.NdJ("ngModelChange",function(s){e.CHM(t);const n=e.oxw(2);return e.KtG(n.service.p2pitemdata.accode=s)})("keyup",function(s){e.CHM(t);const n=e.oxw(2);return e.KtG(n.SearchDealer(s))}),e.YNc(14,K,2,2,"ng-option",67),e.qZA()(),e.TgZ(15,"div",58)(16,"div",59)(17,"button",60),e._uU(18,"Submit"),e.qZA()()()()()()}if(2&o){const t=e.MAs(2),i=e.MAs(13),s=e.oxw(2);e.xp6(11),e.Q6J("value",s.service.p2pitemdata.Id),e.xp6(1),e.Q6J("ngClass",i.invalid?"is-invalid":"is-valid mb-2")("ngModel",s.service.p2pitemdata.accode),e.xp6(2),e.Q6J("ngForOf",s.filtereddata),e.xp6(3),e.Q6J("disabled",t.invalid)}}function Y(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",75)(1,"button",24),e.NdJ("click",function(){e.CHM(t);const s=e.oxw(2);return e.KtG(s.movetoback(s.service.p2pitemdata.uid,"Demand"))}),e._uU(2,"Back to Demand"),e.qZA()(),e.TgZ(3,"div",75)(4,"button",24),e.NdJ("click",function(){e.CHM(t);const s=e.oxw(2);return e.KtG(s.movetoback(s.service.p2pitemdata.uid,"Quotation"))}),e._uU(5,"Back to Quotation"),e.qZA()(),e.TgZ(6,"div",75)(7,"button",24),e.NdJ("click",function(){e.CHM(t);const s=e.oxw(2);return e.KtG(s.movetoback(s.service.p2pitemdata.uid,"Approval"))}),e._uU(8,"Back to Approval"),e.qZA()()}}function H(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",75)(1,"button",76),e.NdJ("click",function(){e.CHM(t);const s=e.oxw(2);return e.KtG(s.Cancel("Cancel"))}),e._uU(2,"Cancel"),e.qZA()()}}function W(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",77)(1,"label",52),e._uU(2,"Cancel Reason"),e.qZA(),e.TgZ(3,"textarea",80,81),e.NdJ("ngModelChange",function(s){e.CHM(t);const n=e.oxw(3);return e.KtG(n.service.p2pitemdata.cancelledreason=s)}),e._uU(5,"                      "),e.qZA()()}if(2&o){const t=e.MAs(4),i=e.oxw(3);e.xp6(3),e.Q6J("ngClass",t.invalid?"is-invalid":"is-valid mb-2")("ngModel",i.service.p2pitemdata.cancelledreason)}}function $(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",77)(1,"label",52),e._uU(2,"Reject Reason"),e.qZA(),e.TgZ(3,"textarea",82,83),e.NdJ("ngModelChange",function(s){e.CHM(t);const n=e.oxw(3);return e.KtG(n.service.p2pitemdata.rejectedreason=s)}),e._uU(5,"                      "),e.qZA()()}if(2&o){const t=e.MAs(4),i=e.oxw(3);e.xp6(3),e.Q6J("ngClass",t.invalid?"is-invalid":"is-valid mb-2")("ngModel",i.service.p2pitemdata.rejectedreason)}}function B(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",77)(1,"form",46,78),e.NdJ("ngSubmit",function(){e.CHM(t);const s=e.MAs(2),n=e.oxw(2);return e.KtG(s.form.valid&&n.CancelOrReject(s))}),e.TgZ(3,"div",34),e.YNc(4,W,6,2,"div",79)(5,$,6,2,"div",79),e.TgZ(6,"div",58)(7,"div",59)(8,"button",60),e._uU(9),e.qZA()()()()()()}if(2&o){const t=e.MAs(2),i=e.oxw(2);e.xp6(4),e.Q6J("ngIf","Cancel"==i.canceltype),e.xp6(1),e.Q6J("ngIf","Reject"==i.canceltype),e.xp6(3),e.Q6J("disabled",t.invalid),e.xp6(1),e.Oqu(i.canceltype)}}function V(o,a){1&o&&(e.TgZ(0,"p",86),e._uU(1,"Congratulation PO Found From ERP. Please Verify that PO No is Correct?"),e.qZA())}function z(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"button",26),e.NdJ("click",function(){e.CHM(t);const s=e.oxw().$implicit,n=e.oxw(4);return e.KtG(n.UpdatePO(s))}),e._UZ(1,"i",93),e.qZA()}}function X(o,a){1&o&&(e.TgZ(0,"div",23),e._uU(1,"Not Match"),e.qZA())}function ee(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"tr",89)(1,"td",88),e._uU(2),e.qZA(),e.TgZ(3,"td",18)(4,"div")(5,"button",26),e.NdJ("click",function(){const n=e.CHM(t).$implicit,_=e.oxw(4);return e.KtG(_.service.PrintPObypono(n.order_no))}),e._uU(6),e.qZA()()(),e.TgZ(7,"td",90)(8,"div"),e._uU(9),e.ALo(10,"date"),e.qZA()(),e.TgZ(11,"td",18)(12,"div"),e._uU(13),e.qZA()(),e.TgZ(14,"td",18)(15,"div"),e._uU(16),e.qZA()(),e.TgZ(17,"td",90)(18,"div"),e._uU(19),e.qZA()(),e.TgZ(20,"td",90)(21,"div"),e._uU(22),e.ALo(23,"currency"),e.qZA()(),e.TgZ(24,"td",90)(25,"div"),e._uU(26),e.ALo(27,"currency"),e.qZA()(),e.TgZ(28,"td",18),e.YNc(29,z,2,0,"button",91)(30,X,2,0,"div",92),e.qZA()()}if(2&o){const t=a.$implicit,i=a.$index,s=e.oxw(4);e.xp6(2),e.hij(" ",i+1," "),e.xp6(4),e.AsE("",t.pono,"(",t.loc,")"),e.xp6(3),e.Oqu(e.xi3(10,11,t.ord_date,"dd-MMM-yyyy")),e.xp6(4),e.Oqu(t.vendername),e.xp6(3),e.Oqu(t.itemname),e.xp6(3),e.Oqu(t.item_qty),e.xp6(3),e.Oqu(e.xi3(23,14,t.item_rate,"INR")),e.xp6(4),e.Oqu(e.xi3(27,17,t.item_amt,"INR")),e.xp6(3),e.um2(29,t.itemcode==s.service.p2pitemdata.itemcode&&t.accode==s.service.p2pitemdata.accode?29:-1),e.xp6(1),e.um2(30,t.itemcode!=s.service.p2pitemdata.itemcode&&t.accode!=s.service.p2pitemdata.accode?30:-1)}}function te(o,a){if(1&o&&(e.TgZ(0,"table",87)(1,"thead")(2,"tr")(3,"th",88),e._uU(4,"S.No."),e.qZA(),e.TgZ(5,"th",18),e._uU(6,"PO No"),e.qZA(),e.TgZ(7,"th",18),e._uU(8,"Date"),e.qZA(),e.TgZ(9,"th",18),e._uU(10,"Vender"),e.qZA(),e.TgZ(11,"th",18),e._uU(12,"Item"),e.qZA(),e.TgZ(13,"th",18),e._uU(14,"Qty"),e.qZA(),e.TgZ(15,"th",18),e._uU(16,"Rate"),e.qZA(),e.TgZ(17,"th",18),e._uU(18,"Amount"),e.qZA(),e.TgZ(19,"th",18),e._uU(20,"Action"),e.qZA()()(),e.TgZ(21,"tbody"),e.SjG(22,ee,31,20,"tr",94,e.x6l),e.qZA()()),2&o){const t=e.oxw(3);e.xp6(22),e.wJu(t.podetails)}}function ie(o,a){if(1&o&&(e.TgZ(0,"div",77),e.YNc(1,V,2,0,"p",84),e.TgZ(2,"div",16),e.YNc(3,te,24,0,"table",85),e.qZA()()),2&o){const t=e.oxw(2);e.xp6(1),e.um2(1,t.podetails.length>0?1:-1),e.xp6(2),e.um2(3,t.podetails.length>0?3:-1)}}function oe(o,a){if(1&o&&(e.TgZ(0,"div",77)(1,"h3",95),e._uU(2),e.qZA()()),2&o){const t=e.oxw(2);e.xp6(2),e.Oqu(t.errormessage)}}function se(o,a){if(1&o&&e._UZ(0,"p-image",101),2&o){const t=e.oxw().$implicit,i=e.oxw(2);e.Q6J("src",i.imageservice.imageurl+t.path)("preview",!0)}}function ne(o,a){if(1&o&&(e.TgZ(0,"a",102),e._UZ(1,"img",103),e.qZA()),2&o){const t=e.oxw().$implicit,i=e.oxw(2);e.Q6J("href",i.imageservice.imageurl+t.path,e.LSH)}}function ae(o,a){if(1&o&&(e.TgZ(0,"div",36)(1,"div",15)(2,"div",96)(3,"h3",97),e._uU(4),e.qZA()(),e.TgZ(5,"div",98),e.YNc(6,se,1,2,"p-image",99)(7,ne,2,1,"a",100),e.qZA()()()),2&o){const t=a.$implicit;e.xp6(4),e.Oqu(t.type),e.xp6(2),e.Q6J("ngIf","pdf"!=t.path.split(".").pop()),e.xp6(1),e.Q6J("ngIf","pdf"==t.path.split(".").pop())}}function re(o,a){1&o&&(e.TgZ(0,"h1",69),e._uU(1,"No File Uploaded"),e.qZA())}const ce=()=>({width:"100vw"});function de(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"p-dialog",29),e.NdJ("visibleChange",function(s){e.CHM(t);const n=e.oxw();return e.KtG(n.visible=s)}),e.TgZ(1,"div",30)(2,"div",31)(3,"div",13)(4,"div",32)(5,"label",33),e._uU(6),e.qZA(),e.TgZ(7,"label",33),e._uU(8),e.qZA()(),e.TgZ(9,"div",32)(10,"label",33),e._uU(11),e.qZA(),e.TgZ(12,"label",33),e._uU(13),e.ALo(14,"currency"),e.qZA()()(),e.TgZ(15,"div",34),e._UZ(16,"div",35),e.TgZ(17,"div",36),e.YNc(18,F,2,0,"button",37),e.qZA(),e.TgZ(19,"div",36),e.YNc(20,k,2,0,"button",38),e.qZA(),e.YNc(21,Q,14,5,"div",39)(22,R,3,2,"h2",40)(23,j,19,5,"div",39),e.qZA(),e.TgZ(24,"div",13)(25,"div",41),e._uU(26),e.qZA(),e.TgZ(27,"div",41),e._uU(28),e.ALo(29,"currency"),e.qZA(),e.TgZ(30,"div",42)(31,"input",43),e.NdJ("keydown.enter",function(s){e.CHM(t);const n=e.oxw();return e.KtG(n.SearchPO(s,n.service.p2pitemdata.itemcode))}),e.qZA()(),e.YNc(32,Y,9,0)(33,H,3,0,"div",44)(34,B,10,4,"div",45)(35,ie,4,2,"div",45)(36,oe,3,1,"div",45),e.TgZ(37,"div",14)(38,"form",46,47),e.NdJ("ngSubmit",function(){e.CHM(t);const s=e.MAs(39),n=e.oxw();return e.KtG(s.form.valid&&n.updateitemdetail(s))}),e.TgZ(40,"div",13),e._UZ(41,"input",48)(42,"input",49),e.TgZ(43,"div",50)(44,"div",51)(45,"label",52),e._uU(46,"PO No."),e.qZA(),e.TgZ(47,"input",53,54),e.NdJ("ngModelChange",function(s){e.CHM(t);const n=e.oxw();return e.KtG(n.service.p2pitemdata.pono=s)}),e.qZA()()(),e.TgZ(49,"div",55)(50,"div",51)(51,"label",52),e._uU(52,"Remarks"),e.qZA(),e.TgZ(53,"textarea",56,57),e.NdJ("ngModelChange",function(s){e.CHM(t);const n=e.oxw();return e.KtG(n.service.p2pitemdata.poremarks=s)}),e._uU(55,"              "),e.qZA()(),e.TgZ(56,"div",58)(57,"div",59)(58,"button",60),e._uU(59,"Submit"),e.qZA()()()()()()()(),e.TgZ(60,"div",34),e.SjG(61,ae,8,3,"div",104,e.x6l,!1,re,2,0),e.qZA()(),e.TgZ(64,"div",61),e._UZ(65,"app-tenderchat"),e.qZA()()()}if(2&o){const t=e.MAs(39),i=e.MAs(48),s=e.MAs(54),n=e.oxw();e.Akn(e.DdM(35,ce)),e.Q6J("visible",n.visible)("maximizable",!0),e.xp6(6),e.hij("Vender : ",n.service.p2pitemdata.accode?n.service.p2pitemdata.name:n.service.p2pitemdata.vendername,""),e.xp6(2),e.hij("Quantity : ",n.service.p2pitemdata.quantity,""),e.xp6(3),e.hij("Item Name : ",n.service.p2pitemdata.itemname,""),e.xp6(2),e.hij("Rate : ",e.xi3(14,29,n.service.p2pitemdata.rate,"INR"),""),e.xp6(5),e.um2(18,n.isadmin&&n.service.p2pitemdata.accode?18:-1),e.xp6(2),e.Q6J("ngIf",n.isadmin),e.xp6(1),e.um2(21,n.itemvisible?21:-1),e.xp6(1),e.um2(22,n.service.p2pitemdata.accode?-1:22),e.xp6(1),e.um2(23,n.quotationvisible?23:-1),e.xp6(3),e.hij("Quantity : ",n.service.p2pitemdata.quantity,""),e.xp6(2),e.hij("Rate : ",e.xi3(29,32,n.service.p2pitemdata.rate,"INR"),""),e.xp6(4),e.um2(32,n.isadmin?32:-1),e.xp6(1),e.um2(33,n.iscancel?33:-1),e.xp6(1),e.um2(34,n.cancelledorrejectvisible?34:-1),e.xp6(1),e.um2(35,n.podetails?35:-1),e.xp6(1),e.um2(36,n.errormessage?36:-1),e.xp6(5),e.Q6J("value",n.service.p2pitemdata.Id),e.xp6(1),e.Q6J("value",n.service.p2pitemdata.uid),e.xp6(5),e.Q6J("ngClass",i.invalid?"is-invalid":"is-valid mb-2")("ngModel",n.service.p2pitemdata.pono)("readOnly",!n.isadmin),e.xp6(6),e.Q6J("ngClass",s.invalid?"is-invalid":"is-valid mb-2")("ngModel",n.service.p2pitemdata.poremarks),e.xp6(5),e.Q6J("disabled",t.invalid),e.xp6(3),e.wJu(n.imageservice.rcuploadedlist)}}let le=(()=>{class o{constructor(t,i,s,n,_){this.service=t,this.toast=i,this.userservice=s,this.imageservice=n,this.tenderservice=_,this.isadmin=!1,this.iscancel=!1,this.searchvalue="",this.panelOpenState=!1,this.itemvisible=!1,this.quotationvisible=!1,this.vendername=!1,this.cancelledorrejectvisible=!1,this.visible=!1,this.pocount=0,this.pobutton=!0,this.enablecustompo=!1}ngOnInit(){this.enablepobutton(),"Admin"==this.userservice.GetRole()&&(this.isadmin=!0,this.iscancel=!0),"pc2@desmat.com"==this.userservice.GetUserName()&&(this.isadmin=!0)}LoadOverdueList(){this.service.P2PItemList("POOverdue").subscribe(t=>{console.log(t),"success"==t.status?this.service.p2plistoverduelist=t.data:this.toast.warning(t.message,"Warning")},t=>{this.toast.error(t)})}LoadDashboard(){this.service.GetDashboardReport().subscribe(t=>{this.service.dashboarddata=t})}ApproveItem(t){this.service.p2pitemdata=t,this.service.ApproveQuotation().subscribe(i=>{"approved"==i.status?this.toast.success(i.message,"Approved"):"rejected"==i.status?this.toast.warning(i.message,"Rejected"):"cancelled"==i.status&&this.toast.error(i.message,"Error"),this.enablepobutton()},i=>{this.toast.error(i,"Error")})}movetoback(t,i){1==confirm("Are You Sure want to Move Item to "+i+"?")&&this.service.BacktoOverdue(t,i).subscribe(s=>{"success"==s.status?(this.toast.success(s.message,"Success"),this.LoadDashboard(),this.LoadOverdueList(),this.visible=!1):this.toast.error(s.message,"Error")})}SearchItem(t){this.service.SearchItem(t.target.value).pipe((0,v.b)(500),(0,h.x)()).subscribe(s=>{"success"==s.status?(console.log(s),this.filtereditemdata=s.data):this.toast.error(s.message,"Error")})}changeitem(t){this.itemvisible=!this.itemvisible,this.id=t,this.itemcode=0}ChangeItem(){this.service.ChangeItem(this.id,this.itemcode).subscribe(t=>{"success"==t.status?(this.toast.success(t.message,"Success"),this.itemvisible=!1,this.LoadOverdueList()):this.toast.warning(t.message,"Warning")})}submitquotation(t){this.service.CreateUpdateQuotation().subscribe(i=>{"success"==i.status?(this.quotationvisible=!1,this.toast.success(i.message,"Success"),this.GetItemListbyid(this.service.p2puid),this.service.p2pitemdata=new l.bY,this.LoadDashboard()):this.toast.warning(i.message,"Warning")},i=>{this.toast.error(i,"Error")})}SearchDealer(t){this.service.SearchDealer(t.target.value).pipe((0,v.b)(500),(0,h.x)()).subscribe(s=>{console.log(s),"success"==s.status?this.filtereddata=s.data:this.toast.error(s.message,"Error")})}OpenQuotation(t){console.log(t),this.quotationvisible=!this.quotationvisible,this.service.p2pitemdata=t}UpdateQuotation(t){this.service.p2pitemdata=t,this.service.CreateUpdateQuotation().subscribe(i=>{"success"==i.status?(this.toast.success("Quotation Updated Successfully","Success"),this.service.p2pitemdata=new l.bY):this.toast.warning(i.message,"Warning")})}VenderType(){this.vendername=!this.vendername}DeleteItemData(t){1==confirm("Are You Sure want to Delete Item?")&&this.service.DeleteQuotation(t.Id).subscribe(i=>{"success"==i.status?(this.service.p2pitemlist=[],this.toast.warning(i.message,"Success"),this.GetItemListbyid(t.uid)):this.toast.error(i.message,"Error")})}gettime(){let t=new Date,s=t.getTime()+Math.abs(6e4*t.getTimezoneOffset());return new Date(s).toISOString()}confirmquotation(t,i){console.log(t,i),this.service.p2pdata=t,"Quotation"==i?(this.service.p2pdata.quotationby=this.userservice.GetFullName(),this.service.p2pdata.quotationdate=this.gettime()):"Approval"==i?(this.service.p2pdata.approvedby=this.userservice.GetFullName(),this.service.p2pdata.approvaldate=this.gettime()):"PO"==i?(this.service.p2pdata.poby=this.userservice.GetFullName(),this.service.p2pdata.podate=this.gettime()):"GER"==i?(this.service.p2pdata.gerby=this.userservice.GetFullName(),this.service.p2pdata.gerdate=this.gettime()):"MAN"==i?(this.service.p2pdata.manby=this.userservice.GetFullName(),this.service.p2pdata.mandate=this.gettime()):"MRN"==i?(this.service.p2pdata.mrnby=this.userservice.GetFullName(),this.service.p2pdata.mrndate=this.gettime()):"Movement"==i?(this.service.p2pdata.movementby=this.userservice.GetFullName(),this.service.p2pdata.movementdate=this.gettime()):"Account"==i&&(this.service.p2pdata.accountby=this.userservice.GetFullName(),this.service.p2pdata.accountdate=this.gettime()),this.service.CreateUpdate().subscribe(s=>{"success"==s.status&&("Quotation"==i?(this.service.quotationoverduevisible=!1,this.toast.success("Quotation Submitted Successfully","Success")):"Approval"==i?(this.service.approvaloverduevisible=!1,this.toast.success("Quotation Approved Successfully","Success")):"PO"==i?(this.service.pooverduevisible=!1,this.toast.success("PO Submitted Successfully","Success")):"GER"==i?(this.service.geroverduevisible=!1,this.toast.success("GER Submitted Successfully","Success")):"MAN"==i?(this.service.manoverduevisible=!1,this.toast.success("MAN Submitted Successfully","Success")):"MRN"==i?(this.service.mrnoverduevisible=!1,this.toast.success("MRN Submitted Successfully","Success")):"Movement"==i?(this.service.movementoverduevisible=!1,this.toast.success("Movement Submitted Successfully","Success")):"Account"==i&&(this.service.accountoverduevisible=!1,this.toast.success("Account Submitted Successfully","Success")),this.LoadOverdueList(),this.LoadDashboard())})}Cancel(t){this.cancelledorrejectvisible=!this.cancelledorrejectvisible,this.canceltype=t}CancelOrReject(t){this.service.p2pitemdata.itemstatus="Cancelled",this.service.CreateUpdateQuotation().subscribe(i=>{"success"==i.status?(this.toast.success(i.message,"Success"),this.LoadDashboard(),this.LoadOverdueList(),this.visible=!1):this.toast.warning(i.message,"Warning")},i=>{this.toast.error(i,"Error")})}expendaccordion(t){this.quotationvisible=!1,this.imageservice.id=t.uid,this.imageservice.RefreshFile(),this.errormessage="",this.podetails=null,this.service.p2pitemdata=new l.bY,this.service.p2pitemdata=t,this.visible=!0,this.tenderservice.tenderchatid=t.uid,this.tenderservice.Chatbyid(t.uid),this.tenderservice.ReadChat(t.uid,this.userservice.GetUserName(),this.userservice.GetFullName()),this.tenderservice.tenderchatdata=new l.Y_,this.tenderservice.tenderchatdata.header="PO Overdue",this.tenderservice.tenderchatdata.type="P2P",this.service.GetPONo(t.accode,t.itemcode).subscribe(i=>{console.log(i),"success"==i.status?(this.errormessage="",this.podetails=i.data):this.errormessage=i.message})}updateitemdetail(t){t.valid?(this.service.p2pitemdata.podate=this.gettime(),this.service.p2pitemdata.poby=this.userservice.GetFullName(),this.service.CreateUpdateQuotation().subscribe(i=>{"success"==i.status?(this.enablepo=!1,this.toast.success(i.message,"Success"),this.service.p2plistoverduelist=null,this.visible=!1,this.LoadDashboard(),this.LoadOverdueList()):this.toast.warning(i.message,"Warning")},i=>{this.toast.error(i,"Error")})):this.toast.warning("Please Update GER Number","Warning")}expendtab(t,i){1==t?(this.service.p2pdata=i,this.service.p2pitemlist=[],this.enablepo=!1,this.service.p2pitemdata=new l.bY,this.GetItemListbyid(i.id)):(this.service.p2pdata=i,this.service.p2pitemlist=[],this.enablepo=!1,this.service.p2pitemdata=new l.bY)}GetItemListbyid(t){this.service.GetP2PItemListbyid(t).subscribe(i=>{"success"==i.status&&(this.service.p2pitemlist=i.data,this.enablepobutton())})}enablepobutton(){this.pocount=0,this.service.p2pitemlist.forEach(i=>{i.pono&&1==i.status&&this.pocount++}),this.pobutton=!(this.pocount>0)}populatepo(t){this.enablecustompo=!1,this.podetails=null,this.service.p2pitemdata=t,this.service.GetPONo(t.accode,this.service.p2pdata.itemcode).subscribe(i=>{"success"==i.status?(this.errormessage="",this.podetails=i.data):(this.errormessage=i.message,this.toast.warning(i.message,"Warning"))})}SearchPO(t,i){this.podetails=null;var s=t.target.value;console.log(s,i),this.service.SearchPO(s).subscribe(n=>{"success"==n.status?(this.errormessage="",this.podetails=n.data):(this.errormessage=n.message,this.toast.warning(n.message,"Warning"))})}opendetails(t){this.service.GetP2Pbyid(t).subscribe(i=>{this.service.p2pdata=i.data}),this.service.detail=!0,null!=this.service.p2pdata.accountdate?this.service.p2pdata.status=10:null!=this.service.p2pdata.movementdate?this.service.p2pdata.status=9:null!=this.service.p2pdata.mrndate?this.service.p2pdata.status=8:null!=this.service.p2pdata.mandate?this.service.p2pdata.status=7:null!=this.service.p2pdata.gerdate?this.service.p2pdata.status=6:null!=this.service.p2pdata.podate?this.service.p2pdata.status=5:null!=this.service.p2pdata.approvaldate||null!=this.service.p2pdata.quotationdate?this.service.p2pdata.status=4:null!=this.service.p2pdata.updateddate?this.service.p2pdata.status=2:null!=this.service.p2pdata.createddate&&(this.service.p2pdata.status=1),this.service.GetP2PItemListbyid(t).subscribe(i=>{console.log(i),"success"==i.status&&(this.service.p2pitemlist=i.data)}),this.service.GetP2PApprovedItemListbyid(t).subscribe(i=>{console.log(i),"success"==i.status&&(this.service.p2papproveditemlist=i.data)}),this.imageservice.GetDocumentsbyid(t).subscribe(i=>{"success"==i.status&&(this.imageservice.rcuploadedlist=i.data),console.log(i)})}UpdatePO(t){this.service.p2pitemdata.pono=t.order_no,this.service.p2pitemdata.podate=t.ord_date,this.service.p2pitemdata.eta=t.eta}static#e=this.\u0275fac=function(i){return new(i||o)(e.Y36(x.h),e.Y36(b._W),e.Y36(C.K),e.Y36(Z.D),e.Y36(T.$))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-pooverdue"]],standalone:!0,features:[e.jDz],decls:6,vars:2,consts:[[3,"visible","fullScreen","visibleChange"],["pTemplate","header"],["pTemplate","content"],["pTemplate","footer"],[1,"page-title"],[1,"ms-auto","text-muted"],[1,"input-icon"],["type","text","placeholder","Search.....",1,"form-control",3,"ngModel","ngModelChange"],[1,"input-icon-addon"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","stroke-width","2","stroke","currentColor","fill","none","stroke-linecap","round","stroke-linejoin","round",1,"icon"],["stroke","none","d","M0 0h24v24H0z","fill","none"],["d","M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0"],["d","M21 21l-6 -6"],[1,"row","row-cards"],[1,"col-12"],[1,"card"],[1,"table-responsive"],["id","contentToConvert",1,"table","card-table","table-vcenter","datatable","table-sm","table-fixed"],[1,"text-center"],["class","strong text-center",4,"ngFor","ngForOf"],[1,"strong","text-center"],[1,"text-nowrap"],[4,"ngIf"],[1,"text-danger"],["type","button",1,"btn","btn-outline-info","btn-pill","strong",3,"click"],[3,"ngClass"],["type","button",1,"btn-link","strong",3,"click"],[1,"card-footer","d-flex","align-items-center"],[1,"m-0","strong"],["header","PO Overdue Form",3,"visible","maximizable","visibleChange"],[1,"row","g-0"],[1,"col-12","col-lg-9","col-xl-9","border-end"],[1,"col-md-6","strong","text-center"],[1,"form-label"],[1,"row"],[1,"col-8"],[1,"col-2"],["type","button","class","btn btn-outline-info"],["type","button","class","btn btn-outline-info",3,"click",4,"ngIf"],["class","col-12"],["class","text-danger text-center"],[1,"col-md-4","strong","text-center"],[1,"col-md-4"],["type","text","placeholder","Type and Search PO",1,"form-control","is-valid","mb-2",3,"keydown.enter"],["class","col-md-3 text-center"],["class","col-md-12"],["autocomplete","off",3,"ngSubmit"],["mypoForm","ngForm"],["type","hidden","name","Id",3,"value"],["type","hidden","name","uid",3,"value"],[1,"col-sm-12","col-md-6"],[1,"mb-3"],[1,"form-label","required"],["required","","placeholder","PO No","name","pono",1,"form-control",3,"ngClass","ngModel","readOnly","ngModelChange"],["pono","ngModel"],[1,"col-md-6"],["rows","3","placeholder","Remarks","name","poremarks",1,"form-control",3,"ngClass","ngModel","ngModelChange"],["poremarks","ngModel"],[1,"card-footer","text-end"],[1,"d-flex"],["type","submit",1,"btn","btn-primary","ms-auto",3,"disabled"],[1,"col-12","col-lg-3","col-xl-3","d-flex","flex-column"],["type","button",1,"btn","btn-outline-info",3,"click"],[1,"col-sm-12","col-md-12"],["type","hidden","name","id",3,"value"],["required","","placeholder","Search Search Item here",1,"form-control",3,"ngModel","ngModelChange","keyup"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["type","submit",1,"btn","btn-primary","ms-auto",3,"disabled","click"],[1,"text-danger","text-center"],["type","button","class","btn-link",3,"click",4,"ngIf"],["type","button",1,"btn-link",3,"click"],["quotationform","ngForm"],["required","","placeholder","Search Vender Name here","name","accode",1,"form-control",3,"ngClass","ngModel","ngModelChange","keyup"],["accode","ngModel"],[1,"col-md-3","text-center"],["type","button",1,"btn","btn-outline-warning","btn-pill","strong",3,"click"],[1,"col-md-12"],["cancelForm","ngForm"],["class","col-md-12",4,"ngIf"],["rows","3","placeholder","Type Your Cancellation Reason here....","name","cancelledreason",1,"form-control",3,"ngClass","ngModel","ngModelChange"],["cancelledreason","ngModel"],["rows","3","placeholder","Type Your Rejection Reason here....","name","rejectedreason",1,"form-control",3,"ngClass","ngModel","ngModelChange"],["rejectedreason","ngModel"],["class","text-success text-center strong"],["class","table card-table table-vcenter datatable table-sm table-fixed cell-border"],[1,"text-success","text-center","strong"],[1,"table","card-table","table-vcenter","datatable","table-sm","table-fixed","cell-border"],[1,"w-1"],[1,"strong"],[1,"text-nowrap","text-center"],["type","button","class","btn-link strong"],["class","text-danger"],[1,"fa","fa-edit"],["class","strong"],[1,"text-danger","text-center","strong"],[1,"card-header"],[1,"card-title"],[1,"card-body","p-0"],["width","250","height","250",3,"src","preview",4,"ngIf"],["class","text-center","target","_blank",3,"href",4,"ngIf"],["width","250","height","250",3,"src","preview"],["target","_blank",1,"text-center",3,"href"],["src","https://upload.wikimedia.org/wikipedia/commons/8/87/PDF_file_icon.svg","width","250","height","250"],["class","col-2"]],template:function(i,s){1&i&&(e.YNc(0,I,4,2),e.EqZ(1,0,P),e.YNc(3,de,66,36),e.EqZ(4,3,M)),2&i&&(e.xp6(1),e.cPc(1==s.service.pooverduevisible),e.xp6(3),e.cPc(1==s.visible))},dependencies:[c.ez,d.u5,m.l,p.A0,f.$,g.S]})}return o})()}}]);