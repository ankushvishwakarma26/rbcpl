"use strict";(self.webpackChunkintranet=self.webpackChunkintranet||[]).push([[4791],{4791:(W,_,n)=>{n.d(_,{V:()=>Y});var l=n(6814),o=n(6223),h=n(6521),g=n(7248),m=n(9246),f=n(3620),x=n(3997),u=n(951),v=n(1312),p=n(4807),e=n(9212),b=n(377),Z=n(2425),C=n(5633),A=n(7473),T=n(1148),D=n(5219);const U=()=>[l.mk,l.O5,l.uU,o.Fj,o.JJ,o.On,m.Y,D.jx,Promise.resolve().then(n.bind(n,2681)).then(i=>i.FilterPipe)],q=()=>[l.mk,l.sg,l.O5,l.JJ,o._Y,o.YN,o.Kr,o.Fj,o.wV,o.EJ,o.JJ,o.JL,o.Q7,o.On,o.F,p.w9,p.jq,n.e(9176).then(n.bind(n,9176)).then(i=>i.TenderchatComponent),v.V];function M(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"h2",4),e._uU(1,"Demand Overdue List"),e.qZA(),e.TgZ(2,"div",5)(3,"div",6)(4,"input",7),e.NdJ("ngModelChange",function(a){e.CHM(t);const r=e.oxw(2);return e.KtG(r.searchvalue=a)}),e.qZA(),e.TgZ(5,"span",8),e.O4$(),e.TgZ(6,"svg",9),e._UZ(7,"path",10)(8,"path",11)(9,"path",12),e.qZA()()()()}if(2&i){const t=e.oxw(2);e.xp6(4),e.Q6J("ngModel",t.searchvalue)}}function k(i,c){1&i&&(e.TgZ(0,"th",18),e._uU(1,"Delete"),e.qZA())}function O(i,c){if(1&i&&(e._uU(0),e.TgZ(1,"span",22),e._uU(2),e.qZA()),2&i){const t=e.oxw().$implicit;e.hij(" ",t.diesticket," "),e.xp6(1),e.Q6J("ngClass","P2P"==t.type?"text-muted":"text-danger"),e.xp6(1),e.hij("(",t.type,")")}}function y(i,c){if(1&i&&(e._uU(0),e.TgZ(1,"span",22),e._uU(2),e.qZA(),e.TgZ(3,"span",22),e._uU(4),e.qZA()),2&i){const t=e.oxw().$implicit;e.hij(" ",t.id," "),e.xp6(1),e.Q6J("ngClass","P2P"==t.type?"text-muted":"text-danger"),e.xp6(1),e.hij("(",t.type,")"),e.xp6(1),e.Q6J("ngClass","F2"==t.buyeraddress?"text-purple":"F3"==t.buyeraddress?"text-yellow":"F4"==t.buyeraddress?"text-orange":""),e.xp6(1),e.hij("(",t.buyeraddress,")")}}function E(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"td")(1,"button",25),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,r=e.oxw(3);return e.KtG(r.CancelP2P(a.id))}),e._UZ(2,"i",26),e.qZA()()}}function P(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"tr",20)(1,"td",21),e._uU(2),e.qZA(),e.TgZ(3,"td"),e.YNc(4,O,3,3,"span",22)(5,y,5,5),e.qZA(),e.TgZ(6,"td")(7,"div"),e._uU(8),e.qZA()(),e.TgZ(9,"td")(10,"div"),e._uU(11),e.qZA()(),e.TgZ(12,"td")(13,"div"),e._uU(14),e.qZA(),e.TgZ(15,"div"),e._uU(16),e.ALo(17,"date"),e.qZA()(),e.TgZ(18,"td")(19,"button",23),e.NdJ("click",function(){const r=e.CHM(t).$implicit,d=e.oxw(3);return e.KtG(d.expendaccordion(r))}),e._uU(20,"Action"),e.qZA()(),e.YNc(21,E,3,0,"td",24),e.qZA()}if(2&i){const t=c.$implicit,s=c.$index,a=e.oxw(3);e.xp6(2),e.Oqu(s+1),e.xp6(2),e.um2(4,"Dies"==t.type?4:5),e.xp6(4),e.Oqu(t.item),e.xp6(3),e.Oqu(t.quantity),e.xp6(3),e.Oqu(t.createdby),e.xp6(2),e.Oqu(e.xi3(17,7,t.createddate,"dd-MMM-yyyy hh:mm a")),e.xp6(5),e.Q6J("ngIf",a.isadmin)}}function L(i,c){if(1&i&&(e.TgZ(0,"div",13)(1,"div",14)(2,"div",15)(3,"div",16)(4,"table",17)(5,"thead")(6,"tr")(7,"th",18),e._uU(8,"S.No."),e.qZA(),e.TgZ(9,"th",18),e._uU(10,"ID"),e.qZA(),e.TgZ(11,"th",18),e._uU(12,"Item Name"),e.qZA(),e.TgZ(13,"th",18),e._uU(14,"Qty"),e.qZA(),e.TgZ(15,"th",18),e._uU(16,"Last Update"),e.qZA(),e.TgZ(17,"th",18),e._uU(18,"Action"),e.qZA(),e.YNc(19,k,2,0,"th",19),e.qZA()(),e.TgZ(20,"tbody"),e.SjG(21,P,22,10,"tr",27,e.x6l),e.ALo(23,"filter"),e.qZA()()()()()()),2&i){const t=e.oxw(2);e.xp6(19),e.Q6J("ngIf",t.isadmin),e.xp6(2),e.wJu(e.xi3(23,1,t.service.p2plist,t.searchvalue))}}function S(i,c){if(1&i&&(e.TgZ(0,"div",28)(1,"p",29),e._uU(2,"Showing "),e.TgZ(3,"span"),e._uU(4,"1"),e.qZA(),e._uU(5," to "),e.TgZ(6,"span"),e._uU(7),e.qZA(),e._uU(8," of "),e.TgZ(9,"span"),e._uU(10),e.qZA(),e._uU(11," entries"),e.qZA()()),2&i){const t=e.oxw(3);e.xp6(7),e.Oqu(t.service.p2plist.length),e.xp6(3),e.Oqu(t.service.p2plist.length)}}function F(i,c){1&i&&e.YNc(0,S,12,2,"ng-template",3)}function J(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"p-sidebar",0),e.NdJ("visibleChange",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.service.demandoverduevisible=a)}),e.YNc(1,M,10,1,"ng-template",1)(2,L,24,4,"ng-template",2)(3,F,1,0,null,3),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("visible",t.service.demandoverduevisible)("fullScreen",!0),e.xp6(3),e.um2(3,t.service.p2plist?3:-1)}}function I(i,c){if(1&i&&(e.TgZ(0,"label",47),e._uU(1),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.hij("Remarks : ",t.service.p2pdata.remarks,"")}}function w(i,c){if(1&i&&(e.TgZ(0,"div",57)(1,"h1",63),e._uU(2,"Item Code is not Connected with ERP so Please Update Item Code with Search Option to Update."),e.qZA(),e._UZ(3,"br"),e.TgZ(4,"div",64)(5,"div",65)(6,"label",47),e._uU(7),e.qZA()(),e.TgZ(8,"div",65)(9,"label",47),e._uU(10),e.qZA()(),e.TgZ(11,"div",66),e.YNc(12,I,2,1,"label",67),e.qZA()()()),2&i){const t=e.oxw(2);e.xp6(7),e.hij("Item Name : ",t.service.p2pdata.item,""),e.xp6(3),e.hij("Item Qty : ",t.service.p2pdata.quantity,""),e.xp6(2),e.Q6J("ngIf",t.service.p2pdata.remarks)}}function N(i,c){1&i&&(e.TgZ(0,"div",57)(1,"h1",68),e._uU(2,"Item Code is Connected with ERP."),e.qZA()())}function Q(i,c){if(1&i&&(e.TgZ(0,"div",14)(1,"table",69)(2,"thead")(3,"tr")(4,"th",18),e._uU(5,"Type"),e.qZA(),e.TgZ(6,"th",18),e._uU(7,"F1"),e.qZA(),e.TgZ(8,"th",18),e._uU(9,"F2"),e.qZA(),e.TgZ(10,"th",18),e._uU(11,"F3"),e.qZA(),e.TgZ(12,"th",18),e._uU(13,"F4"),e.qZA(),e.TgZ(14,"th",18),e._uU(15,"CO"),e.qZA(),e.TgZ(16,"th",18),e._uU(17,"RO"),e.qZA(),e.TgZ(18,"th",18),e._uU(19,"Total"),e.qZA()()(),e.TgZ(20,"tbody")(21,"tr",20)(22,"td",21),e._uU(23,"Stock"),e.qZA(),e.TgZ(24,"td",70),e._uU(25),e.ALo(26,"number"),e.qZA(),e.TgZ(27,"td",70),e._uU(28),e.ALo(29,"number"),e.qZA(),e.TgZ(30,"td",70),e._uU(31),e.ALo(32,"number"),e.qZA(),e.TgZ(33,"td",70),e._uU(34),e.ALo(35,"number"),e.qZA(),e.TgZ(36,"td",70),e._uU(37),e.ALo(38,"number"),e.qZA(),e.TgZ(39,"td",70),e._uU(40),e.ALo(41,"number"),e.qZA(),e.TgZ(42,"td",70),e._uU(43),e.ALo(44,"number"),e.qZA()(),e.TgZ(45,"tr",20)(46,"td",21),e._uU(47,"Consumption"),e.qZA(),e.TgZ(48,"td",70),e._uU(49),e.ALo(50,"number"),e.qZA(),e.TgZ(51,"td",70),e._uU(52),e.ALo(53,"number"),e.qZA(),e.TgZ(54,"td",70),e._uU(55),e.ALo(56,"number"),e.qZA(),e.TgZ(57,"td",70),e._uU(58),e.ALo(59,"number"),e.qZA(),e.TgZ(60,"td",70),e._uU(61),e.ALo(62,"number"),e.qZA(),e.TgZ(63,"td",70),e._uU(64),e.ALo(65,"number"),e.qZA(),e.TgZ(66,"td",70),e._uU(67),e.ALo(68,"number"),e.qZA()()()()()),2&i){const t=e.oxw(2);e.xp6(24),e.Q6J("ngClass",t.service.stockitems.f1+0<=0?"text-danger":"text-success"),e.xp6(1),e.Oqu(e.xi3(26,28,t.service.stockitems.f1+0,"0.1-2")),e.xp6(2),e.Q6J("ngClass",t.service.stockitems.f2+0<=0?"text-danger":"text-success"),e.xp6(1),e.Oqu(e.xi3(29,31,t.service.stockitems.f2+0,"0.1-2")),e.xp6(2),e.Q6J("ngClass",t.service.stockitems.f3+0<=0?"text-danger":"text-success"),e.xp6(1),e.Oqu(e.xi3(32,34,t.service.stockitems.f3+0,"0.1-2")),e.xp6(2),e.Q6J("ngClass",t.service.stockitems.f4+0<=0?"text-danger":"text-success"),e.xp6(1),e.Oqu(e.xi3(35,37,t.service.stockitems.f4+0,"0.1-2")),e.xp6(2),e.Q6J("ngClass",t.service.stockitems.co+0<=0?"text-danger":"text-success"),e.xp6(1),e.Oqu(e.xi3(38,40,t.service.stockitems.co+0,"0.1-2")),e.xp6(2),e.Q6J("ngClass",t.service.stockitems.ro+0<=0?"text-danger":"text-success"),e.xp6(1),e.Oqu(e.xi3(41,43,t.service.stockitems.ro+0,"0.1-2")),e.xp6(2),e.Q6J("ngClass",t.service.stockitems.f1+t.service.stockitems.f2+t.service.stockitems.f3+t.service.stockitems.f4+t.service.stockitems.co+t.service.stockitems.ro+0<=0?"text-danger":"text-success"),e.xp6(1),e.Oqu(e.xi3(44,46,t.service.stockitems.f1+t.service.stockitems.f2+t.service.stockitems.f3+t.service.stockitems.f4+t.service.stockitems.co+t.service.stockitems.ro+0,"0.1-2")),e.xp6(5),e.Q6J("ngClass",(t.service.stockitems.salef1-t.service.stockitems.returnf1)/6<=0?"text-danger":"text-success"),e.xp6(1),e.Oqu(e.xi3(50,49,(t.service.stockitems.salef1-t.service.stockitems.returnf1)/6,"0.1-2")),e.xp6(2),e.Q6J("ngClass",(t.service.stockitems.salef2-t.service.stockitems.returnf2)/6<=0?"text-danger":"text-success"),e.xp6(1),e.Oqu(e.xi3(53,52,(t.service.stockitems.salef2-t.service.stockitems.returnf2)/6,"0.1-2")),e.xp6(2),e.Q6J("ngClass",(t.service.stockitems.salef3-t.service.stockitems.returnf3)/6<=0?"text-danger":"text-success"),e.xp6(1),e.Oqu(e.xi3(56,55,(t.service.stockitems.salef3-t.service.stockitems.returnf3)/6,"0.1-2")),e.xp6(2),e.Q6J("ngClass",(t.service.stockitems.salef4-t.service.stockitems.returnf4)/6<=0?"text-danger":"text-success"),e.xp6(1),e.Oqu(e.xi3(59,58,(t.service.stockitems.salef4-t.service.stockitems.returnf4)/6,"0.1-2")),e.xp6(2),e.Q6J("ngClass",(t.service.stockitems.saleco-t.service.stockitems.returnco)/6<=0?"text-danger":"text-success"),e.xp6(1),e.Oqu(e.xi3(62,61,(t.service.stockitems.saleco-t.service.stockitems.returnco)/6,"0.1-2")),e.xp6(2),e.Q6J("ngClass",(t.service.stockitems.salero-t.service.stockitems.returnro)/6<=0?"text-danger":"text-success"),e.xp6(1),e.Oqu(e.xi3(65,64,(t.service.stockitems.salero-t.service.stockitems.returnro)/6,"0.1-2")),e.xp6(2),e.Q6J("ngClass",(t.service.stockitems.salef1-t.service.stockitems.returnf1+(t.service.stockitems.salef2-t.service.stockitems.returnf2)+(t.service.stockitems.salef3-t.service.stockitems.returnf3)+(t.service.stockitems.salef4-t.service.stockitems.returnf4)+(t.service.stockitems.saleco-t.service.stockitems.returnco)+(t.service.stockitems.salero-t.service.stockitems.returnro))/6<=0?"text-danger":"text-success"),e.xp6(1),e.Oqu(e.xi3(68,67,(t.service.stockitems.salef1-t.service.stockitems.returnf1+(t.service.stockitems.salef2-t.service.stockitems.returnf2)+(t.service.stockitems.salef3-t.service.stockitems.returnf3)+(t.service.stockitems.salef4-t.service.stockitems.returnf4)+(t.service.stockitems.saleco-t.service.stockitems.returnco)+(t.service.stockitems.salero-t.service.stockitems.returnro))/6/6,"0.1-2"))}}function G(i,c){if(1&i&&(e.TgZ(0,"ng-option",71),e._uU(1),e.qZA()),2&i){const t=c.$implicit;e.Q6J("value",t.item_code),e.xp6(1),e.Oqu(t.itemname)}}const R=()=>({width:"100vw"});function K(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"p-dialog",30),e.NdJ("visibleChange",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.visible=a)}),e.TgZ(1,"div",31)(2,"div",32)(3,"div",14)(4,"form",33,34),e.NdJ("ngSubmit",function(){e.CHM(t);const a=e.MAs(5),r=e.oxw();return e.KtG(a.form.valid&&r.update(a))}),e.TgZ(6,"div",13),e._UZ(7,"input",35),e.YNc(8,w,13,3,"div",36)(9,N,3,0,"div",36)(10,Q,69,70,"div",37),e.TgZ(11,"div",38)(12,"div",39)(13,"label",40),e._uU(14,"Search Item"),e.qZA(),e.TgZ(15,"ng-select",41,42),e.NdJ("change",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.Displaystock(a))})("ngModelChange",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.service.p2pdata.itemcode=a)})("keyup",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.SearchItem(a))}),e.YNc(17,G,2,2,"ng-option",43),e.qZA()()(),e.TgZ(18,"div",44)(19,"div",39)(20,"label",40),e._uU(21,"Quantity"),e.qZA(),e.TgZ(22,"input",45,46),e.NdJ("ngModelChange",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.service.p2pdata.quantity=a)}),e.qZA()()(),e.TgZ(24,"div",44)(25,"div",39)(26,"label",47),e._uU(27,"Location"),e.qZA(),e.TgZ(28,"select",48,49),e.NdJ("ngModelChange",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.service.p2pdata.buyeraddress=a)}),e.TgZ(30,"option",50),e._uU(31,"-----Select Location-----"),e.qZA(),e.TgZ(32,"option",51),e._uU(33,"F1"),e.qZA(),e.TgZ(34,"option",52),e._uU(35,"F2"),e.qZA(),e.TgZ(36,"option",53),e._uU(37,"F3"),e.qZA(),e.TgZ(38,"option",54),e._uU(39,"F4"),e.qZA(),e.TgZ(40,"option",55),e._uU(41,"RO"),e.qZA(),e.TgZ(42,"option",56),e._uU(43,"CO"),e.qZA()()()(),e.TgZ(44,"div",57)(45,"div",58)(46,"div",59)(47,"a",60),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.service.demandoverduevisible=!1)}),e._uU(48,"Cancel"),e.qZA(),e.TgZ(49,"button",61),e._uU(50,"Submit"),e.qZA()()()()(),e._UZ(51,"br"),e.qZA()()(),e.TgZ(52,"div",62),e._UZ(53,"app-tenderchat"),e.qZA()()()}if(2&i){const t=e.MAs(5),s=e.MAs(16),a=e.MAs(23),r=e.MAs(29),d=e.oxw();e.Akn(e.DdM(16,R)),e.Q6J("visible",d.visible)("maximizable",!0),e.xp6(7),e.Q6J("value",d.service.p2pdata.id),e.xp6(1),e.um2(8,null!=d.service.p2pdata.id&&null==d.service.p2pdata.itemcode?8:-1),e.xp6(1),e.um2(9,null!=d.service.p2pdata.id&&null!=d.service.p2pdata.itemcode?9:-1),e.xp6(1),e.um2(10,d.service.stockitems?10:-1),e.xp6(5),e.Q6J("ngClass",s.invalid?"is-invalid":"is-valid mb-2")("ngModel",d.service.p2pdata.itemcode),e.xp6(2),e.Q6J("ngForOf",d.filtereddata),e.xp6(5),e.Q6J("ngClass",a.invalid?"is-invalid":"is-valid mb-2")("ngModel",d.service.p2pdata.quantity),e.xp6(6),e.Q6J("ngClass",r.invalid?"is-invalid":"is-valid mb-2")("ngModel",d.service.p2pdata.buyeraddress),e.xp6(21),e.Q6J("disabled",t.invalid)}}let Y=(()=>{class i{constructor(t,s,a,r,d){this.service=t,this.toast=s,this.userservice=a,this.imageservice=r,this.tenderservice=d,this.isadmin=!1,this.searchvalue="",this.panelOpenState=!1,this.visible=!1,this.count=0,this.gerbutton=!0}ngOnInit(){("Admin"==this.userservice.GetRole()||"PC"==this.userservice.GetRole())&&(this.isadmin=!0)}opendetails(t){this.service.detail=!0,this.service.p2pdata=t,null!=this.service.p2pdata.accountdate?this.service.p2pdata.status=10:null!=this.service.p2pdata.movementdate?this.service.p2pdata.status=9:null!=this.service.p2pdata.mrndate?this.service.p2pdata.status=8:null!=this.service.p2pdata.mandate?this.service.p2pdata.status=7:null!=this.service.p2pdata.gerdate?this.service.p2pdata.status=6:null!=this.service.p2pdata.podate?this.service.p2pdata.status=5:null!=this.service.p2pdata.approvaldate||null!=this.service.p2pdata.quotationdate?this.service.p2pdata.status=4:null!=this.service.p2pdata.updateddate?this.service.p2pdata.status=2:null!=this.service.p2pdata.createddate&&(this.service.p2pdata.status=1),this.service.GetP2PItemListbyid(t.id).subscribe(s=>{console.log(s),"success"==s.status&&(this.service.p2pitemlist=s.data)}),this.service.GetP2PApprovedItemListbyid(t.id).subscribe(s=>{console.log(s),"success"==s.status&&(this.service.p2papproveditemlist=s.data)}),this.imageservice.GetDocumentsbyid(t.id).subscribe(s=>{"success"==s.status&&(this.imageservice.rcuploadedlist=s.data),console.log(s)})}LoadOverdueList(){this.service.GetP2PList(1,1e4,"","","DemandOverdue").subscribe(t=>{this.service.p2plist=t.data},t=>{this.toast.error(t)})}LoadDashboard(){this.service.GetDashboardReport().subscribe(t=>{this.service.dashboarddata=t})}SearchItem(t){this.service.SearchItem(t.target.value).pipe((0,f.b)(500),(0,x.x)()).subscribe(a=>{"success"==a.status?(console.log(a),this.filtereddata=a.data):this.toast.error(a.message,"Error")})}update(t){this.service.p2pdata.currentstatus="Pending",this.service.p2pdata.status=2,this.service.p2pdata.updatedby=this.userservice.GetFullName(),this.service.p2pdata.updateddate=this.gettime(),this.service.CreateUpdate().subscribe(s=>{"success"==s.status?(this.toast.success(s.key,"Success"),this.LoadOverdueList(),this.LoadDashboard(),this.filtereddata=null,this.visible=!1):this.toast.error(s.key,"Error")},s=>{this.toast.error(s,"Error")})}ApproveItem(t){this.service.p2pitemdata=t,this.service.ApproveQuotation().subscribe(s=>{"approved"==s.status?this.toast.success(s.message,"Approved"):"rejected"==s.status?this.toast.warning(s.message,"Rejected"):"cancelled"==s.status&&this.toast.error(s.message,"Error"),this.enablepobutton()},s=>{this.toast.error(s,"Error")})}movetoquotation(){1==confirm("Are You Sure want to Move Item to Quotation?")&&(this.service.p2pdata.quotationby=null,this.service.p2pdata.quotationdate=null,this.service.p2pdata.approvedby=null,this.service.p2pdata.approvaldate=null,this.service.p2pdata.poby=null,this.service.p2pdata.podate=null,this.service.p2pdata.gerby=null,this.service.p2pdata.gerdate=null,this.service.p2pdata.manby=null,this.service.p2pdata.mandate=null,this.service.p2pdata.mrnby=null,this.service.p2pdata.mrndate=null,this.service.p2pdata.movementby=null,this.service.p2pdata.movementdate=null,this.service.p2pdata.accountby=null,this.service.p2pdata.accountdate=null,this.service.CreateUpdate().subscribe(t=>{"success"==t.status?(this.toast.warning("Item Moved Successfully","Success"),this.service.demandoverduevisible=!1,this.service.quotationoverduevisible=!1,this.service.approvaloverduevisible=!1,this.service.pooverduevisible=!1,this.service.geroverduevisible=!1,this.service.manoverduevisible=!1,this.service.mrnoverduevisible=!1,this.service.accountoverduevisible=!1,this.service.movementoverduevisible=!1,this.LoadDashboard(),this.LoadOverdueList()):this.toast.warning(t.message,"Warning")}))}gettime(){let t=new Date,a=t.getTime()+Math.abs(6e4*t.getTimezoneOffset());return new Date(a).toISOString()}confirmquotation(t,s){this.service.p2pdata=t,"Quotation"==s?(this.service.p2pdata.quotationby=this.userservice.GetFullName(),this.service.p2pdata.quotationdate=this.gettime()):"Approval"==s?(this.service.p2pdata.approvedby=this.userservice.GetFullName(),this.service.p2pdata.approvaldate=this.gettime()):"PO"==s?(this.service.p2pdata.poby=this.userservice.GetFullName(),this.service.p2pdata.podate=this.gettime()):"GER"==s?(this.service.p2pdata.gerby=this.userservice.GetFullName(),this.service.p2pdata.gerdate=this.gettime()):"MAN"==s?(this.service.p2pdata.manby=this.userservice.GetFullName(),this.service.p2pdata.mandate=this.gettime()):"MRN"==s?(this.service.p2pdata.mrnby=this.userservice.GetFullName(),this.service.p2pdata.mrndate=this.gettime()):"Movement"==s?(this.service.p2pdata.movementby=this.userservice.GetFullName(),this.service.p2pdata.movementdate=this.gettime()):"Account"==s&&(this.service.p2pdata.accountby=this.userservice.GetFullName(),this.service.p2pdata.accountdate=this.gettime()),this.service.CreateUpdate().subscribe(a=>{"success"==a.status&&("Quotation"==s?this.toast.success("Quotation Submitted Successfully","Success"):"Approval"==s?this.toast.success("Quotation Approved Successfully","Success"):"PO"==s?this.toast.success("PO Submitted Successfully","Success"):"GER"==s?this.toast.success("GER Submitted Successfully","Success"):"MAN"==s?this.toast.success("MAN Submitted Successfully","Success"):"MRN"==s?this.toast.success("MRN Submitted Successfully","Success"):"Movement"==s?this.toast.success("Movement Submitted Successfully","Success"):"Account"==s&&this.toast.success("Account Submitted Successfully","Success"),this.LoadOverdueList(),this.LoadDashboard())})}expendaccordion(t){this.service.p2pdata=t,this.service.p2pitemlist=[],this.enablepo=!1,this.visible=!0,this.service.p2pitemdata=new u.bY,this.GetItemListbyid(t.id),this.tenderservice.tenderchatid=t.id,this.tenderservice.Chatbyid(t.id),this.tenderservice.ReadChat(t.id,this.userservice.GetUserName(),this.userservice.GetFullName()),this.tenderservice.tenderchatdata=new u.Y_,this.tenderservice.tenderchatdata.header="Demand Overdue",this.tenderservice.tenderchatdata.type="P2P",console.log(t)}expendtab(t,s){1==t?(this.service.p2pdata=s,this.service.p2pitemlist=[],this.enablepo=!1,this.service.p2pitemdata=new u.bY,this.GetItemListbyid(s.id)):(this.service.p2pdata=s,this.service.p2pitemlist=[],this.enablepo=!1,this.service.p2pitemdata=new u.bY)}GetItemListbyid(t){this.service.GetP2PItemListbyid(t).subscribe(s=>{"success"==s.status&&(this.service.p2pitemlist=s.data,this.enablepobutton())})}Displaystock(t){var s=this.service.p2pdata.itemcode;console.log(s,t),this.service.GetStockbyid(s).subscribe(a=>{"success"==a.status?(this.service.stockitems=a.data,console.log(a)):this.toast.warning(a.message,"Warning")})}enablepobutton(){this.count=0,this.service.p2pitemlist.forEach(s=>{s.ger&&1==s.status&&this.count++}),this.gerbutton=!(this.count>0)}populatepo(t){this.service.p2pitemdata=t,this.enablepo=!this.enablepo}updateger(t){t.valid?this.service.CreateUpdateQuotation().subscribe(s=>{"success"==s.status?(this.enablepo=!1,this.toast.success(s.message,"Success"),this.GetItemListbyid(this.service.p2puid),this.service.p2pitemdata=new u.bY,this.visible=!1,this.LoadDashboard(),t.reset(),this.enablepobutton()):this.toast.warning(s.message,"Warning")},s=>{this.toast.error(s,"Error")}):this.toast.warning("Please Update GER Number","Warning")}CancelP2P(t){1==confirm("Are You Sure want to Cancel "+t)&&this.service.CancelP2P(t).subscribe(s=>{"success"==s.status?(this.toast.success(s.message,"Success"),this.LoadOverdueList(),this.LoadDashboard()):this.toast.warning(s.message,"Warning")})}static#e=this.\u0275fac=function(s){return new(s||i)(e.Y36(b.h),e.Y36(Z._W),e.Y36(C.K),e.Y36(A.D),e.Y36(T.$))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-demandoverdue"]],standalone:!0,features:[e.jDz],decls:6,vars:2,consts:[[3,"visible","fullScreen","visibleChange"],["pTemplate","header"],["pTemplate","content"],["pTemplate","footer"],[1,"page-title"],[1,"ms-auto","text-muted"],[1,"input-icon"],["type","text","placeholder","Search.....",1,"form-control",3,"ngModel","ngModelChange"],[1,"input-icon-addon"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","stroke-width","2","stroke","currentColor","fill","none","stroke-linecap","round","stroke-linejoin","round",1,"icon"],["stroke","none","d","M0 0h24v24H0z","fill","none"],["d","M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0"],["d","M21 21l-6 -6"],[1,"row","row-cards"],[1,"col-12"],[1,"card"],[1,"table-responsive"],["id","contentToConvert",1,"table","card-table","table-vcenter","datatable","table-sm","table-fixed"],[1,"text-center"],["class","text-center",4,"ngIf"],[1,"strong","text-center"],[1,"text-nowrap"],[3,"ngClass"],["type","button",1,"btn","btn-outline-info","btn-pill","strong",3,"click"],[4,"ngIf"],["type","button",1,"btn","btn-outline-danger","btn-icon",3,"click"],[1,"fa","fa-trash"],["class","strong text-center"],[1,"card-footer","d-flex","align-items-center"],[1,"m-0","strong"],["header","Demand Overdue Form",3,"visible","maximizable","visibleChange"],[1,"row","g-0"],[1,"col-12","col-lg-9","col-xl-9","border-end"],["autocomplete","off",3,"ngSubmit"],["myForm1","ngForm"],["type","hidden","name","id",3,"value"],["class","col-sm-12 col-md-12"],["class","col-12"],[1,"col-sm-12","col-md-8"],[1,"mb-3"],[1,"form-label","required"],["required","","placeholder","Search Item Name here","name","itemcode",1,"form-control",3,"ngClass","ngModel","change","ngModelChange","keyup"],["itemcode","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"col-sm-12","col-md-2"],["required","","type","number","required","","placeholder","Quantity","name","quantity",1,"form-control",3,"ngClass","ngModel","ngModelChange"],["quantity","ngModel"],[1,"form-label"],["placeholder","Location","name","buyeraddress",1,"form-control",3,"ngClass","ngModel","ngModelChange"],["buyeraddress","ngModel"],["value",""],["value","F1"],["value","F2"],["value","F3"],["value","F4"],["value","RO"],["value","CO"],[1,"col-sm-12","col-md-12"],[1,"card-footer","text-end"],[1,"d-flex"],[1,"btn","btn-link",3,"click"],["type","submit",1,"btn","btn-primary","ms-auto",3,"disabled"],[1,"col-12","col-lg-3","col-xl-3","d-flex","flex-column"],[1,"text-danger","text-center"],[1,"row","text-center"],[1,"col-md-6"],[1,"col-md-12"],["class","form-label",4,"ngIf"],[1,"text-success","text-center"],[1,"table","card-table","table-vcenter","datatable","table-sm","table-fixed"],[1,"text-nowrap",3,"ngClass"],[3,"value"]],template:function(s,a){1&s&&(e.YNc(0,J,4,3),e.EqZ(1,0,U),e.YNc(3,K,54,17),e.EqZ(4,3,q)),2&s&&(e.xp6(1),e.cPc(1==a.service.demandoverduevisible),e.xp6(3),e.cPc(1==a.visible))},dependencies:[l.ez,o.u5,m.l,g.$,h.O,p.A0,v.S]})}return i})()}}]);