"use strict";(self.webpackChunkintranet=self.webpackChunkintranet||[]).push([[2302],{2302:(G,_,n)=>{n.r(_),n.d(_,{MachineryclosedComponent:()=>J});var o=n(6814),l=n(6223),h=n(9246),p=n(7248),u=n(6521),v=n(4807),m=n(1312),g=n(951),e=n(9212),x=n(8417),Z=n(2425),f=n(377),y=n(5633),T=n(7473),M=n(1148),C=n(5219);const b=()=>[o.mk,o.H9,o.uU,l.Fj,l.JJ,l.On,h.Y,C.jx,Promise.resolve().then(n.bind(n,2681)).then(i=>i.FilterPipe)],A=()=>[o.O5,o.H9,o.uU,p.E,n.e(9176).then(n.bind(n,9176)).then(i=>i.TenderchatComponent),m.V];function D(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"h2",4),e._uU(1,"Closed Machinery List"),e.qZA(),e.TgZ(2,"div",5)(3,"div",6)(4,"input",7),e.NdJ("ngModelChange",function(r){e.CHM(t);const c=e.oxw(2);return e.KtG(c.searchvalue=r)}),e.qZA(),e.TgZ(5,"span",8),e.O4$(),e.TgZ(6,"svg",9),e._UZ(7,"path",10)(8,"path",11)(9,"path",12),e.qZA()()()()}if(2&i){const t=e.oxw(2);e.xp6(4),e.Q6J("ngModel",t.searchvalue)}}function U(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"tr",19)(1,"td",20),e._uU(2),e.qZA(),e.TgZ(3,"td")(4,"div"),e._uU(5),e.TgZ(6,"span",21),e._uU(7),e.qZA()(),e.TgZ(8,"div"),e._uU(9),e.ALo(10,"date"),e.qZA()(),e.TgZ(11,"td")(12,"div"),e._uU(13),e.ALo(14,"currency"),e.qZA(),e.TgZ(15,"div"),e._uU(16),e.qZA()(),e.TgZ(17,"td")(18,"div"),e._uU(19),e.qZA(),e.TgZ(20,"div"),e._uU(21),e.ALo(22,"date"),e.qZA()(),e.TgZ(23,"td")(24,"button",22),e.NdJ("click",function(){const c=e.CHM(t).$implicit,d=e.oxw(3);return e.KtG(d.expendaccordion(c))}),e._uU(25,"Action"),e.qZA()()()}if(2&i){const t=a.$implicit,s=a.$index;e.xp6(2),e.Oqu(s+1),e.xp6(3),e.hij(" ",t.machinecode," "),e.xp6(1),e.Q6J("ngClass","F2"==t.location?"text-purple":"F3"==t.location?"text-yellow":"F4"==t.location?"text-orange":""),e.xp6(1),e.hij("(",t.location,")"),e.xp6(2),e.Oqu(e.xi3(10,10,t.receiptdate,"dd-MMM-yyyy")),e.xp6(4),e.AsE("",t.item," (",e.xi3(14,13,t.cost,"INR"),")"),e.xp6(3),e.Oqu(t.accode?t.name:t.vendername),e.xp6(3),e.Oqu(t.closureby),e.xp6(2),e.Oqu(e.xi3(22,16,t.closuredate,"dd-MMM-yyyy hh:mm a"))}}function E(i,a){if(1&i&&(e.TgZ(0,"div",13)(1,"div",14)(2,"div",15)(3,"div",16)(4,"table",17)(5,"thead")(6,"tr")(7,"th",18),e._uU(8,"S.No."),e.qZA(),e.TgZ(9,"th",18),e._uU(10,"Machine Code"),e.qZA(),e.TgZ(11,"th",18),e._uU(12,"Machine/Vender Name"),e.qZA(),e.TgZ(13,"th",18),e._uU(14,"Last Update"),e.qZA(),e.TgZ(15,"th",18),e._uU(16,"Action"),e.qZA()()(),e.TgZ(17,"tbody"),e.SjG(18,U,26,19,"tr",23,e.x6l),e.ALo(20,"filter"),e.qZA()()()()()()),2&i){const t=e.oxw(2);e.xp6(18),e.wJu(e.xi3(20,0,t.service.machinerylist,t.searchvalue))}}function O(i,a){if(1&i&&(e.TgZ(0,"div",24)(1,"p",25),e._uU(2,"Showing "),e.TgZ(3,"span"),e._uU(4,"1"),e.qZA(),e._uU(5," to "),e.TgZ(6,"span"),e._uU(7),e.qZA(),e._uU(8," of "),e.TgZ(9,"span"),e._uU(10),e.qZA(),e._uU(11," entries"),e.qZA()()),2&i){const t=e.oxw(3);e.xp6(7),e.Oqu(t.service.machinerylist.length),e.xp6(3),e.Oqu(t.service.machinerylist.length)}}function q(i,a){1&i&&e.YNc(0,O,12,2,"ng-template",3)}function P(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"p-sidebar",0),e.NdJ("visibleChange",function(r){e.CHM(t);const c=e.oxw();return e.KtG(c.service.closedvisible=r)}),e.YNc(1,D,10,1,"ng-template",1)(2,E,21,3,"ng-template",2)(3,q,1,0,null,3),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("visible",t.service.closedvisible)("fullScreen",!0),e.xp6(3),e.um2(3,t.service.machinerylist?3:-1)}}function L(i,a){if(1&i&&(e.TgZ(0,"label",32),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.hij("Remarks : ",t.service.machinerydata.remarks,"")}}function w(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"button",42),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.BacktoPreviousOverdue())}),e._uU(1,"Back to Closure Overdue"),e.qZA()}}function F(i,a){if(1&i&&(e.TgZ(0,"tr",45)(1,"td",44),e._uU(2),e.qZA(),e.TgZ(3,"td",18)(4,"div"),e._uU(5),e.qZA()(),e.TgZ(6,"td",46)(7,"div"),e._uU(8),e.qZA()(),e.TgZ(9,"td",46)(10,"div"),e._uU(11),e.qZA()(),e.TgZ(12,"td",46)(13,"div"),e._uU(14),e.qZA(),e.TgZ(15,"div"),e._uU(16),e.ALo(17,"date"),e.qZA()()()),2&i){const t=a.$implicit,s=a.$index;e.xp6(2),e.hij(" ",s+1," "),e.xp6(3),e.Oqu(t.category),e.xp6(3),e.Oqu(t.size),e.xp6(3),e.Oqu(t.pieces),e.xp6(3),e.Oqu(t.createdby),e.xp6(2),e.Oqu(e.xi3(17,6,t.createddate,"dd/MM/YYYY hh:mm a"))}}function N(i,a){if(1&i&&(e.TgZ(0,"table",43)(1,"thead")(2,"tr")(3,"th",44),e._uU(4,"S.No."),e.qZA(),e.TgZ(5,"th",18),e._uU(6,"Cateogory"),e.qZA(),e.TgZ(7,"th",18),e._uU(8,"Size"),e.qZA(),e.TgZ(9,"th",18),e._uU(10,"Pieces"),e.qZA(),e.TgZ(11,"th",18),e._uU(12,"Createdby"),e.qZA()()(),e.TgZ(13,"tbody"),e.SjG(14,F,18,9,"tr",47,e.x6l),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(14),e.wJu(t.service.machineryassessorieslist)}}function R(i,a){1&i&&(e.TgZ(0,"h1",48),e._uU(1,"No List Available"),e.qZA())}function I(i,a){if(1&i&&e._UZ(0,"p-image",53),2&i){const t=e.oxw().$implicit,s=e.oxw(2);e.Q6J("src",s.imageservice.imageurl+t.path)("preview",!0)}}function K(i,a){if(1&i&&(e.TgZ(0,"a",55),e._UZ(1,"img",56),e.qZA()),2&i){const t=e.oxw().$implicit,s=e.oxw(2);e.Q6J("href",s.imageservice.imageurl+t.path,e.LSH)}}function S(i,a){if(1&i&&(e.TgZ(0,"div",49)(1,"div",15)(2,"div",50)(3,"h3",51),e._uU(4),e.qZA()(),e.TgZ(5,"div",52),e.YNc(6,I,1,2,"p-image",53)(7,K,2,1,"a",54),e.qZA()()()),2&i){const t=a.$implicit;e.xp6(4),e.Oqu(t.type),e.xp6(2),e.um2(6,"pdf"!=t.path.split(".").pop()?6:-1),e.xp6(1),e.um2(7,"pdf"==t.path.split(".").pop()?7:-1)}}function Y(i,a){1&i&&(e.TgZ(0,"div")(1,"h1",48),e._uU(2,"No File Uploaded"),e.qZA()())}const B=()=>({width:"100vw"});function j(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"p-dialog",26),e.NdJ("visibleChange",function(r){e.CHM(t);const c=e.oxw();return e.KtG(c.visible=r)}),e.TgZ(1,"div",27)(2,"div",28)(3,"div",29)(4,"div",30)(5,"div",31)(6,"label",32),e._uU(7),e.qZA()(),e.TgZ(8,"div",31)(9,"label",32),e._uU(10),e.ALo(11,"date"),e.qZA()(),e.TgZ(12,"div",33)(13,"label",32),e._uU(14),e.qZA()(),e.TgZ(15,"div",31)(16,"label",32),e._uU(17),e.qZA()(),e.TgZ(18,"div",31)(19,"label",32),e._uU(20),e.ALo(21,"currency"),e.qZA()(),e.TgZ(22,"div",33)(23,"label",32),e._uU(24),e.qZA()(),e.TgZ(25,"div",34),e.YNc(26,L,2,1,"label",35),e.qZA(),e.TgZ(27,"div",33),e.YNc(28,w,2,0,"button",36),e.qZA()()(),e.TgZ(29,"div",37)(30,"div",38)(31,"div",39)(32,"div",16),e.YNc(33,N,16,0,"table",40)(34,R,2,0),e.qZA()()()(),e.TgZ(35,"div",37),e.SjG(36,S,8,3,"div",57,e.x6l,!1,Y,3,0),e.qZA()(),e.TgZ(39,"div",41),e._UZ(40,"app-tenderchat"),e.qZA()()()}if(2&i){const t=e.oxw();e.Akn(e.DdM(20,B)),e.Q6J("visible",t.visible)("maximizable",!0),e.xp6(7),e.hij("Machine Code : ",t.service.machinerydata.machinecode,""),e.xp6(3),e.hij("Receipt Date : ",e.xi3(11,14,t.service.machinerydata.receiptdate,"dd-MMM-yyyy"),""),e.xp6(4),e.hij("Machine Name : ",t.service.machinerydata.item,""),e.xp6(3),e.hij("Location : ",t.service.machinerydata.location,""),e.xp6(3),e.hij("Machine Cost : ",e.xi3(21,17,t.service.machinerydata.cost,"INR"),""),e.xp6(4),e.hij("Vender Name : ",t.service.machinerydata.accode?t.service.machinerydata.name:t.service.machinerydata.vendername,""),e.xp6(2),e.Q6J("ngIf",t.service.machinerydata.remarks),e.xp6(2),e.um2(28,t.isadmin?28:-1),e.xp6(5),e.um2(33,t.service.machineryassessorieslist.length>0?33:34),e.xp6(3),e.wJu(t.imageservice.rcuploadedlist)}}let J=(()=>{class i{constructor(t,s,r,c,d,W){this.service=t,this.toast=s,this.p2pservice=r,this.userservice=c,this.imageservice=d,this.tenderservice=W,this.isadmin=!1,this.searchvalue="",this.currentuser=this.userservice.GetFullName(),this.panelOpenState=!1,this.visible=!1}ngOnDestroy(){}ngOnInit(){"Admin"==this.userservice.GetRole()&&(this.isadmin=!0)}LoadOverdueList(){this.service.GetMachineryList(1,1e4,"","","Closed").subscribe(t=>{this.service.machinerylist=t.data},t=>{this.toast.error(t)})}LoadDashboard(){this.service.GetDashboardReport().subscribe(t=>{this.service.dashboarddata=t})}expendaccordion(t){this.service.machinerydata=t,this.visible=!0,this.tenderservice.tenderchatid=t.id,this.imageservice.id=t.id,this.imageservice.RefreshFile(),this.tenderservice.Chatbyid(t.id),this.tenderservice.ReadChat(t.id,this.userservice.GetUserName(),this.userservice.GetFullName()),this.tenderservice.tenderchatdata=new g.Y_,this.tenderservice.tenderchatdata.header="Closed Machinery",this.tenderservice.tenderchatdata.type="Machinery",this.GetAssessories()}GetAssessories(){this.service.MachineryAssessoriesbyid(this.service.machinerydata.id).subscribe(t=>{"success"==t.status&&(this.service.machineryassessorieslist=t.data)})}DeleteImage(t){1==confirm("Are You Sure want to Delete?")?this.imageservice.DeleteImage(t).subscribe(s=>{(s.status="success")?this.toast.success(s.result,"Success"):this.toast.error(s.result,"Error"),this.imageservice.RefreshFile()}):this.toast.warning("File Deletion Cancelled","Cancelled")}BacktoPreviousOverdue(){1==confirm("Are You Sure want to Back to Closure Overdue?")&&(this.service.machinerydata.currentstatus="Pending",this.service.machinerydata.closureby="",this.service.machinerydata.closuredate=null,this.service.CreateUpdate().subscribe(t=>{"success"==t.status?(this.toast.success(t.key,"Success"),this.LoadOverdueList(),this.LoadDashboard(),this.visible=!1):this.toast.error(t.key,"Error")},t=>{this.toast.error(t,"Error")}))}static#e=this.\u0275fac=function(s){return new(s||i)(e.Y36(x.q),e.Y36(Z._W),e.Y36(f.h),e.Y36(y.K),e.Y36(T.D),e.Y36(M.$))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-machineryclosed"]],standalone:!0,features:[e.jDz],decls:6,vars:2,consts:[[3,"visible","fullScreen","visibleChange"],["pTemplate","header"],["pTemplate","content"],["pTemplate","footer"],[1,"page-title"],[1,"ms-auto","text-muted"],[1,"input-icon"],["type","text","placeholder","Search.....",1,"form-control",3,"ngModel","ngModelChange"],[1,"input-icon-addon"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","stroke-width","2","stroke","currentColor","fill","none","stroke-linecap","round","stroke-linejoin","round",1,"icon"],["stroke","none","d","M0 0h24v24H0z","fill","none"],["d","M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0"],["d","M21 21l-6 -6"],[1,"row","row-cards"],[1,"col-12"],[1,"card"],[1,"table-responsive"],["id","contentToConvert",1,"table","card-table","table-vcenter","datatable","table-sm","table-fixed"],[1,"text-center"],[1,"strong","text-center"],[1,"text-nowrap"],[3,"ngClass"],["type","button",1,"btn","btn-outline-info","btn-pill","strong",3,"click"],["class","strong text-center"],[1,"card-footer","d-flex","align-items-center"],[1,"m-0","strong"],["header","Closed Machinery",3,"visible","maximizable","visibleChange"],[1,"row","g-0"],[1,"col-12","col-lg-9","col-xl-9","border-end","card-body","scrollable",2,"height","35rem"],[1,"col-sm-12","col-md-12"],[1,"row","text-center"],[1,"col-md-3"],[1,"form-label"],[1,"col-md-6"],[1,"col-md-12"],["class","form-label",4,"ngIf"],["type","button","class","btn btn-outline-danger"],[1,"row"],[1,"col-md-12","card-body-scrollable",2,"height","20rem"],[1,"mb-3"],["class","table card-table table-vcenter datatable table-sm table-fixed cell-border"],[1,"col-12","col-lg-3","col-xl-3","d-flex","flex-column"],["type","button",1,"btn","btn-outline-danger",3,"click"],[1,"table","card-table","table-vcenter","datatable","table-sm","table-fixed","cell-border"],[1,"w-1"],[1,"strong"],[1,"text-nowrap","text-center"],["class","strong"],[1,"text-danger","text-center"],[1,"col-3"],[1,"card-header"],[1,"card-title"],[1,"card-body","p-0"],["width","250","height","250",3,"src","preview"],["class","text-center","target","_blank",3,"href"],["target","_blank",1,"text-center",3,"href"],["src","https://upload.wikimedia.org/wikipedia/commons/8/87/PDF_file_icon.svg","width","250","height","250"],["class","col-3"]],template:function(s,r){1&s&&(e.YNc(0,P,4,3),e.EqZ(1,0,b),e.YNc(3,j,41,21),e.EqZ(4,3,A)),2&s&&(e.xp6(1),e.cPc(1==r.service.closedvisible),e.xp6(3),e.cPc(1==r.visible))},dependencies:[o.ez,l.u5,h.l,p.$,u.O,v.A0,m.S]})}return i})()}}]);