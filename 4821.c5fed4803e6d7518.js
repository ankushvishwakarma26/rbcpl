"use strict";(self.webpackChunkintranet=self.webpackChunkintranet||[]).push([[4821],{4821:(L,u,a)=>{a.r(u),a.d(u,{FcrForm6Component:()=>B});var _=a(6814),l=a(6223),T=a(7248),p=a(9246),E=a(951),M=a(3519),v=a.n(M),D=a(739),e=a(9212),F=a(3716),x=a(5633),A=a(2425),O=a(4671),P=a(5219);function b(i,m){if(1&i&&e._uU(0),2&i){const t=e.oxw();e.hij("FCR Form 5- Delivery Information (",t.services.fcrdata.id,")")}}function U(i,m){1&i&&(e.TgZ(0,"div",6)(1,"h1",7),e._uU(2," You have already Filled FCR Form 5- Delivery Information "),e.qZA()())}function Z(i,m){1&i&&(e.TgZ(0,"div",22),e._uU(1,"Please Fill Actual Time of Arrival (ATA)"),e.qZA())}function I(i,m){if(1&i){const t=e.EpF();e.TgZ(0,"div",6)(1,"form",8,9),e.NdJ("ngSubmit",function(){e.CHM(t);const s=e.MAs(2),n=e.oxw(2);return e.KtG(s.form.valid&&n.submit(s))}),e.TgZ(3,"div",3),e._UZ(4,"input",10)(5,"div",11),e.TgZ(6,"div",12)(7,"div",13)(8,"label",14),e._uU(9,"Actual Time of Arrival (ATA)"),e.qZA(),e.TgZ(10,"input",15,16),e.NdJ("ngModelChange",function(s){e.CHM(t);const n=e.oxw(2);return e.KtG(n.services.fcrdata.form6atd=s)}),e.qZA(),e.YNc(12,Z,2,0,"div",17),e.qZA()()(),e._UZ(13,"br")(14,"br"),e.TgZ(15,"div",18)(16,"div",19)(17,"a",20),e.NdJ("click",function(){e.CHM(t);const s=e.oxw(2);return e.KtG(s.services.form5=!1)}),e._uU(18,"Cancel"),e.qZA(),e.TgZ(19,"button",21),e._uU(20,"Submit"),e.qZA()()()()()}if(2&i){const t=e.MAs(2),r=e.MAs(11),s=e.oxw(2);e.xp6(4),e.Q6J("value",s.services.fcrdata.id),e.xp6(6),e.Q6J("ngClass",r.invalid?"is-invalid":"is-valid mb-2")("ngModel",s.services.fcrdata.form6atd),e.xp6(2),e.Q6J("ngIf",r.invalid),e.xp6(7),e.Q6J("disabled",t.invalid)}}function R(i,m){if(1&i&&(e.TgZ(0,"div",3),e.YNc(1,U,3,0,"div",4)(2,I,21,5,"div",4),e._UZ(3,"hr",5),e.TgZ(4,"div",6),e._UZ(5,"app-fcr-form2"),e.qZA()()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null!=t.services.fcrdata.form6dts),e.xp6(1),e.Q6J("ngIf",null==t.services.fcrdata.form6dts)}}let B=(()=>{class i{constructor(t,r,s,n){this.services=t,this.userservice=r,this.toast=s,this.dservice=n,this.Toast=v().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:o=>{o.addEventListener("mouseenter",v().stopTimer),o.addEventListener("mouseleave",v().resumeTimer)}})}ngOnInit(){let t=new Date,r=t.getMonth(),s=t.getFullYear(),n=0===r?11:r-1,o=11===n?s-1:s,c=11===r?0:r+1,d=0===c?s+1:s;this.minDate=new Date,this.minDate.setMonth(n),this.minDate.setFullYear(o),this.maxDate=new Date,this.maxDate.setMonth(c),this.maxDate.setFullYear(d)}submit2(t){console.log(t),t.reset()}resetForm(t){t.form.reset(t.value)}submit(t){this.services.fcrdata.form6createdby=this.userservice.GetFullName(),this.services.fcrdata.form6dts=this.services.gettime(),this.services.fcrdata.approvalstatus="Pending";var r=this.services.fcrdata.form1dts,s=this.services.fcrdata.form3dts,n=this.services.fcrdata.form4dts,o=this.services.fcrdata.form5dts,c=this.services.fcrdata.form6dts,d=this.services.fcrdata.form7dts,h=this.services.fcrdata.form8dts,g=this.services.fcrdata.form9dts,C=this.services.fcrdata.form10dts;null!=C?this.services.fcrdata.status=9:null!=g?this.services.fcrdata.status=8:null!=h?this.services.fcrdata.status=7:null!=d?this.services.fcrdata.status=6:null!=c?this.services.fcrdata.status=5:null!=o?this.services.fcrdata.status=4:null!=n?this.services.fcrdata.status=3:null!=s&&(this.services.fcrdata.status=2),null!=r&&null!=s&&null!=n&&null!=o&&null!=c&&null!=d&&null!=h&&null!=g&&null!=C&&(this.services.fcrdata.approvalstatus="completed"),this.services.UpdateFCR().subscribe(f=>{this.services.form5=!1,this.Toast.fire({position:"top-end",icon:"success",title:this.services.fcrdata.id+" Submitted Successfully",showConfirmButton:!1,timer:3e3}),this.dservice.location=this.services.fcrdata.transportpoint,this.dservice.user=this.userservice.GetFullName(),this.dservice.UpdateDashboardReport().subscribe(K=>{this.services.fcrdata=new E.vJ,this.RefreshData()})},f=>{this.Toast.fire(500==f.status?{position:"top-end",icon:"error",title:"SQL Server Connection Error "+f,showConfirmButton:!1,timer:3e3}:{position:"top-end",icon:"error",title:f,showConfirmButton:!1,timer:3e3})})}ResetForm(t){t.reset()}RefreshData(){this.services.GetFCRList(1,10,"","").subscribe(t=>{this.services.fcrlist=t.data})}static#e=this.\u0275fac=function(r){return new(r||i)(e.Y36(F.J),e.Y36(x.K),e.Y36(A._W),e.Y36(O.s))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-fcr-form6"]],standalone:!0,features:[e.jDz],decls:3,vars:2,consts:[[3,"visible","fullScreen","visibleChange"],["pTemplate","header"],["pTemplate","content"],[1,"row","row-cards"],["class","col-12",4,"ngIf"],[2,"border-top","2px dashed red","border-radius","1px"],[1,"col-12"],[1,"strong","text-danger","text-center"],["autocomplete","off",3,"ngSubmit"],["myForm5","ngForm"],["type","hidden","name","id",3,"value"],[1,"col-sm-12","col-md-9"],[1,"col-sm-12","col-md-3"],[1,"mb-3"],[1,"form-label"],["type","date","required","","min","2023-04-01","name","form6atd","placeholder","ATD",1,"form-control",3,"ngClass","ngModel","ngModelChange"],["form6atd","ngModel"],["class","invalid-feedback strong",4,"ngIf"],[1,"card-footer","text-end"],[1,"d-flex"],[1,"btn","btn-link",3,"click"],["type","submit",1,"btn","btn-primary","ms-auto",3,"disabled"],[1,"invalid-feedback","strong"]],template:function(r,s){1&r&&(e.TgZ(0,"p-sidebar",0),e.NdJ("visibleChange",function(o){return s.services.form5=o}),e.YNc(1,b,1,1,"ng-template",1)(2,R,6,2,"ng-template",2),e.qZA()),2&r&&e.Q6J("visible",s.services.form5)("fullScreen",!0)},dependencies:[_.ez,_.mk,_.O5,l.u5,l._Y,l.Fj,l.JJ,l.JL,l.Q7,l.On,l.F,p.l,p.Y,P.jx,T.$,D.a]})}return i})()}}]);