"use strict";(self.webpackChunkintranet=self.webpackChunkintranet||[]).push([[4607],{4607:(R,h,o)=>{o.r(h),o.d(h,{FcrForm10Component:()=>y});var _=o(6814),c=o(6223),M=o(7248),C=o(9246),T=o(951),Z=o(3519),p=o.n(Z),F=o(739),e=o(9212),x=o(3716),A=o(5633),b=o(2425),E=o(4671),U=o(5219);function O(i,m){if(1&i&&e._uU(0),2&i){const r=e.oxw();e.hij("FCR Form 9 - Closure (",r.services.fcrdata.id,")")}}function P(i,m){1&i&&(e.TgZ(0,"div",5)(1,"h1",39),e._uU(2," You have already Filled FCR Form 9 - Closure "),e.qZA()())}function D(i,m){1&i&&(e.TgZ(0,"div",40),e._uU(1,"Please Fill Form-7 Local Freight Voucher No"),e.qZA())}function J(i,m){1&i&&(e.TgZ(0,"div",40),e._uU(1,"Please Fill Form-3 Local Freight Amount"),e.qZA())}function q(i,m){1&i&&(e.TgZ(0,"div",40),e._uU(1,"Please Fill Form-8 RTC Freight Voucher No"),e.qZA())}function N(i,m){1&i&&(e.TgZ(0,"div",40),e._uU(1,"Please Fill Form-4 RTC Freight Amount"),e.qZA())}function K(i,m){if(1&i){const r=e.EpF();e.TgZ(0,"div",3),e.YNc(1,P,3,0,"div",4),e.TgZ(2,"div",5)(3,"form",6,7),e.NdJ("ngSubmit",function(){e.CHM(r);const s=e.MAs(4),a=e.oxw();return e.KtG(s.form.valid&&a.submit(s))}),e.TgZ(5,"div",3),e._UZ(6,"input",8),e.TgZ(7,"div",9)(8,"div",10)(9,"label",11),e._uU(10,"Total Weight : "),e.qZA()()(),e.TgZ(11,"div",9)(12,"div",10)(13,"label",11),e._uU(14),e.qZA()()(),e.TgZ(15,"div",9)(16,"div",10)(17,"label",11),e._uU(18,"Total Invoice Amount : "),e.qZA()()(),e.TgZ(19,"div",9)(20,"div",10)(21,"label",11),e._uU(22),e.qZA()()(),e.TgZ(23,"div",9)(24,"div",10)(25,"label",11),e._uU(26,"Total Amount : "),e.qZA()()(),e.TgZ(27,"div",9)(28,"div",10)(29,"label",11),e._uU(30),e.ALo(31,"percent"),e.ALo(32,"currency"),e.qZA()()(),e._UZ(33,"hr"),e.TgZ(34,"div",12)(35,"div",10)(36,"label",13),e._uU(37,"Voucher No :"),e.qZA(),e.TgZ(38,"input",14,15),e.NdJ("ngModelChange",function(s){e.CHM(r);const a=e.oxw();return e.KtG(a.services.fcrdata.voucherno=s)}),e.qZA(),e.YNc(40,D,2,0,"div",16),e.qZA()(),e.TgZ(41,"div",12)(42,"div",10)(43,"label",13),e._uU(44,"Local Freight"),e.qZA(),e.TgZ(45,"input",17,18),e.NdJ("ngModelChange",function(s){e.CHM(r);const a=e.oxw();return e.KtG(a.services.fcrdata.localfreightamount=s)}),e.qZA(),e.YNc(47,J,2,0,"div",16),e.qZA()(),e.TgZ(48,"div",12)(49,"div",10)(50,"label",13),e._uU(51,"RTC Freight Voucher No"),e.qZA(),e.TgZ(52,"input",19,20),e.NdJ("ngModelChange",function(s){e.CHM(r);const a=e.oxw();return e.KtG(a.services.fcrdata.form9voucherno=s)}),e.qZA(),e.YNc(54,q,2,0,"div",16),e.qZA()(),e.TgZ(55,"div",12)(56,"div",10)(57,"label",13),e._uU(58,"RTC Freight Amount"),e.qZA(),e.TgZ(59,"input",21,22),e.NdJ("ngModelChange",function(s){e.CHM(r);const a=e.oxw();return e.KtG(a.services.fcrdata.freightvalue=s)}),e.qZA(),e.YNc(61,N,2,0,"div",16),e.qZA()(),e.TgZ(62,"div",23)(63,"div",10)(64,"label",13),e._uU(65,"Delivery Cost Voucher No"),e.qZA(),e.TgZ(66,"input",24,25),e.NdJ("ngModelChange",function(s){e.CHM(r);const a=e.oxw();return e.KtG(a.services.fcrdata.expensesname=s)}),e.qZA()()(),e.TgZ(68,"div",23)(69,"div",10)(70,"label",13),e._uU(71,"Delivery Cost Amount"),e.qZA(),e.TgZ(72,"input",26,27),e.NdJ("ngModelChange",function(s){e.CHM(r);const a=e.oxw();return e.KtG(a.services.fcrdata.amount=s)}),e.qZA()()(),e.TgZ(74,"div",23)(75,"div",10)(76,"label",11),e._uU(77,"Expenses Name with Voucher No (Optional)"),e.qZA(),e.TgZ(78,"input",28,29),e.NdJ("ngModelChange",function(s){e.CHM(r);const a=e.oxw();return e.KtG(a.services.fcrdata.expensesname1=s)}),e.qZA()()(),e.TgZ(80,"div",23)(81,"div",10)(82,"label",11),e._uU(83,"Expenses Amount (Optional)"),e.qZA(),e.TgZ(84,"input",30,31),e.NdJ("ngModelChange",function(s){e.CHM(r);const a=e.oxw();return e.KtG(a.services.fcrdata.amount1=s)}),e.qZA()()(),e.TgZ(86,"div",32),e._UZ(87,"div",10),e.qZA(),e.TgZ(88,"div",32),e._UZ(89,"div",10),e.qZA(),e.TgZ(90,"div",32)(91,"div",10)(92,"label",13),e._uU(93,"Total Cost (%)"),e.qZA(),e.TgZ(94,"span",33),e._uU(95),e.ALo(96,"percent"),e.qZA()()()(),e._UZ(97,"br")(98,"br"),e.TgZ(99,"div",34)(100,"div",35)(101,"a",36),e.NdJ("click",function(){e.CHM(r);const s=e.oxw();return e.KtG(s.services.form9=!1)}),e._uU(102,"Cancel"),e.qZA(),e.TgZ(103,"button",37),e._uU(104,"Submit"),e.qZA()()()()(),e._UZ(105,"hr",38),e.TgZ(106,"div",5),e._UZ(107,"app-fcr-form2"),e.qZA()()}if(2&i){const r=e.MAs(4),n=e.MAs(39),s=e.MAs(46),a=e.MAs(53),l=e.MAs(60),v=e.MAs(67),d=e.MAs(73),u=e.MAs(79),f=e.MAs(85),t=e.oxw();e.xp6(1),e.Q6J("ngIf",null!=t.services.fcrdata.form10dts),e.xp6(5),e.Q6J("value",t.services.fcrdata.id),e.xp6(8),e.hij("",t.services.fcrdata.estimatedweight," KG"),e.xp6(8),e.Oqu(t.services.fcrdata.invoiceamount),e.xp6(8),e.lnq("",t.services.fcrdata.localfreightamount+t.services.fcrdata.freightvalue+t.services.fcrdata.amount+t.services.fcrdata.amount1," (",e.xi3(31,30,(t.services.fcrdata.localfreightamount+t.services.fcrdata.freightvalue+t.services.fcrdata.amount+t.services.fcrdata.amount1)/t.services.fcrdata.invoiceamount,"1.2-2"),") Freight Per KG(",e.xi3(32,33,t.services.fcrdata.totalcost/t.services.fcrdata.estimatedweight,"INR"),"/KG)"),e.xp6(8),e.Q6J("ngClass",n.invalid?"is-invalid":"is-valid mb-2")("ngModel",t.services.fcrdata.voucherno),e.xp6(2),e.Q6J("ngIf",n.invalid),e.xp6(5),e.Q6J("ngClass",s.invalid?"is-invalid":"is-valid mb-2")("ngModel",t.services.fcrdata.localfreightamount),e.xp6(2),e.Q6J("ngIf",s.invalid),e.xp6(5),e.Q6J("ngClass",a.invalid?"is-invalid":"is-valid mb-2")("ngModel",t.services.fcrdata.form9voucherno),e.xp6(2),e.Q6J("ngIf",a.invalid),e.xp6(5),e.Q6J("ngClass",l.invalid?"is-invalid":"is-valid mb-2")("ngModel",t.services.fcrdata.freightvalue),e.xp6(2),e.Q6J("ngIf",l.invalid),e.xp6(5),e.Q6J("ngClass",v.invalid?"is-invalid":"is-valid mb-2")("ngModel",t.services.fcrdata.expensesname),e.xp6(6),e.Q6J("ngClass",d.invalid?"is-invalid":"is-valid mb-2")("ngModel",t.services.fcrdata.amount),e.xp6(6),e.Q6J("ngClass",u.invalid?"is-invalid":"is-valid mb-2")("ngModel",t.services.fcrdata.expensesname1),e.xp6(6),e.Q6J("ngClass",f.invalid?"is-invalid":"is-valid mb-2")("ngModel",t.services.fcrdata.amount1),e.xp6(11),e.AsE(" ",t.services.fcrdata.localfreightamount+t.services.fcrdata.freightvalue+t.services.fcrdata.amount+t.services.fcrdata.amount1," (",e.xi3(96,36,(t.services.fcrdata.localfreightamount+t.services.fcrdata.freightvalue+t.services.fcrdata.amount+t.services.fcrdata.amount1)/t.services.fcrdata.invoiceamount,"1.2-2"),") "),e.xp6(8),e.Q6J("disabled",r.invalid)}}let y=(()=>{class i{constructor(r,n,s,a){this.services=r,this.userservice=n,this.toast=s,this.dservice=a,this.Toast=p().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:l=>{l.addEventListener("mouseenter",p().stopTimer),l.addEventListener("mouseleave",p().resumeTimer)}})}ngOnInit(){}submit2(r){console.log(r),r.reset()}resetForm(r){r.form.reset(r.value)}updatetotalcost(){var d=parseFloat(null==this.services.fcrdata.localfreightamount?0:this.services.fcrdata.localfreightamount)+parseFloat(null==this.services.fcrdata.freightvalue?0:this.services.fcrdata.freightvalue)+parseFloat(null==this.services.fcrdata.amount?0:this.services.fcrdata.amount)+parseFloat(null==this.services.fcrdata.amount1?0:this.services.fcrdata.amount1)+parseFloat(null==this.services.fcrdata.deliverycost?0:this.services.fcrdata.deliverycost),u=d/parseFloat(null==this.services.fcrdata.invoiceamount?0:this.services.fcrdata.invoiceamount);this.services.fcrdata.totalcost=d,this.services.fcrdata.totalcostpercent=u.toFixed(2)}submit(r){this.services.fcrdata.form10createdby=this.userservice.GetFullName(),this.services.fcrdata.form10dts=this.services.gettime(),this.services.fcrdata.approvalstatus="Pending";var n=this.services.fcrdata.form1dts,s=this.services.fcrdata.form3dts,a=this.services.fcrdata.form4dts,l=this.services.fcrdata.form5dts,v=this.services.fcrdata.form6dts,d=this.services.fcrdata.form7dts,u=this.services.fcrdata.form8dts,f=this.services.fcrdata.form9dts,t=this.services.fcrdata.form10dts;null!=t?this.services.fcrdata.status=9:null!=f?this.services.fcrdata.status=8:null!=u?this.services.fcrdata.status=7:null!=d?this.services.fcrdata.status=6:null!=v?this.services.fcrdata.status=5:null!=l?this.services.fcrdata.status=4:null!=a?this.services.fcrdata.status=3:null!=s&&(this.services.fcrdata.status=2),null!=n&&null!=s&&null!=a&&null!=l&&null!=v&&null!=d&&null!=u&&null!=f&&null!=t&&(this.services.fcrdata.approvalstatus="completed"),this.services.UpdateFCR().subscribe(g=>{this.services.form9=!1,this.Toast.fire({position:"top-end",icon:"success",title:this.services.fcrdata.id+" Submitted Successfully",showConfirmButton:!1,timer:3e3}),this.dservice.location=this.services.fcrdata.transportpoint,this.dservice.user=this.userservice.GetFullName(),this.dservice.UpdateDashboardReport().subscribe(L=>{this.services.fcrdata=new T.vJ,this.RefreshData()})},g=>{this.Toast.fire(500==g.status?{position:"top-end",icon:"error",title:"SQL Server Connection Error "+g,showConfirmButton:!1,timer:3e3}:{position:"top-end",icon:"error",title:g,showConfirmButton:!1,timer:3e3})})}ResetForm(r){r.reset()}RefreshData(){this.services.GetFCRList(1,10,"","").subscribe(r=>{this.services.fcrlist=r.data})}static#e=this.\u0275fac=function(n){return new(n||i)(e.Y36(x.J),e.Y36(A.K),e.Y36(b._W),e.Y36(E.s))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-fcr-form10"]],standalone:!0,features:[e.jDz],decls:3,vars:2,consts:[[3,"visible","fullScreen","visibleChange"],["pTemplate","header"],["pTemplate","content"],[1,"row","row-cards"],["class","col-12",4,"ngIf"],[1,"col-12"],["autocomplete","off",3,"ngSubmit"],["myForm9","ngForm"],["type","hidden","name","id",3,"value"],[1,"col-sm-12","col-md-2"],[1,"mb-3"],[1,"form-label"],[1,"col-sm-12","col-md-6"],[1,"form-label","required"],["type","text","required","","name","voucherno","placeholder","Voucher No","readonly","",1,"form-control",3,"ngClass","ngModel","ngModelChange"],["voucherno","ngModel"],["class","invalid-feedback",4,"ngIf"],["type","number","required","","name","localfreightamount","placeholder","Local Freight","readonly","",1,"form-control",3,"ngClass","ngModel","ngModelChange"],["localfreightamount","ngModel"],["type","text","required","","name","form9voucherno","placeholder","Voucher No","readonly","",1,"form-control",3,"ngClass","ngModel","ngModelChange"],["form9voucherno","ngModel"],["type","number","required","","name","freightvalue","placeholder","Freight Value","readonly","",1,"form-control",3,"ngClass","ngModel","ngModelChange"],["freightvalue","ngModel"],[1,"col-sm-12","col-md-3"],["type","text","name","expensesname","placeholder","Expenses Name",1,"form-control",3,"ngClass","ngModel","ngModelChange"],["expensesname","ngModel"],["type","number","name","amount","placeholder","Expenses Amount",1,"form-control",3,"ngClass","ngModel","ngModelChange"],["amount","ngModel"],["type","text","name","expensesname1","placeholder","Expenses Name",1,"form-control",3,"ngClass","ngModel","ngModelChange"],["expensesname1","ngModel"],["type","number","name","amount1","placeholder","Expenses Amount",1,"form-control",3,"ngClass","ngModel","ngModelChange"],["amount1","ngModel"],[1,"col-sm-12","col-md-4"],[1,"strong"],[1,"card-footer","text-end"],[1,"d-flex"],[1,"btn","btn-link",3,"click"],["type","submit",1,"btn","btn-primary","ms-auto",3,"disabled"],[2,"border-top","2px dashed red","border-radius","1px"],[1,"strong","text-danger","text-center"],[1,"invalid-feedback"]],template:function(n,s){1&n&&(e.TgZ(0,"p-sidebar",0),e.NdJ("visibleChange",function(l){return s.services.form9=l}),e.YNc(1,O,1,1,"ng-template",1)(2,K,108,39,"ng-template",2),e.qZA()),2&n&&e.Q6J("visible",s.services.form9)("fullScreen",!0)},dependencies:[_.ez,_.mk,_.O5,_.Zx,_.H9,c.u5,c._Y,c.Fj,c.wV,c.JJ,c.JL,c.Q7,c.On,c.F,C.l,C.Y,U.jx,M.$,F.a]})}return i})()}}]);