"use strict";(self.webpackChunkintranet=self.webpackChunkintranet||[]).push([[2399],{7372:(y,m,n)=>{n.d(m,{w:()=>T});var u=n(9212),p=n(9862),t=n(2425),v=n(5633),f=n(5218);let T=(()=>{class _{constructor(r,s,h,g){this.http=r,this.toast=s,this.service=h,this.sort=g,this.progressinvoice=!1,this.parthurl="http://10.10.9.190:1111/api/",this.erpurl="http://103.59.180.17:1112/api/ERP/"}viewinvoice(r){this.progressinvoice=!0,this.dmsdocument=null,this.documentname="View Invoice",this.GetDMSDocumentbyid(r).subscribe(s=>{"success"==s.status?window.open("http://103.59.180.17:1114/FTP DATA/"+s.invoice.filepath,"_blank"):(this.toast.error(s.message,"Error"),this.dmsdocument=null)})}closepdf(){this.invoice=!1,this.dmsdocument=null}GetTodayscall(r){return this.http.get(this.parthurl+"Parth?user="+r)}GetAllcall(r,s,h){return this.http.get(""!=h?this.parthurl+"Parth/AllRecording?start="+r+"&end="+s+"&user="+h:this.parthurl+"Parth/AllRecording?start="+r+"&end="+s)}GetUser(){return this.http.get(this.parthurl+"Parth/GetUser")}Recordingbycontact(r,s){return this.http.get(this.parthurl+"Parth/Recordingbycontact?contact1="+r+"&contact2="+s)}GetRecordingbyid(r){return this.http.get(this.parthurl+"Parth/GetRecordingbyid?id="+r)}GetRecordingbyactivity(r,s,h){return this.http.get(this.parthurl+"Parth/GetRecordingbyactivity?contact1="+r+"&contact2="+s+"&date="+h)}GetRecordingbytime(r,s){return this.http.get(""!=this.sort.orderby&&""!=this.sort.sortby?this.parthurl+"Parth/GetRecordingbytime?user="+r+"&date="+s+"&orderby="+this.sort.orderby+"&sortby="+this.sort.sortby:this.parthurl+"Parth/GetRecordingbytime?user="+r+"&date="+s)}GetRecordingbyday(r,s){return this.http.get(""!=this.sort.orderby&&""!=this.sort.sortby?this.parthurl+"Parth/GetRecordingbyday?user="+r+"&date="+s+"&orderby="+this.sort.orderby+"&sortby="+this.sort.sortby:this.parthurl+"Parth/GetRecordingbyday?user="+r+"&date="+s)}GetAudio(r){return this.http.get(this.parthurl+"Parth/GetAudio?filePath="+r)}Getdealbyid(r){return this.http.get(this.erpurl+"GetDealbyDealNoforDPL/"+r)}GetDealbyOrderid(r){return this.http.get(this.erpurl+"GetDealbyOrderNoforDPL/"+r)}GetInvoicelistbyaccode(r){return this.http.get(this.erpurl+"GetInvoicebyaccode/"+r)}GetInvoicebyinvoiceid(r){return this.http.get(this.erpurl+"GetInvoicebyId/"+r)}GetInvoicebyOrderno(r){return this.http.get(this.erpurl+"GetInvoicebyorderno/"+r)}GetOrderDetailsbyId(r){return this.http.get(this.erpurl+"GetOrderDetailsbyId/"+r)}GetOrderDetailsbyaccode(r){return this.http.get(this.erpurl+"GetOrderDetailsbyaccode/"+r)}GetDMSDocumentbyid(r){return this.http.get(this.erpurl+"GetDMSDocumentbyid/"+r)}ItemSearch(r){return this.http.get(""!=r?this.erpurl+"ItemSearch?Search="+r:this.erpurl+"ItemSearch")}GetCRMActivityReport(r,s,h,g){return this.http.get(""!=h?this.erpurl+"GetCRMActivityReport?startdate="+r+"&enddate="+s+"&user="+h+"&condition="+g:this.erpurl+"GetCRMActivityReport?startdate="+r+"&enddate="+s+"&condition="+g)}GetCRMActivitydaywise(r,s,h){return this.http.get(this.erpurl+"GetCRMActivitydaywise?startdate="+r+"&enddate="+s+"&user="+h)}GetCRMOrderbyid(r){return this.http.get(this.erpurl+"GetCRMOrderbyid/"+r)}GetInvoiceData(r){return this.http.get(this.erpurl+"GetInvoiceData/"+r)}static#t=this.\u0275fac=function(s){return new(s||_)(u.LFG(p.eN),u.LFG(t._W),u.LFG(v.K),u.LFG(f.K))};static#e=this.\u0275prov=u.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"})}return _})()},2399:(y,m,n)=>{n.r(m),n.d(m,{ParthComponent:()=>M});var u=n(6814),p=n(6223),t=n(9212),v=n(7372),f=n(2425),T=n(266),_=n(5633);function A(a,c){if(1&a&&(t.TgZ(0,"option",36),t._uU(1),t.qZA()),2&a){const e=c.$implicit;t.s9C("value",e.AGENT_ID),t.xp6(1),t.Oqu(e.AGENT_ID)}}function r(a,c){if(1&a){const e=t.EpF();t.TgZ(0,"div",3)(1,"select",8),t.NdJ("ngModelChange",function(i){t.CHM(e);const l=t.oxw();return t.KtG(l.user=i)})("change",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.Loadlist())}),t.YNc(2,A,2,2,"option",35),t.qZA()()}if(2&a){const e=t.oxw();t.xp6(1),t.Q6J("ngModel",e.user),t.xp6(1),t.Q6J("ngForOf",e.userlist)}}function s(a,c){1&a&&(t.TgZ(0,"button",37),t._UZ(1,"span",38),t._uU(2," \xa0\xa0Loading... "),t.qZA())}function h(a,c){if(1&a&&(t.TgZ(0,"audio",39),t._UZ(1,"source",40),t._uU(2," Your browser does not support the audio element. "),t.qZA()),2&a){const e=t.oxw();t.xp6(1),t.Q6J("src",e.audiofile,t.LSH)}}function g(a,c){if(1&a&&(t.TgZ(0,"div",41)(1,"div"),t._uU(2),t.ALo(3,"date"),t.ALo(4,"date"),t.qZA(),t.TgZ(5,"div"),t._uU(6),t.qZA()()),2&a){const e=t.oxw();t.xp6(2),t.lnq("From ",t.xi3(3,6,e.filepath.ivrS_HIT_TIME,"dd/MM/yy hh:mm a")," To ",t.xi3(4,9,e.filepath.ivrS_DISSCONNET_TIME,"dd/MM/yy hh:mm a"),"(",e.filepath.ivR_CALL_DURATION,")"),t.xp6(4),t.lnq(" at ",e.filepath.callerid," (",e.filepath.calL_STATUS,") (","MAMTA"==e.filepath.agenT_ID?"Kavita":e.filepath.agenT_ID,")")}}function b(a,c){1&a&&(t.TgZ(0,"div",42)(1,"div",19),t._UZ(2,"div",43),t.TgZ(3,"div",44),t._uU(4,"Loading Data......."),t.qZA(),t.TgZ(5,"div",45),t._UZ(6,"div",46),t.qZA()()())}function Z(a,c){if(1&a){const e=t.EpF();t.TgZ(0,"tr",50)(1,"td",51),t._uU(2),t.qZA(),t.TgZ(3,"td",52)(4,"div",53)(5,"div",54)(6,"div",55),t._uU(7),t.qZA()()()(),t.TgZ(8,"td",56)(9,"div"),t._uU(10),t.qZA()(),t.TgZ(11,"td",56)(12,"div"),t._uU(13),t.ALo(14,"date"),t.qZA()(),t.TgZ(15,"td",56)(16,"div"),t._uU(17),t.ALo(18,"date"),t.qZA()(),t.TgZ(19,"td",56)(20,"div"),t._uU(21),t.qZA()(),t.TgZ(22,"td",56)(23,"div"),t._uU(24),t.qZA()(),t.TgZ(25,"td",56)(26,"div"),t._uU(27),t.qZA()(),t.TgZ(28,"td",56)(29,"div")(30,"button",57),t.NdJ("click",function(){const l=t.CHM(e).$implicit,d=t.oxw(2);return t.KtG(d.GetAudiofile(l.folderPath+l.voicefile,l))}),t._uU(31,"Play"),t.qZA()()()()}if(2&a){const e=c.$implicit,o=c.index;t.Q6J("ngClass","ANSWER"==e.calL_STATUS||"IVRS"==e.calL_STATUS?"text-success":"BUSY"==e.calL_STATUS||"ABANDON"==e.calL_STATUS?"text-danger":""),t.xp6(2),t.Oqu(o+1),t.xp6(5),t.Oqu(e.callerid),t.xp6(3),t.Oqu(e.calL_TYPE),t.xp6(3),t.Oqu(t.xi3(14,9,e.ivrS_HIT_TIME,"dd-MMM-yyyy hh:mm a")),t.xp6(4),t.Oqu(t.xi3(18,12,e.ivrS_DISSCONNET_TIME,"dd-MMM-yyyy hh:mm a")),t.xp6(4),t.Oqu(e.ivR_CALL_DURATION),t.xp6(3),t.Oqu(e.calL_STATUS),t.xp6(3),t.Oqu("MAMTA"==e.agenT_ID?"Kavita":e.agenT_ID)}}function C(a,c){if(1&a&&(t.TgZ(0,"table",47)(1,"thead")(2,"tr")(3,"th",48),t._uU(4,"S.No."),t.qZA(),t.TgZ(5,"th",48),t._uU(6,"Contact"),t.qZA(),t.TgZ(7,"th",19),t._uU(8,"Call Type"),t.qZA(),t.TgZ(9,"th",19),t._uU(10,"StartTime"),t.qZA(),t.TgZ(11,"th",19),t._uU(12,"End Time"),t.qZA(),t.TgZ(13,"th",19),t._uU(14,"Duration"),t.qZA(),t.TgZ(15,"th",19),t._uU(16,"Status"),t.qZA(),t.TgZ(17,"th",19),t._uU(18,"User"),t.qZA(),t.TgZ(19,"th",19),t._uU(20,"Audio"),t.qZA()()(),t.TgZ(21,"tbody"),t.YNc(22,Z,32,15,"tr",49),t.qZA()()),2&a){const e=t.oxw();t.xp6(22),t.Q6J("ngForOf",e.calllist)}}let M=(()=>{class a{constructor(e,o,i,l,d){this.service=e,this.toast=o,this.datePipe=i,this.route=l,this.userservice=d,this.isadmin=!1,this.audioenable=!1,this.audioloader=!1,this.playbutton="Play",this.startdate="",this.enddate="",this.user="mamta",this.reports=1,this.loader=!1,this.searchvalue="",this.p=1,this.total=0,this.frompage=1,this.topage=100,this.average=0}ngOnInit(){var e=window.location.pathname,o=window.location.href,d=window.location.href.substring(0,o.length-e.length);this.service.GetUser().subscribe(U=>{this.userlist=U}),"Admin"==this.userservice.GetRole()||"Director"==this.userservice.GetRole()||"SalesPC"==this.userservice.GetRole()?this.isadmin=!0:"scp1@desmat.com"==this.userservice.GetUserName()?this.user="mamta":"scp2@desmat.com"==this.userservice.GetUserName()?this.user="tamanna":"scp3@desmat.com"==this.userservice.GetUserName()?this.user="crm2":"osr1@desmat.com"==this.userservice.GetUserName()?this.user="virender":"warehouse.f1.desmat@gmail.com"==this.userservice.GetUserName()?this.user="rajesh":"crm1@desmat.com"==this.userservice.GetUserName()?this.user="crm1":"crm5@desmat.com"==this.userservice.GetUserName()?this.user="crm5":"crm4@desmat.com"==this.userservice.GetUserName()&&(this.user="crm4"),"http://10.10.9.190:1010"==d||"http://localhost:4200"==d?this.Loadlist():(this.toast.error("You are on Cloud Network so Parth cannot be access on Cloud Network so Switch to Local Network to Access","Error"),this.route.navigate(["/calldata"]))}Loadlist(){if(2==this.reports&&""==this.startdate&&""==this.enddate){var e=new Date,o=new Date;this.startdate=this.datePipe.transform(e.setDate(e.getDate()-2),"yyyy-MM-dd"),this.enddate=this.datePipe.transform(o.setDate(o.getDate()),"yyyy-MM-dd")}this.GetCall()}GetAudiofile(e,o){this.audiofile="",this.audioloader=!0,this.audioenable=!1,this.service.GetAudio(e).subscribe(i=>{"success"==i.status?(this.audioenable=!0,this.audioloader=!1,0==i.data.length?this.toast.error("No Data Found","Error"):(this.audiofile="data:audio/wav;base64,"+i.data,this.filepath=o)):this.toast.error(i.message,"Error"),this.playbutton="Play"},i=>{this.toast.error(i,"Error"),this.playbutton="Play"})}GetCall(){this.loader=!0,1==this.reports?this.service.GetTodayscall(this.user).subscribe(e=>{this.loader=!1,console.log(e),this.calllist=e,this.frompage=1,this.topage=e.length,this.total=this.topage,this.Calculation()},e=>{this.toast.error(e,"Error")}):2==this.reports&&this.service.GetAllcall(this.startdate,this.enddate,this.user).subscribe(e=>{this.loader=!1,console.log(e),this.calllist=e,this.frompage=1,this.topage=e.length,this.total=this.topage,this.Calculation()},e=>{this.toast.error(e,"Error")})}Calculation(){this.calllist.forEach(o=>{o.ivR_CALL_DURATION&&(this.average+=new Date("0001-01-01T"+o.ivR_CALL_DURATION))})}static#t=this.\u0275fac=function(o){return new(o||a)(t.Y36(v.w),t.Y36(f._W),t.Y36(u.uU),t.Y36(T.F0),t.Y36(_.K))};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["app-parth"]],standalone:!0,features:[t.jDz],decls:55,vars:14,consts:[[1,"page-header","d-print-none"],[1,"container-xl"],[1,"row","g-2","align-items-center"],[1,"col-md-2"],[1,"page-title"],["type","date",1,"form-control",3,"ngModel","ngModelChange","change"],["class","col-md-2",4,"ngIf"],[3,"ngClass"],["type","text",1,"form-select",3,"ngModel","ngModelChange","change"],["value","1"],["value","2"],[1,"page-body"],[1,"col-12"],[1,"card"],[1,"card-body","border-bottom","py-3"],[1,"d-flex"],[1,"text-muted"],[1,"card-title"],[1,"ms-auto","text-muted"],[1,"text-center"],["class","btn btn-primary",4,"ngIf"],["controls","","autoplay","",4,"ngIf"],["class","ms-auto strong text-center",4,"ngIf"],[1,"input-icon"],["type","text","placeholder","Search.....",1,"form-control",3,"ngModel","ngModelChange"],[1,"input-icon-addon"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","stroke-width","2","stroke","currentColor","fill","none","stroke-linecap","round","stroke-linejoin","round",1,"icon"],["stroke","none","d","M0 0h24v24H0z","fill","none"],["d","M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0"],["d","M21 21l-6 -6"],[1,"table-responsive",2,"height","27rem"],["class","page-center container container-slim py-4",4,"ngIf"],["class","table card-table table-vcenter datatable table-sm table-fixed",4,"ngIf"],[1,"card-footer","d-flex","align-items-center"],[1,"m-0","text-muted"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"btn","btn-primary"],[1,"spinner-border","spinner-border-sm"],["controls","","autoplay",""],["type","audio/wav",3,"src"],[1,"ms-auto","strong","text-center"],[1,"page-center","container","container-slim","py-4"],[1,"mb-3"],[1,"text-muted","mb-3"],[1,"progress","progress-sm"],[1,"progress-bar","progress-bar-indeterminate"],[1,"table","card-table","table-vcenter","datatable","table-sm","table-fixed"],[1,"w-1"],["class","text-center strong",3,"ngClass",4,"ngFor","ngForOf"],[1,"text-center","strong",3,"ngClass"],["scope","row"],[1,"sort-name","text-nowrap"],[1,"d-flex","py-1","align-items-center"],[1,"flex-fill"],[1,"font-weight-medium"],[1,"text-nowrap"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(o,i){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),t._uU(5," Parth Recording "),t.qZA()(),t.TgZ(6,"div",3)(7,"input",5),t.NdJ("ngModelChange",function(d){return i.startdate=d})("change",function(){return i.Loadlist()}),t.qZA()(),t.TgZ(8,"div",3)(9,"input",5),t.NdJ("ngModelChange",function(d){return i.enddate=d})("change",function(){return i.Loadlist()}),t.qZA()(),t.YNc(10,r,3,2,"div",6),t._UZ(11,"div",7),t.TgZ(12,"div",3)(13,"select",8),t.NdJ("ngModelChange",function(d){return i.reports=d})("change",function(){return i.Loadlist()}),t.TgZ(14,"option",9),t._uU(15,"Today's Calls"),t.qZA(),t.TgZ(16,"option",10),t._uU(17,"All Calls"),t.qZA()()()()()(),t.TgZ(18,"div",11)(19,"div",1)(20,"div",12)(21,"div",13)(22,"div",14)(23,"div",15)(24,"div",16)(25,"h2",17),t._uU(26,"Users "),t.qZA()(),t.TgZ(27,"div",18)(28,"div",19),t.YNc(29,s,3,0,"button",20)(30,h,3,1,"audio",21),t.qZA()(),t.YNc(31,g,7,12,"div",22),t.TgZ(32,"div",18)(33,"div",23)(34,"input",24),t.NdJ("ngModelChange",function(d){return i.searchvalue=d}),t.qZA(),t.TgZ(35,"span",25),t.O4$(),t.TgZ(36,"svg",26),t._UZ(37,"path",27)(38,"path",28)(39,"path",29),t.qZA()()()()()(),t.kcU(),t.TgZ(40,"div",30),t.YNc(41,b,7,0,"div",31)(42,C,23,1,"table",32),t.qZA(),t.TgZ(43,"div",33)(44,"p",34),t._uU(45,"Showing "),t.TgZ(46,"span"),t._uU(47),t.qZA(),t._uU(48," to "),t.TgZ(49,"span"),t._uU(50),t.qZA(),t._uU(51," of "),t.TgZ(52,"span"),t._uU(53),t.qZA(),t._uU(54," entries"),t.qZA()()()()()()),2&o&&(t.xp6(7),t.Q6J("ngModel",i.startdate),t.xp6(2),t.Q6J("ngModel",i.enddate),t.xp6(1),t.Q6J("ngIf",i.isadmin),t.xp6(1),t.Q6J("ngClass",i.isadmin?"col-md-2":"col-md-4"),t.xp6(2),t.Q6J("ngModel",i.reports),t.xp6(16),t.Q6J("ngIf",i.audioloader),t.xp6(1),t.Q6J("ngIf",i.audioenable),t.xp6(1),t.Q6J("ngIf",i.filepath),t.xp6(3),t.Q6J("ngModel",i.searchvalue),t.xp6(7),t.Q6J("ngIf",i.loader),t.xp6(1),t.Q6J("ngIf",!i.loader),t.xp6(5),t.Oqu(i.frompage),t.xp6(3),t.Oqu(i.topage),t.xp6(3),t.Oqu(i.total))},dependencies:[u.ez,u.mk,u.sg,u.O5,u.uU,p.u5,p.YN,p.Kr,p.Fj,p.EJ,p.JJ,p.On]})}return a})()}}]);