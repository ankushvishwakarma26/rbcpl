"use strict";(self.webpackChunkintranet=self.webpackChunkintranet||[]).push([[3391],{3391:(G,u,a)=>{a.r(u),a.d(u,{RejectedoverdueComponent:()=>B});var p=a(6814),c=a(6223),_=a(1312),m=a(6521),v=a(7248),g=a(9246),f=a(951),b=a(9176),e=a(9212),Z=a(377),T=a(2425),x=a(5633),C=a(7473),h=a(5219);const U=()=>[p.H9,p.uU,c.Fj,c.JJ,c.On,g.Y,h.jx,Promise.resolve().then(a.bind(a,2681)).then(s=>s.FilterPipe)];function A(s,n){if(1&s){const t=e.EpF();e.TgZ(0,"h2",34),e._uU(1,"Rejection Overdue List"),e.qZA(),e.TgZ(2,"div",35)(3,"div",36)(4,"input",37),e.NdJ("ngModelChange",function(o){e.CHM(t);const r=e.oxw(2);return e.KtG(r.searchvalue=o)}),e.qZA(),e.TgZ(5,"span",38),e.O4$(),e.TgZ(6,"svg",39),e._UZ(7,"path",40)(8,"path",41)(9,"path",42),e.qZA()()()()}if(2&s){const t=e.oxw(2);e.xp6(4),e.Q6J("ngModel",t.searchvalue)}}function M(s,n){if(1&s){const t=e.EpF();e.TgZ(0,"tr",11)(1,"td",47),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td")(6,"div")(7,"button",48),e.NdJ("click",function(){const r=e.CHM(t).$implicit,l=e.oxw(3);return e.KtG(l.opendetails(r.uid))}),e._uU(8),e.qZA()(),e.TgZ(9,"div",49),e._uU(10),e.qZA()(),e.TgZ(11,"td")(12,"div"),e._uU(13),e.ALo(14,"currency"),e.qZA()(),e.TgZ(15,"td")(16,"div"),e._uU(17),e.qZA(),e.TgZ(18,"div"),e._uU(19),e.ALo(20,"date"),e.qZA()(),e.TgZ(21,"td")(22,"button",50),e.NdJ("click",function(){const r=e.CHM(t).$implicit,l=e.oxw(3);return e.KtG(l.expendaccordion(r))}),e._uU(23,"Action"),e.qZA()()()}if(2&s){const t=n.$implicit,i=n.$index;e.xp6(2),e.Oqu(i+1),e.xp6(2),e.AsE("",t.uid,"(",t.buyeraddress,")"),e.xp6(4),e.Oqu(t.name),e.xp6(2),e.Oqu(t.itemname),e.xp6(3),e.AsE("",t.quantity,"(",e.xi3(14,9,t.rate,"INR"),")"),e.xp6(4),e.Oqu(t.mrnby),e.xp6(2),e.Oqu(e.xi3(20,12,t.mrndate,"dd-MMM-yyyy hh:mm a"))}}function R(s,n){if(1&s&&(e.TgZ(0,"div",6)(1,"div",3)(2,"div",43)(3,"div",44)(4,"table",45)(5,"thead")(6,"tr")(7,"th",46),e._uU(8,"S.No."),e.qZA(),e.TgZ(9,"th",46),e._uU(10,"UID"),e.qZA(),e.TgZ(11,"th",46),e._uU(12,"Vender Name/Item Name"),e.qZA(),e.TgZ(13,"th",46),e._uU(14,"Rate/Qty"),e.qZA(),e.TgZ(15,"th",46),e._uU(16,"Last Update"),e.qZA(),e.TgZ(17,"th",46),e._uU(18,"Action"),e.qZA()()(),e.TgZ(19,"tbody"),e.SjG(20,M,24,15,"tr",51,e.x6l),e.ALo(22,"filter"),e.qZA()()()()()()),2&s){const t=e.oxw(2);e.xp6(20),e.wJu(e.xi3(22,0,t.service.p2plistoverduelist,t.searchvalue))}}function D(s,n){if(1&s&&(e.TgZ(0,"div",52)(1,"p",53),e._uU(2,"Showing "),e.TgZ(3,"span"),e._uU(4,"1"),e.qZA(),e._uU(5," to "),e.TgZ(6,"span"),e._uU(7),e.qZA(),e._uU(8," of "),e.TgZ(9,"span"),e._uU(10),e.qZA(),e._uU(11," entries"),e.qZA()()),2&s){const t=e.oxw(2);e.xp6(7),e.Oqu(t.service.p2plistoverduelist.length),e.xp6(3),e.Oqu(t.service.p2plistoverduelist.length)}}function E(s,n){if(1&s){const t=e.EpF();e.TgZ(0,"p-sidebar",31),e.NdJ("visibleChange",function(o){e.CHM(t);const r=e.oxw();return e.KtG(r.service.rejectionvisible=o)}),e.YNc(1,A,10,1,"ng-template",32)(2,R,23,3,"ng-template",22)(3,D,12,2,"ng-template",33),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("visible",t.service.rejectionvisible)("fullScreen",!0)}}function j(s,n){1&s&&(e.TgZ(0,"div",54),e._uU(1,"Drag and drop files"),e.qZA())}function O(s,n){if(1&s&&(e.TgZ(0,"li"),e._uU(1),e.qZA()),2&s){const t=n.$implicit;e.xp6(1),e.AsE("",t.name," - ",t.size," bytes ")}}function q(s,n){if(1&s&&(e.TgZ(0,"ul"),e.YNc(1,O,2,2,"li",56),e.qZA()),2&s){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.uploadedFiles)}}function y(s,n){if(1&s&&e.YNc(0,q,2,1,"ul",55),2&s){const t=e.oxw();e.Q6J("ngIf",t.uploadedFiles.length)}}function F(s,n){1&s&&(e.TgZ(0,"div",54),e._uU(1,"Drag and drop files"),e.qZA())}function P(s,n){if(1&s&&(e.TgZ(0,"li"),e._uU(1),e.qZA()),2&s){const t=n.$implicit;e.xp6(1),e.AsE("",t.name," - ",t.size," bytes ")}}function w(s,n){if(1&s&&(e.TgZ(0,"ul"),e.YNc(1,P,2,2,"li",56),e.qZA()),2&s){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.uploadedFiles1)}}function J(s,n){if(1&s&&e.YNc(0,w,2,1,"ul",55),2&s){const t=e.oxw();e.Q6J("ngIf",t.uploadedFiles1.length)}}function I(s,n){if(1&s){const t=e.EpF();e.TgZ(0,"button",50),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.movetoback(o.service.p2pitemdata.Id,"MRN"))}),e._uU(1,"Back to Approval"),e.qZA()}}function N(s,n){if(1&s){const t=e.EpF();e.TgZ(0,"button",65),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,r=e.oxw();return e.KtG(r.DeleteImage(o.id))}),e.O4$(),e.TgZ(1,"svg",39),e._UZ(2,"path",40)(3,"path",66)(4,"path",67),e.qZA()()}}function L(s,n){if(1&s&&e._UZ(0,"p-image",68),2&s){const t=e.oxw().$implicit,i=e.oxw();e.Q6J("src",i.imageservice.imageurl+t.path)("preview",!0)}}function S(s,n){if(1&s&&(e.TgZ(0,"a",69),e._UZ(1,"img",70),e.qZA()),2&s){const t=e.oxw().$implicit,i=e.oxw();e.Q6J("href",i.imageservice.imageurl+t.path,e.LSH)}}function Q(s,n){if(1&s&&(e.TgZ(0,"div",57)(1,"div",43)(2,"div",58)(3,"h3",59),e._uU(4),e.qZA(),e.TgZ(5,"div",60),e.YNc(6,N,5,0,"button",61),e.qZA()(),e.TgZ(7,"div",62),e.YNc(8,L,1,2,"p-image",63)(9,S,2,1,"a",64),e.qZA()()()),2&s){const t=n.$implicit,i=e.oxw();e.xp6(4),e.Oqu(t.type),e.xp6(2),e.Q6J("ngIf",i.isadmin),e.xp6(2),e.Q6J("ngIf","pdf"!=t.path.split(".").pop()),e.xp6(1),e.Q6J("ngIf","pdf"==t.path.split(".").pop())}}function Y(s,n){1&s&&(e.TgZ(0,"h1",71),e._uU(1,"No File Uploaded"),e.qZA())}function K(s,n){1&s&&(e.TgZ(0,"h1",71),e._uU(1,"No File Uploaded"),e.qZA())}const W=()=>({width:"100vw"});let B=(()=>{class s{constructor(t,i,o,r){this.service=t,this.toast=i,this.userservice=o,this.imageservice=r,this.isadmin=!1,this.searchvalue="",this.panelOpenState=!1,this.visible=!1,this.uploadedFiles=[],this.uploadedFiles1=[]}ngOnInit(){"Admin"==this.userservice.GetRole()&&(this.isadmin=!0)}opendetails(t){this.service.GetP2Pbyid(t).subscribe(i=>{this.service.p2pdata=i.data}),this.service.detail=!0,null!=this.service.p2pdata.accountdate?this.service.p2pdata.status=10:null!=this.service.p2pdata.movementdate?this.service.p2pdata.status=9:null!=this.service.p2pdata.mrndate?this.service.p2pdata.status=8:null!=this.service.p2pdata.mandate?this.service.p2pdata.status=7:null!=this.service.p2pdata.gerdate?this.service.p2pdata.status=6:null!=this.service.p2pdata.podate?this.service.p2pdata.status=5:null!=this.service.p2pdata.approvaldate||null!=this.service.p2pdata.quotationdate?this.service.p2pdata.status=4:null!=this.service.p2pdata.updateddate?this.service.p2pdata.status=2:null!=this.service.p2pdata.createddate&&(this.service.p2pdata.status=1),this.service.GetP2PItemListbyid(t).subscribe(i=>{console.log(i),"success"==i.status&&(this.service.p2pitemlist=i.data)}),this.service.GetP2PApprovedItemListbyid(t).subscribe(i=>{console.log(i),"success"==i.status&&(this.service.p2papproveditemlist=i.data)}),this.imageservice.GetDocumentsbyid(t).subscribe(i=>{"success"==i.status&&(this.imageservice.rcuploadedlist=i.data),console.log(i)})}LoadOverdueList(){this.service.P2PItemList("MovementOverdue").subscribe(t=>{console.log(t),"success"==t.status&&(this.service.p2plistoverduelist=t.data)},t=>{this.toast.error(t)})}LoadDashboard(){this.service.GetDashboardReport().subscribe(t=>{this.service.dashboarddata=t})}gettime(){let t=new Date,o=t.getTime()+Math.abs(6e4*t.getTimezoneOffset());return new Date(o).toISOString()}expendaccordion(t){this.visible=!0,this.service.p2pitemdata=new f.bY,this.service.p2pitemdata=t,this.imageservice.id=t.uid,this.imageservice.RefreshFile()}onUpload(t){for(let i of t.files)this.uploadedFiles.push(i);this.service.p2pitemdata.proofofdelivery="Yes",this.imageservice.id=this.service.p2pitemdata.uid,this.service.CreateUpdateQuotation().subscribe(i=>{"success"==i.status?(this.toast.success("Debit Note Copy Uploaded Successfully","Success"),this.imageservice.RefreshFile()):this.toast.warning(i.message,"Warning")},i=>{this.toast.error(i,"Error")})}onUpload1(t){for(let i of t.files)this.uploadedFiles1.push(i);this.service.p2pitemdata.purchasereturn="Yes",this.imageservice.id=this.service.p2pitemdata.uid,this.service.CreateUpdateQuotation().subscribe(i=>{"success"==i.status?(this.toast.success("Return Proof Uploaded Successfully","Success"),this.imageservice.RefreshFile()):this.toast.warning(i.message,"Warning")},i=>{this.toast.error(i,"Error")})}DeleteImage(t){1==confirm("Are You Sure want to Delete?")?this.imageservice.DeleteImage(t).subscribe(i=>{console.log(i),(i.status="success")?this.toast.success(i.result,"Success"):this.toast.error(i.result,"Error"),this.imageservice.RefreshFile()}):this.toast.warning("File Deletion Cancelled","Cancelled")}updatemrn(t){t.valid?(this.service.p2pitemdata.rejectedby=this.gettime(),this.service.p2pitemdata.rejecteddate=this.userservice.GetFullName(),this.service.CreateUpdateQuotation().subscribe(i=>{"success"==i.status?(this.toast.success(i.message,"Success"),this.service.p2plistoverduelist=null,this.visible=!1,this.LoadDashboard(),this.LoadOverdueList()):this.toast.warning(i.message,"Warning")},i=>{this.toast.error(i,"Error")})):this.toast.warning("Please Update GER Number","Warning")}movetoback(t,i){1==confirm("Are You Sure want to Move Item to "+i+"?")&&this.service.BacktoItemOverdue(t,i).subscribe(o=>{"success"==o.status?(this.toast.success(o.message,"Success"),this.LoadDashboard(),this.LoadOverdueList()):this.toast.error(o.message,"Error")})}static#e=this.\u0275fac=function(i){return new(i||s)(e.Y36(Z.h),e.Y36(T._W),e.Y36(x.K),e.Y36(C.D))};static#t=this.\u0275cmp=e.Xpm({type:s,selectors:[["app-rejectedoverdue"]],standalone:!0,features:[e.jDz],decls:51,vars:20,consts:[["header","Reject Overdue Form",3,"visible","maximizable","visibleChange"],[1,"row","g-0"],[1,"col-12","col-lg-9","col-xl-9","border-end"],[1,"col-12"],["autocomplete","off",3,"ngSubmit"],["mygerForm","ngForm"],[1,"row","row-cards"],["type","hidden","name","Id",3,"value"],["type","hidden","name","uid",3,"value"],[1,"col-sm-12","col-md-12"],[1,"mb-3"],[1,"strong","text-center"],[1,"row"],[1,"col-md-4"],[1,"form-label","required"],["required","","rows","5","name","rejectedreason",1,"form-control",3,"ngClass","ngModel","ngModelChange"],["rejectedreason","ngModel"],[1,"form-label","requied"],["type","hidden","required","","name","proofofdelivery",3,"ngModel","ngModelChange"],["proofofdelivery","ngModel"],["name","demo[]",3,"url","multiple","onUpload"],["pTemplate","toolbar"],["pTemplate","content"],["type","hidden","required","","name","purchasereturn",3,"ngModel","ngModelChange"],["purchasereturn","ngModel"],[1,"card-footer","text-end"],[1,"d-flex"],["type","button","class","btn btn-outline-info btn-pill strong"],["type","submit",1,"btn","btn-primary","ms-auto",3,"disabled"],["class","text-danger text-center"],[1,"col-12","col-lg-3","col-xl-3","d-flex","flex-column"],[3,"visible","fullScreen","visibleChange"],["pTemplate","header"],["pTemplate","footer"],[1,"page-title"],[1,"ms-auto","text-muted"],[1,"input-icon"],["type","text","placeholder","Search.....",1,"form-control",3,"ngModel","ngModelChange"],[1,"input-icon-addon"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","stroke-width","2","stroke","currentColor","fill","none","stroke-linecap","round","stroke-linejoin","round",1,"icon"],["stroke","none","d","M0 0h24v24H0z","fill","none"],["d","M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0"],["d","M21 21l-6 -6"],[1,"card"],[1,"table-responsive"],["id","contentToConvert",1,"table","card-table","table-vcenter","datatable","table-sm","table-fixed"],[1,"text-center"],[1,"text-nowrap"],["type","button",1,"btn-link","strong",3,"click"],[1,"text-danger"],["type","button",1,"btn","btn-outline-info","btn-pill","strong",3,"click"],["class","strong text-center"],[1,"card-footer","d-flex","align-items-center"],[1,"m-0","strong"],[1,"py-3"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"col-2"],[1,"card-header"],[1,"card-title"],[1,"card-actions","btn-actions"],["type","button","class","btn-action text-danger",3,"click",4,"ngIf"],[1,"card-body","p-0"],["width","250","height","250",3,"src","preview",4,"ngIf"],["class","text-center","target","_blank",3,"href",4,"ngIf"],["type","button",1,"btn-action","text-danger",3,"click"],["d","M18 6l-12 12"],["d","M6 6l12 12"],["width","250","height","250",3,"src","preview"],["target","_blank",1,"text-center",3,"href"],["src","https://upload.wikimedia.org/wikipedia/commons/8/87/PDF_file_icon.svg","width","250","height","250"],[1,"text-danger","text-center"],["class","col-2"]],template:function(i,o){if(1&i){const r=e.EpF();e.YNc(0,E,4,2),e.EqZ(1,0,U),e.TgZ(3,"p-dialog",0),e.NdJ("visibleChange",function(d){return o.visible=d}),e.TgZ(4,"div",1)(5,"div",2)(6,"div",3)(7,"form",4,5),e.NdJ("ngSubmit",function(){e.CHM(r);const d=e.MAs(8);return e.KtG(d.form.valid&&o.updatemrn(d))}),e.TgZ(9,"div",6),e._UZ(10,"input",7)(11,"input",8),e.TgZ(12,"div",9)(13,"div",10)(14,"h2",11),e._uU(15,"Upload Debit Note Copy"),e.qZA(),e.TgZ(16,"div",12)(17,"div",13)(18,"label",14),e._uU(19,"Remarks"),e.qZA(),e.TgZ(20,"textarea",15,16),e.NdJ("ngModelChange",function(d){return o.service.p2pitemdata.rejectedreason=d}),e.qZA()(),e.TgZ(22,"div",13)(23,"label",17),e._uU(24,"Upload Debit Note Copy"),e.qZA(),e.TgZ(25,"input",18,19),e.NdJ("ngModelChange",function(d){return o.service.p2pitemdata.proofofdelivery=d}),e.qZA(),e.TgZ(27,"p-fileUpload",20),e.NdJ("onUpload",function(d){return o.onUpload(d)}),e.YNc(28,j,2,0,"ng-template",21)(29,y,1,1,"ng-template",22),e.qZA()(),e.TgZ(30,"div",13)(31,"label",17),e._uU(32,"Upload Return Proof Copy"),e.qZA(),e.TgZ(33,"input",23,24),e.NdJ("ngModelChange",function(d){return o.service.p2pitemdata.purchasereturn=d}),e.qZA(),e.TgZ(35,"p-fileUpload",20),e.NdJ("onUpload",function(d){return o.onUpload1(d)}),e.YNc(36,F,2,0,"ng-template",21)(37,J,1,1,"ng-template",22),e.qZA()()()()(),e.TgZ(38,"div",25)(39,"div",26),e.YNc(40,I,2,0,"button",27),e.TgZ(41,"button",28),e._uU(42,"Submit"),e.qZA()()()()()(),e._UZ(43,"br"),e.TgZ(44,"div",12),e.SjG(45,Q,10,4,"div",72,e.x6l,!1,Y,2,0),e.YNc(48,K,2,0,"h1",29),e.qZA()(),e.TgZ(49,"div",30),e._UZ(50,"app-tenderchat"),e.qZA()()()}if(2&i){const r=e.MAs(8),l=e.MAs(21);e.xp6(1),e.cPc(1==o.service.rejectionvisible),e.xp6(2),e.Akn(e.DdM(19,W)),e.Q6J("visible",o.visible)("maximizable",!0),e.xp6(7),e.Q6J("value",o.service.p2pitemdata.Id),e.xp6(1),e.Q6J("value",o.service.p2pitemdata.uid),e.xp6(9),e.Q6J("ngClass",l.invalid?"is-invalid":"is-valid mb-2")("ngModel",o.service.p2pitemdata.rejectedreason),e.xp6(5),e.Q6J("ngModel",o.service.p2pitemdata.proofofdelivery),e.xp6(2),e.Q6J("url",o.imageservice.uploadurl+"/"+o.service.p2pitemdata.uid+"/DebitNote")("multiple",!0),e.xp6(6),e.Q6J("ngModel",o.service.p2pitemdata.purchasereturn),e.xp6(2),e.Q6J("url",o.imageservice.uploadurl+"/"+o.service.p2pitemdata.uid+"/PurchaseReturn")("multiple",!0),e.xp6(5),e.um2(40,o.isadmin?40:-1),e.xp6(1),e.Q6J("disabled",r.invalid),e.xp6(4),e.wJu(o.imageservice.rcuploadedlist),e.xp6(3),e.um2(48,null==o.imageservice.rcuploadedlist?48:-1)}},dependencies:[p.ez,p.mk,p.sg,p.O5,c.u5,c._Y,c.Fj,c.JJ,c.JL,c.Q7,c.On,c.F,g.l,h.jx,m.O,m.p,_.S,_.V,v.$,v.E,b.TenderchatComponent]})}return s})()}}]);