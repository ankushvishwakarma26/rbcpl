"use strict";(self.webpackChunkintranet=self.webpackChunkintranet||[]).push([[2014],{2014:(O,d,a)=>{a.r(d),a.d(d,{LoginComponent:()=>y});var g=a(6814),r=a(6223),h=a(1312),u=a(1687),t=a(9212),p=a(5633),m=a(266),_=a(2425),b=a(8778),f=a(9862);function v(o,l){if(1&o&&(t.TgZ(0,"label",31),t._UZ(1,"i",32),t._uU(2),t.qZA()),2&o){const e=t.oxw(2);t.xp6(2),t.hij(" ",e.twofactorerror,"")}}function C(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"h3",23),t._uU(1),t.qZA(),t.TgZ(2,"h3",24)(3,"button",25),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.ResentOTP())}),t._uU(4),t.qZA()(),t.TgZ(5,"div",26)(6,"label",27),t._uU(7," One Time Password "),t.qZA(),t.TgZ(8,"div",28)(9,"input",29),t.NdJ("ngModelChange",function(s){t.CHM(e);const n=t.oxw();return t.KtG(n.otp=s)})("input",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.CheckTwoFactorAuthentication())}),t.qZA()(),t._UZ(10,"br"),t.YNc(11,v,3,1,"label",30),t.qZA()}if(2&o){const e=t.oxw();t.xp6(1),t.hij("Please confirm your account by entering the authorization code sent to +91 ***-***-",e.respdata.mobile.substring(6,10)," "),t.xp6(2),t.Q6J("disabled",0!=e.time),t.xp6(1),t.Oqu(0==e.time?"Resent OTP":e.time+" Seconds"),t.xp6(5),t.Q6J("ngModel",e.otp),t.xp6(2),t.um2(11,e.twofactorerror?11:-1)}}function w(o,l){1&o&&(t.TgZ(0,"div",48),t._UZ(1,"div",49),t.qZA())}function x(o,l){if(1&o&&(t.TgZ(0,"label",31),t._UZ(1,"i",32),t._uU(2),t.qZA()),2&o){const e=t.oxw(3);t.xp6(2),t.hij(" ",e.errormessage,"")}}function T(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"form",33,34),t.NdJ("submit",function(){t.CHM(e);const s=t.MAs(1),n=t.oxw(2);return t.KtG(n.ProceedLogin(s))}),t.TgZ(2,"div",35)(3,"label",27),t._uU(4,"Email or Mobile No or Employee ID"),t.qZA(),t.TgZ(5,"input",36),t.NdJ("ngModelChange",function(s){t.CHM(e);const n=t.oxw(2);return t.KtG(n.service.logindata.username=s)}),t.qZA()(),t.TgZ(6,"div",26)(7,"label",27),t._uU(8," Password "),t.TgZ(9,"span",37)(10,"a",38),t._uU(11,"I forgot password"),t.qZA()()(),t.TgZ(12,"div",28)(13,"input",39),t.NdJ("ngModelChange",function(s){t.CHM(e);const n=t.oxw(2);return t.KtG(n.service.logindata.password=s)}),t.qZA(),t.TgZ(14,"span",40)(15,"a",41),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.showPassword())}),t._UZ(16,"i"),t.qZA()()()(),t.TgZ(17,"div",26)(18,"label",42)(19,"input",43),t.NdJ("ngModelChange",function(s){t.CHM(e);const n=t.oxw(2);return t.KtG(n.rememberme=s)}),t.qZA(),t.TgZ(20,"span",44),t._uU(21,"Remember me on this device"),t.qZA()()(),t.YNc(22,w,2,0,"div",45),t.TgZ(23,"div",46)(24,"button",47),t._uU(25),t.qZA()(),t._UZ(26,"br"),t.YNc(27,x,3,1,"label",30),t.qZA()}if(2&o){const e=t.MAs(1),i=t.oxw(2);t.xp6(5),t.Q6J("ngModel",i.service.logindata.username)("disabled",!0),t.xp6(8),t.Q6J("type",i.show_button?"text":"password")("ngModel",i.service.logindata.password),t.xp6(3),t.Tol(i.show_eye?"fa fa-eye":"fa fa-eye-slash"),t.xp6(3),t.Q6J("ngModel",i.rememberme),t.xp6(3),t.um2(22,i.loader?22:-1),t.xp6(2),t.Q6J("disabled",e.invalid),t.xp6(1),t.Oqu(i.loginbutton),t.xp6(2),t.um2(27,i.errormessage?27:-1)}}function Z(o,l){1&o&&(t.TgZ(0,"div",48),t._UZ(1,"div",49),t.qZA())}function M(o,l){if(1&o&&(t.TgZ(0,"label",31),t._UZ(1,"i",32),t._uU(2),t.qZA()),2&o){const e=t.oxw(3);t.xp6(2),t.hij(" ",e.errormessage,"")}}function P(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"div",35)(1,"label",27),t._uU(2,"Email or Mobile No or Employee ID"),t.qZA(),t.TgZ(3,"input",50),t.NdJ("ngModelChange",function(s){t.CHM(e);const n=t.oxw(2);return t.KtG(n.service.logindata.username=s)})("keydown.enter",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.CheckUserExists())}),t.qZA()(),t.YNc(4,Z,2,0,"div",45),t.TgZ(5,"div",46)(6,"button",51),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.CheckUserExists())}),t._uU(7,"Next"),t.qZA()(),t._UZ(8,"br"),t.YNc(9,M,3,1,"label",30)}if(2&o){const e=t.oxw(2);t.xp6(3),t.Q6J("ngModel",e.service.logindata.username),t.xp6(1),t.um2(4,e.loader?4:-1),t.xp6(2),t.Q6J("disabled",!e.service.logindata.username),t.xp6(3),t.um2(9,e.errormessage?9:-1)}}function L(o,l){if(1&o&&t.YNc(0,T,28,11,"form")(1,P,10,4),2&o){const e=t.oxw();t.um2(0,e.existsuser?0:1)}}let y=(()=>{class o{constructor(e,i,s,n,c){this.service=e,this.route=i,this.toast=s,this.waservice=n,this.http=c,this.logonurl="",this.warningpopup=!1,this.loginbutton="Sign in",this.loader=!1,this.otpvisible=!1,this.errormessage=null,this.show_button=!1,this.show_eye=!1,this.rememberme=!1,this.emailpassword=!1,this.mobilewithotp=!1,this.lat=" ",this.lng=" ",this.existsuser=!1,this.time=300,this.twofactorerror=""}ngOnInit(){localStorage.clear();var e=window.location.pathname,i=window.location.href,c=window.location.href.substring(0,i.length-e.length);this.logonurl=c,"http://10.10.9.190:1010"==c||"http://122.160.143.6:1010"==c||"http://localhost:4200"==c||"https://localhost:4200"==c?(this.emailpassword=!0,this.mobilewithotp=!1):(this.emailpassword=!1,this.mobilewithotp=!0),this.getLocation()}getLocation(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(e=>{e&&(this.lat=e.coords.latitude,this.lng=e.coords.longitude)})}changelogin(){this.emailpassword=!this.emailpassword}showPassword(){this.show_button=!this.show_button,this.show_eye=!this.show_eye}getRandomNumber(){return Math.floor(899999*Math.random())+1e5}CheckUserExists(){this.service.logindata.username?(this.loader=!0,this.errormessage="",this.service.GetComputerName().subscribe(i=>{this.service.logindata.computer=i.computer}),this.service.logindata.computer=this.service.GetComputer(),this.service.logindata.logon=this.logonurl,this.service.logindata.longitude=this.lng.toString(),this.service.logindata.latitude=this.lat.toString(),this.service.CheckUserExist().subscribe(i=>{this.loader=!1,"leavesuccess"==i.status?(this.respdata=i,this.ResentOTP()):"success"==i.status?this.existsuser=!0:"inactive"==i.status?this.toast.warning(i.message,"Warning"):(this.toast.error(i.message,"Error"),this.errormessage=i.message)})):this.toast.warning("User can not be Blank","Warning")}MobileValidation(){return!(!this.mobile||10!=this.mobile.toString().length)}ProceedLoginwithOTP(){this.loader=!1,this.loginbutton="Please wait.....",this.mobile&&10==this.mobile.toString().length?(this.service.loginwithmobiledata.mobile=this.mobile,this.service.loginwithmobiledata.logon=this.logonurl,this.service.loginwithmobiledata.longitude=this.lng.toString(),this.service.loginwithmobiledata.latitude=this.lat.toString(),this.service.ProceedLoginwithOTP().subscribe(e=>{this.respdata=e,"success"==this.respdata.status?this.ResentOTP():"inactive"==this.respdata.status?(this.toast.warning(this.respdata.message,"Warning"),this.warningpopup=!0,this.errormessage=this.respdata.message,this.loginbutton="Failed to Login"):"leavesuccess"==this.respdata.status?this.ResentOTP():(this.toast.error(e.message,"Failed"),this.errormessage="Login Failed!!! Please Try Again",this.loginbutton="Failed to Login")},e=>{this.warningpopup=!0,this.toast.error(e,"Error"),this.errormessage=e,this.loginbutton="Failed to Login"})):this.mobile&&this.mobile.toString().length>10?(this.loader=!1,this.toast.warning("You have Entered "+this.mobile.toString().length+"Digit Mobile Number!!! Please Try with 10 Digit Mobile Number","Warning"),this.errormessage="Invalid Contact Number!!! Please Try with Correct Mobile Number"):(this.loader=!1,this.toast.warning("Invalid Contact Number!!! Please Try with Correct Mobile Number","Warning"),this.errormessage="Invalid Contact Number!!! Please Try with Correct Mobile Number")}ProceedLogin(e){e.valid&&(this.loader=!0,this.loginbutton="Please wait.....",this.service.GetComputerName().subscribe(i=>{this.service.logindata.computer=i.computer}),this.service.logindata.computer=this.service.GetComputer(),this.service.logindata.logon=this.logonurl,this.service.logindata.longitude=this.lng.toString(),this.service.logindata.latitude=this.lat.toString(),this.service.ProceedLogin().subscribe(i=>{this.loader=!1,this.respdata=i,"success"==this.respdata.status?(this.loginbutton="Success",1==this.respdata.twofactorauthentication?this.ResentOTP():this.SuccessLogin()):"inactive"==this.respdata.status?(this.toast.warning(this.respdata.message,"Warning"),this.warningpopup=!0,this.errormessage=this.respdata.message,this.loginbutton="Failed to Login"):"leavesuccess"==this.respdata.status?this.ResentOTP():(this.warningpopup=!0,this.toast.error(this.respdata.message,"Error"),this.errormessage=this.respdata.message,this.loginbutton="Failed to Login")},i=>{401==i.status?(this.warningpopup=!0,this.toast.error("Either Username or Password are Incorrect","Error"),this.errormessage="Either Username or Password are Incorrect",this.loginbutton="Failed to Login"):(this.warningpopup=!0,this.toast.error(i,"Error"),this.errormessage=i,this.loginbutton="Failed to Login")}))}RemindResetOTP(){this.time=300,this.subscription=(0,u.F)(1e3).subscribe(e=>{this.time--,0==this.time&&(this.UnsubscribeOTPSubscription(),this.time=0)})}UnsubscribeOTPSubscription(){this.subscription&&this.subscription.unsubscribe()}ResentOTP(){this.storeotp=this.getRandomNumber(),this.waservice.sendotp(this.respdata.mobile,"Please use OTP "+this.storeotp+" to login to your INTRANET account. OTP valid for 10 minutes").subscribe(i=>{"success"==i.status?(this.loader=!1,this.otpvisible=!0,this.toast.success("OTP Successfully Sent","Success"),this.RemindResetOTP()):(this.loader=!1,this.errormessage=i.message)},i=>{this.loader=!1,this.errormessage=i.message})}CheckTwoFactorAuthentication(){var i=this.otp.toString().length;6==i&&this.otp==this.storeotp?("leavesuccess"==this.respdata.status?this.SuccessLeaveLogin():this.SuccessLogin(),this.twofactorerror=""):6==i&&this.otp!=this.storeotp&&(this.toast.warning("Invalid OTP!!! Please Check Your OTP then Try again.","Warning"),this.twofactorerror="Invalid OTP!!! Please Check Your OTP then Try again.")}SuccessLogin(){localStorage.setItem("token",this.respdata.token),1==this.rememberme?localStorage.setItem("expiration",this.respdata.expiration):(this.date=new Date,this.date.setDate(this.date.getDate()+1),localStorage.setItem("expiration",this.date.toJSON())),localStorage.setItem("parth",this.respdata.parth),localStorage.setItem("mobile",this.respdata.mobile),localStorage.setItem("profile",this.respdata.profile),localStorage.setItem("eid",this.respdata.eid),this.toast.success("Congratulation You have Successfully Logged in","Success"),setTimeout(()=>{window.open("./","_self")},500)}SuccessLeaveLogin(){this.date=new Date,this.date.setDate(this.date.getDate()+1),localStorage.setItem("expiration",this.date.toJSON()),localStorage.setItem("Role","LeaveOnly"),localStorage.setItem("name",this.respdata.name),localStorage.setItem("mobile",this.respdata.mobile),localStorage.setItem("eid",this.respdata.eid),this.toast.success("Congratulation You have Successfully Logged in","Success"),setTimeout(()=>{window.open("./","_self")},500)}RedirectRegister(){this.route.navigate(["access/register"])}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(p.K),t.Y36(m.F0),t.Y36(_._W),t.Y36(b.C),t.Y36(f.eN))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-login"]],standalone:!0,features:[t.jDz],decls:28,vars:1,consts:[[1,"d-flex","flex-column","bg-white"],[1,"row","g-0","flex-fill"],[1,"col-12","col-lg-6","col-xl-4","border-top-wide","border-primary","d-flex","flex-column","justify-content-center"],[1,"container","container-tight","my-5","px-lg-5"],[1,"text-center","mb-4"],["routerLink","",1,"navbar-brand","navbar-brand-autodark"],["src","http://6am12pm.com/wp-content/uploads/2019/03/intranet-logo.png","height","36","alt",""],[1,"col-12","col-lg-6","col-xl-8","d-none","d-lg-block"],["id","carousel-indicators","data-bs-ride","carousel",1,"carousel","slide"],[1,"carousel-indicators"],["type","button","data-bs-target","#carousel-indicators","data-bs-slide-to","0",1,"active"],["type","button","data-bs-target","#carousel-indicators","data-bs-slide-to","1",1,""],["type","button","data-bs-target","#carousel-indicators","data-bs-slide-to","2",1,""],["type","button","data-bs-target","#carousel-indicators","data-bs-slide-to","3",1,""],["type","button","data-bs-target","#carousel-indicators","data-bs-slide-to","4",1,""],[1,"carousel-inner"],[1,"carousel-item","active"],["alt","","src","https://preview.tabler.io/static/photos/home-office-desk-with-macbook-iphone-calendar-watch-and-organizer.jpg",1,"bg-cover","h-100","min-vh-100"],[1,"carousel-item"],["alt","","src","https://preview.tabler.io/static/photos/workplace-with-laptop-on-table-at-home.jpg",1,"bg-cover","h-100","min-vh-100"],["alt","","src","https://preview.tabler.io/static/photos/white-apple-imac-computer-with-elephant-mousepad.jpg",1,"bg-cover","h-100","min-vh-100"],["alt","","src","https://preview.tabler.io/static/photos/workplace-with-laptop-on-table-at-home-2.jpg",1,"bg-cover","h-100","min-vh-100"],["alt","","src","https://preview.tabler.io/static/photos/working-in-a-restaurant-macbook-cheese-cake-and-cup-of-coffee.jpg",1,"bg-cover","h-100","min-vh-100"],[1,"text-success","text-center"],[1,"text-center"],["type","button",1,"btn","btn-info",3,"disabled","click"],[1,"mb-2"],[1,"form-label"],[1,"input-group","input-group-flat"],["type","number","pattern","[0-9]{6}","required","","placeholder","One Time Password","autocomplete","off",1,"form-control",3,"ngModel","ngModelChange","input"],["class","form-label text-danger text-center"],[1,"form-label","text-danger","text-center"],[1,"fa","fa-warning"],[3,"submit"],["loginform","ngForm"],[1,"mb-3"],["type","email","placeholder","your@email.com","autocomplete","off","required","","name","username",1,"form-control",3,"ngModel","disabled","ngModelChange"],[1,"form-label-description"],["routerLink","/forget-password"],["required","","name","password","placeholder","Your password","autocomplete","off",1,"form-control",3,"type","ngModel","ngModelChange"],[1,"input-group-text"],["title","Show password","data-bs-toggle","tooltip",1,"link-secondary",3,"click"],[1,"form-check"],["name","rememberme","type","checkbox",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check-label"],["class","progress"],[1,"form-footer"],["type","submit",1,"btn","btn-primary","w-100",3,"disabled"],[1,"progress"],[1,"progress-bar","progress-bar-indeterminate","bg-green"],["type","email","placeholder","Type Email or Mobile No or Employee ID","autocomplete","off","required","","name","username",1,"form-control",3,"ngModel","ngModelChange","keydown.enter"],["type","submit",1,"btn","btn-primary","w-100",3,"disabled","click"]],template:function(i,s){1&i&&(t.TgZ(0,"body",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"a",5),t._UZ(6,"img",6),t.qZA()(),t.YNc(7,C,12,5)(8,L,2,1),t.qZA()(),t.TgZ(9,"div",7)(10,"div",8)(11,"div",9),t._UZ(12,"button",10)(13,"button",11)(14,"button",12)(15,"button",13)(16,"button",14),t.qZA(),t.TgZ(17,"div",15)(18,"div",16),t._UZ(19,"img",17),t.qZA(),t.TgZ(20,"div",18),t._UZ(21,"img",19),t.qZA(),t.TgZ(22,"div",18),t._UZ(23,"img",20),t.qZA(),t.TgZ(24,"div",18),t._UZ(25,"img",21),t.qZA(),t.TgZ(26,"div",18),t._UZ(27,"img",22),t.qZA()()()()()()),2&i&&(t.xp6(7),t.um2(7,s.otpvisible?7:8))},dependencies:[g.ez,r.u5,r._Y,r.Fj,r.wV,r.Wl,r.JJ,r.JL,r.Q7,r.c5,r.On,r.F,h.S],styles:[".loader[_ngcontent-%COMP%]{border:8px solid #f3f3f3;border-top:8px solid #3498db;border-radius:50%;width:60px;height:60px;animation:_ngcontent-%COMP%_spin 2s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]})}return o})()}}]);